
CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 1

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V100\RWTH_SMP.bd\source\rpw.cpp

Line  Level
    1             #include "rpw.hpp"
    2             
    3             //----------------------------------------------------------
     +            -----------------
    4             // Methode RWP::RPW
    5             //----------------------------------------------------------
     +            -----------------
    6             RPW::RPW(void)

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 2

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V100\RWTH_SMP.bd\source\rpw.cpp

Line  Level
    1+            #include "rpw.hpp"
    2+            
    3+            //----------------------------------------------------------
     +            -----------------
    4+            // Methode RWP::RPW
    5             //----------------------------------------------------------
     +            -----------------
    6             RPW::RPW(void)
    7             {
    8             
    9                 hw_ir                = 0.0F; // Getriebeuntersetzung Hau
     +            ptwalzenmotor
   10                 kw_ia                = 0.0F; // Getriebeuntersetzung Keg
     +            elwalzenmotor
   11                 sin_kw_winkel_halbe  = 0.0F; // Sinus halber Kegelwalzen
     +            winkel
   12             
   13                 offset_rs            = 0.0F; 
   14                 offset_agr           = 0.0F;
   15                 offset_aso           = 0.0F;
   16                 offset_asu           = 0.0F;
   17                 offset_tr            = 0.0F;	
   18             }
   19             
   20             //----------------------------------------------------------
     +            -----------------
   21             // Methode RWP::Main_RAW
   22             //----------------------------------------------------------
     +            -----------------
   23             int RPW::Main_RAW(int    iter,
   24                               struct Def_Ein_Puff            Ein_Puff,
   25                               struct Def_Lokal_Puff          Lokal_Puff,
     +            
   26                               struct Def_Aus_Puff            Aus_Puff,
   27                               struct Def_Ein_Onli            Ein_Onli,
   28                               struct Def_Aus_Onli            Aus_Onli,
   29                               float  IBF_PARA[IBF_PARA_MAX],
   30                               struct Def_Ist_Inter           *Ist_Inter,
     +            
   31                               struct Def_Soll_Inter          *Soll_Inter
     +            ,
   32                               struct Def_IBF_Allgemein_SOLL  *Soll_IBF,
   33                               struct Def_IBF_Allgemein_IST   *Ist_IBF
     +            )
   34             {
   35                // Defintion der lokalen Variabeln
   36                // struct Def_IBF_Allgemein *IBF_Allgemein;
   37                // Los gehts
   38             
   39                // Initilisieren
   40              /*
   41                if (Ein_Puff.walzenstart_flag)
   42                {
   43             		Soll_Inter->rs_v = 0.0F;	
   44                }

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 3

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V100\RWTH_SMP.bd\source\rpw.cpp

Line  Level
   45                else
   46                {
   47                   if (Ein_Onli.rwg_poti_wert > 0.05F)
   48                   {
   49             	     Soll_Inter->rs_v = 2.0F * Ein_Onli.rwg_poti_wert
     +            ;
   50              	   }
   51                   else
   52                   {
   53                     Soll_Inter->rs_v = 0.0F; 
   54                   }
   55             
   56                   Soll_Inter->aso_v = 0.0F;
   57                }
   58             */	
   59                // Istwerte aufbereiten
   60                Istwerte_RAW(  Ein_Puff,
   61                               Lokal_Puff,
   62                               Aus_Puff,
   63                               &*Ist_Inter);
   64             
   65                Soll_Inter->rs_v  = Aus_Onli.ds_dh_sp_hp.s_punkt;
   66                Soll_Inter->aso_v = Aus_Onli.ds_dh_sp_hp.h_punkt;
   67             
   68                // Hauptprogrammteil des IBF-Tasks
   69                Main(*Ist_Inter,
   70                     IBF_PARA,
   71                     &*Ist_IBF,
   72                     &*Soll_Inter,
   73                     &*Soll_IBF);
   74             
   75                return TRUE;
   76             }
   77             
   78             //----------------------------------------------------------
     +            -----------------
   79             // Methode RWP::Istwerte_RAW
   80             //----------------------------------------------------------
     +            -----------------
   81             int RPW::Istwerte_RAW(  struct Def_Ein_Puff    Ein_Puff,
   82                                     struct Def_Lokal_Puff  Lokal_Puff,
   83                                     struct Def_Aus_Puff    Aus_Puff,
   84                                     struct Def_Ist_Inter   *Ist_Inter)
   85             {
   86                Ist_Inter->rs_pos    =    Ein_Puff.form_mess_of.dis_hw_dw
     +             
   87                                        + Ein_Puff.hw_geometrie.r_nenn
   88                                        + Ein_Puff.dw_geometrie.r_nenn;
   89                Ist_Inter->ag_pos    =    Ein_Puff.form_mess_of.da
   90                                        - Ein_Puff.pos_laser_u_of
   91                                        - Ein_Puff.awu_geometrie.l_fehlen
     +            de_spitze
   92                                        + Ein_Puff.hw_geometrie.r_nenn;
   93                Ist_Inter->aso_pos   =    Ein_Puff.form_mess_of.dis_aw;
   94                Ist_Inter->asu_pos   =    0.0F;

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 4

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V100\RWTH_SMP.bd\source\rpw.cpp

Line  Level
   95                Ist_Inter->tr_pos    =    Ein_Puff.pos_laser_u_of
   96                                        + Ein_Puff.awu_geometrie.l_fehlen
     +            de_spitze;
   97                Ist_Inter->rs_f      =    Ein_Puff.fr_of; 
   98                Ist_Inter->as_f      =    Ein_Puff.fa_of;	
   99             
  100                Ist_Inter->hw_n      =    Ein_Puff.n_hw_motor_ist / MIN_F
     +            AK;
  101             
  102                diam_hw              =    Ein_Puff.hw_geometrie.d_nenn;
  103                diam_dw              =    Ein_Puff.dw_geometrie.d_nenn; 
  104             
  105                hw_ir                =    Ein_Puff.hw1_motor.getriebe_unt
     +            ersetzung;              // Getriebeuntersetzung Hauptwalzenm
     +            otor
  106                kw_ia                =    Ein_Puff.awu_motor.getriebe_unt
     +            ersetzung;              // Getriebeuntersetzung Kegelwalzenm
     +            otor
  107                sin_kw_winkel_halbe  =    (float) sin(Ein_Puff.awu_geomet
     +            rie.winkel_bo * 0.5F);  // Sinus halber Kegelwalzenwinkel
  108             
  109             	Ist_Inter->da              = Aus_Puff.form_ring.da;
     +                					/* Aeusserer Durchmes
     +            ser        [mm]    */
  110             	Ist_Inter->da_of           = Ein_Puff.form_mess_of.da
     +            ;
  111               	Ist_Inter->di              = Aus_Puff.form_ring.di;
     +                					/* Innerer   Durchmes
     +            ser        [mm]    */
  112               	Ist_Inter->di_of           = Ein_Puff.form_mess_of.di
     +            ;
  113               	Ist_Inter->dm              = Aus_Puff.form_ring.dm;
     +                					/* Mittlerer Durchmes
     +            ser        [mm]    */
  114               	Ist_Inter->dm_of           = Ein_Puff.form_mess_of.dm
     +            ;    
  115               	Ist_Inter->fertig_ho_soll  = Aus_Puff.ist_walzform.hm
     +            ;
  116               	Ist_Inter->fertig_wd_soll  = Aus_Puff.ist_walzform.sm
     +            ;
  117               	Ist_Inter->h0a             = Aus_Puff.h0a;
     +            			/* Ringhoehe axial  einlaufend  [mm]
     +               */  		
  118               	Ist_Inter->h0r             = Aus_Puff.h0r;
     +            			/* Ringhoehe radial einlaufend  [mm]
     +               */
  119               	Ist_Inter->h1r             = Aus_Puff.h1r;
     +            			/* Ringhoehe radial auslaufend  [mm]
     +               */
  120               	Ist_Inter->h1a             = Aus_Puff.h1a;
     +            			/* Ringhoehe axial  auslaufend  [mm]
     +               */
  121               	Ist_Inter->h1a_of          = Ein_Puff.form_mess_of.di
     +            s_aw;
  122               	Ist_Inter->s0a             = Aus_Puff.s0a;

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 5

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V100\RWTH_SMP.bd\source\rpw.cpp

Line  Level
     +            			/* Wanddicke axial  einlaufend  [mm]
     +               */
  123               	Ist_Inter->s0r             = Aus_Puff.s0r;
     +            			/* Wanddicke radial einlaufend  [mm]
     +               */
  124               	Ist_Inter->s1a             = Aus_Puff.s1a;
     +            			/* Wanddicke axial  auslaufend  [mm]
     +               */
  125               	Ist_Inter->s1r             = Aus_Puff.s1r;
     +            			/* Wanddicke radial auslaufend  [mm]
     +               */
  126               	Ist_Inter->s1r_of          = Ein_Puff.form_mess_of.di
     +            s_hw_dw;
  127             	Ist_Inter->sfh             = Aus_Puff.s_ekv;
     +            				/* Wanddicke bei Fertighoehe
     +               [mm]    */
  128               	Ist_Inter->skw             = 0.0F;
     +             
  129               	Ist_Inter->skw_of          = 0.0F;
     +               		
  130               	Ist_Inter->wa_dvol         = Aus_Puff.dvol_ring_proz;
     +                   /* Berechnete Volumendifferenz [%]      */
  131                Ist_Inter->Vorform.sm      = Ein_Puff.vorform.sm;
     +              /* Wandstärke Null                  [mm] */
  132                Ist_Inter->Vorform.da      = Ein_Puff.vorform.da;
     +              /* Durchmesser Vorform                   */
  133               
  134             
  135                 return TRUE;
  136             }
  137             
  138             //----------------------------------------------------------
     +            -----------------
  139             // Methode RWP::MAIN
  140             //----------------------------------------------------------
     +            -----------------
  141             int RPW::Main( struct Def_Ist_Inter          Ist_Inter,
  142                            float  IBF_PARA[IBF_PARA_MAX],
  143                            struct Def_IBF_Allgemein_IST  *Ist_IBF, 
  144                            struct Def_Soll_Inter         *Soll_Inter,
  145                            struct Def_IBF_Allgemein_SOLL *Soll_IBF)
  146     1       {
  147     1       
  148     1          // Zuweisung Def_IBF_Allgemein_SOLL 
  149     1       
  150     1          // Übergeben der Parameter aus Soll_IBF/Ist_IBF Struktur
  151     1             
  152     1          Ist_IBF->Profilflag = Soll_IBF->Profilflag;
  153     1          Ist_IBF->InitAchse  = Soll_IBF->InitAchse;
  154     1          Ist_IBF->ExitAchse  = Soll_IBF->ExitAchse;
  155     1         
  156     1          Ist_IBF->RS_Pos_Null  = Soll_IBF->RS_Pos_Null; // bla_Nul
     +            l -> Initialisierung nach manueller Anfahrt / vor Profiliere
     +            n 
  157     1          Ist_IBF->ASO_Pos_Null = Soll_IBF->ASO_Pos_Null;

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 6

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V100\RWTH_SMP.bd\source\rpw.cpp

Line  Level
  158     1          Ist_IBF->AG_Pos_Null  = Soll_IBF->AG_Pos_Null;
     +            
  159     1       
  160     1          Ist_IBF->RS_Pos_Start = Soll_IBF->RS_Pos_Start; 	// Po
     +            sitionen in 'Walzen' vor Profilieren 
  161     1          Ist_IBF->AG_Pos_Start = Soll_IBF->AG_Pos_Start; 	
  162     1          Ist_IBF->ASO_Pos_Start= Soll_IBF->ASO_Pos_Start;
     +              
  163     1          
  164     1          Ist_IBF->Wandstaerke_Null    = Ist_Inter.Vorform.sm; //Wa
     +            ndstärke aus Carwin  
  165     1          Ist_IBF->Werkzeugdurchmesser = diam_dw;  
  166     1          Ist_IBF->D_Null              = Ist_Inter.Vorform.da;
     +                                     
  167     1       
  168     1       #if(MRAW)
  169     1          Ist_IBF->FA_f       = 0.1F;
  170     1          Ist_IBF->FR_f       = 0.1F;  // im Interfac gefiltert
  171     1          Ist_IBF->s_f        = 0.1F;
  172     1          
  173     1       #else 
  174     1          Ist_IBF->FA_f       = 1.0F; //Aus_Puff.fa_mf; 
  175     1          Ist_IBF->FR_f       = 1.0F; //Aus_Puff.fr_mf;
  176     1          Ist_IBF->s_f        = 1.0F; //Aus_Puff.s1r;
  177     1       
  178     1       #endif
  179     1       //----------------------------------------------------------
     +            -----------------
  180     1       // Beginn AXPRO.H
  181     1       //----------------------------------------------------------
     +            -----------------
  182     1         
  183     1          
  184     1          //-------------------------------------------------------
     +            ----------------------------------
  185     1          //-----------------------Definition für Kraftregler/Filte
     +            rwerte u.ä.-----------------------
  186     1          //-------------------------------------------------------
     +            ----------------------------------
  187     1          
  188     1          
  189     1          float s_f_alt = 0.0F; // 	gefilterte Wanddicke zum Zeit
     +            punkt t-1 für Positionierung der oberen Kegelwalze
  190     1                     
  191     1          float uk = 0;              //Wert für Radialkraft
  192     1          float uk1 = 0;
  193     1          float KP = 0.00191F;        //Radialkraft Prop
  194     1          
  195     1          	
  196     1          float uk_ASO = 0;   			//Hilfsvariab
     +            le für Axialkraftregelung   MIC 040416
  197     1          float uk1_ASO = 0;          //Hilfsvariable für Axialkraf
     +            tregelung  MIC 040416
  198     1          
  199     1          

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 7

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V100\RWTH_SMP.bd\source\rpw.cpp

Line  Level
  200     1          // Filter für Ringdurchmesser     
  201     1          float	 diam_f = 0;			// gefilterte
     +            r Ringdurchmesser 
  202     1          float	 diam_f_alt = 0;	// letzter Wert Ringd
     +            urchmesser für Filter 
  203     1          
  204     1          
  205     1          
  206     1          float RS_Koll = 1.0F;      // Sicherheitsabstand RS-HW
     +             (1 mm)
  207     1          float AG_Koll =  5.0F;     // Sicherheitsabstand AS-RS
     +              (5 mm)
  208     1       
     +                   
  209     1          float eps = 0.1F;          // Positioniergenauigkeit mich
     +            l:-> war 0.1F
  210     1          
  211     1          float t_Halte = 50;        // Haltezeit in Vielfachen von
     +             100ms               
  212     1          float t_warte = 0;         // Wartezeit in Vielfaches von
     +             100ms   
  213     1          float t_warte_flag = 0;    // WarteFlag, damit t_warte be
     +            i der ersten Initialisierung gesetzt wird
  214     1                             
  215     1          //-------------------------------------------------------
     +            ---------------------------------------
  216     1          //--------------------------Variablen aus IBFPARA3.c-----
     +            ---------------------------------------
  217     1          //-------------------------------------------------------
     +            ---------------------------------------
  218     1          float Axialkraft;
  219     1          float Radialkraft;
  220     1          //-------------------------------------------------------
     +            ----------------------------------------
  221     1          //------------------------------sonstige Hilfsvariablen--
     +            ----------------------------------------
  222     1          //-------------------------------------------------------
     +            ---------------------------------------- 
  223     1          
  224     1          float Afpos_dw = 0.0F; // änderung der VAriablen "Anfahrp
     +            osition_Dorn;" auf 8 Zeichen 	// Variable für Dornposition,
     +             nachdem dieser Positioniert woren ist   
  225     1          
  226     1          
  227     1              
  228     1           
  229     1          //-------------------------------------------------------
     +            ----------------------------------------- 
  230     1          float zaehler=0.01F;   
  231     1          float n = 0.0f;    
  232     1          float s_ist =0.0f;         
  233     1          
  234     1          //-------------------------------------------------------
     +            ----------------------------------------
  235     1          //------------------------- Variablen für die diskontinui

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 8

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V100\RWTH_SMP.bd\source\rpw.cpp

Line  Level
     +            erliche Funktion -----------------------
  236     1          //-------------------------------------------------------
     +            ----------------------------------------
  237     1          
  238     1          
  239     1          float t_dis_h = 0; // Haltezeit für 1.5 Umdrehungen, bei
     +            denen der Dorn stehen bleiben soll (Diskontinuierliche Abwal
     +            zung)
  240     1          
  241     1          float delta_h = 0.0F;
  242     1       
  243     1       //----------------------------------------------------------
     +            -----------------
  244     1       // Ende AXPRO.H
  245     1       //----------------------------------------------------------
     +            -----------------
  246     1       
  247     1          // Ring: Höhe und Wanddicke; Außendurchmesser 'diam' exte
     +            rn von interfac
  248     1          float h_a1;             // Ringhöhe nach Axialwalzspalt b
     +            zw. Entfernung Kr-K
  249     1          float s_r1;             // Wanddicke nach Radialwalzspalt
     +             bzw. Entfernung DW-HW
  250     1          float diam;             // Ringdurchmesser
  251     1       
  252     1          float Ta  = 0.1F;       // Filter 
  253     1          float Kpf = 1;
  254     1          float T1f = 1;     
  255     1       
  256     1          
  257     1          float Del_ASO_Pos;      // KORREKTUR ASO für axiale Walzk
     +            raftregelung MIC 040406
  258     1       
  259     1          float f_H;              // Drehfrequenz der HW in 1/s (_n
     +            icht_ 1/min!)
  260     1          
  261     1          float t_U;              // Zeit für eine Ringumdrehung
     +            
  262     1       
  263     1          int RS_HW = 1;    // Kollisionsgefahr RS-HW
  264     1          int RS_AG = 1;    // Kollisionsgefahr RS_AG
  265     1          int AG_RS = 1;    // Kollisionsgefahr AG-RS
  266     1          int AS_AS = 1;    // Kollisionsgefahr oKrw-uKw 
  267     1       
  268     1          // Pi 
  269     1          #ifndef  PI
  270     1          #define  PI 3.14159265
  271     1          #endif 
  272     1       
  273     1          /* Daten von Oberflaeche an Task */
     +            
  274     1          struct Def_Steuerbyte Steuerbyte_Lese; // far Steuerbyte_
     +            Lese; 
  275     1       
  276     1       //++++++++++ Zyklische Initialisierung und Aktualisierung de

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 9

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V100\RWTH_SMP.bd\source\rpw.cpp

Line  Level
     +            r Messgrößen ++++++++++
  277     1       
  278     1          // schritt_nr = Soll_Inter->schritt_nr;	// lese aktue
     +            llen Programmstatus (Koppers) 
  279     1          
  280     1          // aktuelle Positionen im Walzwerk auslesen und berechnen
     +            :
  281     1          Ist_IBF->RS_Pos   = Ist_Inter.rs_pos  - offset_rs;      /
     +            / aktuelle Dornposition
  282     1          Ist_IBF->AG_Pos   = Ist_Inter.ag_pos  - offset_agr;     /
     +            / aktuelle Axialgerüstposition
  283     1          Ist_IBF->ASO_Pos  = Ist_Inter.aso_pos - offset_aso;     /
     +            / aktuelle Axialschlittenposition oben
  284     1       #ifdef MRAW
  285     1          Ist_IBF->ASU_Pos  = Ist_Inter.asu_pos - offset_asu;     /
     +            / aktuelle Axialschlittenposition unten
  286     1       #endif
  287     1          Ist_IBF->TR_Pos   = Ist_Inter.tr_pos  - offset_tr;      /
     +            / aktuelle Tastrollenposition
  288     1          Ist_IBF->FR       = Ist_Inter.rs_f;                     /
     +            / aktuelle rad. Walzkraft     
  289     1          Ist_IBF->FA       = Ist_Inter.as_f;                     /
     +            / aktuelle axiale Walzkraft    
  290     1          
  291     1          // Sollgeschwindigkeiten im Walzwerk (alle 0 wg. aut init
     +             startpos):
  292     1          Soll_IBF->Soll_RS_V = Soll_IBF->Soll_ASO_V = Soll_IBF->So
     +            ll_AG_V = 1.0F;      //  !!!
  293     1          
  294     1          Soll_Inter->rs_v  = Soll_IBF->Soll_RS_V;
  295     1          Soll_Inter->ag_v  = Soll_IBF->Soll_AG_V;
  296     1          Soll_Inter->aso_v = Soll_IBF->Soll_ASO_V;
  297     1          
  298     1          // aktuelle Ringgeometrie
  299     1          h_a1 = Ist_IBF->ASO_Pos;                               //
     +             Ringhöhe
  300     1          s_r1 = Ist_IBF->RS_Pos - ((diam_hw + diam_dw) / 2.0F); //
     +             Wanddicke; Problem wegen Breitung!?!?
  301     1          diam = Ist_IBF->TR_Pos + Ist_IBF->AG_Pos - (diam_hw / 2.0
     +            F);   // momentaner Ringdurchmesser
  302     1                                
  303     1          // Filter für Ringdurchmesser, Bö, 020528
  304     1          diam_f     = (Kpf * diam + ((T1f / Ta) * diam_f_alt)) / (
     +            (T1f / Ta) + 1);
  305     1          diam_f_alt = diam_f;         
  306     1                    
  307     1          // Sonstige Größen, Hilfsgrößen etc.
  308     1          f_H = Ist_Inter.hw_n/(hw_ir*60.0F);
  309     1          
  310     1          t_U = diam_f/(diam_hw*f_H); // Zeit für eine Ringumdrehun
     +            g gemessen in s
  311     1       
  312     1       //----------------------------------------------------------
     +            -----------------------------------------
  313     1       //------------------ Übergabe der Zahlenwerte aus IBFPARA-Fe

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 10

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V100\RWTH_SMP.bd\source\rpw.cpp

Line  Level
     +            nster -----------------------------------
  314     1       //----------------------------------------------------------
     +            -----------------------------------------
  315     1         
  316     1          Axialkraft                    = 0.0F;   // Keine Vorgabe
     +            der Sollkraft  = zahl10;   //*!!!* 
  317     1          Radialkraft                   = 0.0F;   // Keine Vorgabe
     +            der Sollkraft  = zahl11;   //*!!!* 
  318     1          Ist_IBF->Del_Kr_AGR           = 1.0F;
  319     1          Ist_IBF->Pos_auf_Mantel       = 1.0F;   // 	
  320     2          
  321     2       //----------------------------------------------------------
     +            ------------------------------------------	
  322     2       
  323     2       
  324     2       //++++++++++ Ende Initialisierung ++++++++++
  325     2       
  326     2       //########## Hand- bzw. Automatiksteuerung ausgehend von Kop
     +            pers Position bei Walzenstart ##########
  327     2       
  328     2          // Geschwindigkeiten sind in axpro.h vorbelegt
  329     2          // Startposition für jeweilige Ringgeometrie in axpro.h e
     +            intragen?
  330     2       
  331     2          if (! Ist_IBF->AUTO)		// AUTO = 0 heißt man
     +            uelle Steuerung
  332     2          {
  333     3       #ifdef MRAW
  334     3       
  335     3             if (Ist_IBF->StartPos == 1)
  336     3             {
  337     3                // Bei manuell braucht keine Startposition eingenom
     +            men werden !?!
  338     3                // Sollposition auf Istposition zu Beginn:
  339     3                Soll_IBF->Soll_RS_Pos  = Ist_IBF->RS_Pos;
  340     3                Soll_IBF->Soll_ASO_Pos = Ist_IBF->ASO_Pos;
  341     3                Soll_IBF->Soll_AG_Pos  = Ist_IBF->AG_Pos;
  342     3                
  343     3                // Sollgeschwindigkeiten im Walzwerk:
  344     3                Soll_IBF->Soll_RS_V = 100000.0F;
  345     3                Soll_IBF->Soll_ASO_V = 1.0F;
  346     3                Soll_IBF->Soll_AG_V = 1.0F;
  347     3                
  348     3                Soll_Inter->rs_v = Soll_IBF->Soll_RS_V;
  349     3                Soll_Inter->ag_v = Soll_IBF->Soll_AG_V;
  350     3                Soll_Inter->aso_v = Soll_IBF->Soll_ASO_V;
  351     3                
  352     3                Ist_IBF->StartPos = 0;
  353     3             };
     +                   
  354     3             
  355     3             _settextposition(6,1);
  356     3             printf("Manuelle Steuerung: Beenden mit klein 'l': ");
     +              
  357     3             printf("TEST fuer Pause die Taste 'p' druecken");

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 11

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V100\RWTH_SMP.bd\source\rpw.cpp

Line  Level
  358     3       
  359     3             if (kbhit()) Ist_IBF->ManAuswahl = getch();
  360     3       
  361     3             switch (Ist_IBF->ManAuswahl)
  362     3             {
  363     3       
  364     3                case 't': Soll_IBF->Soll_RS_Pos = Soll_IBF->Soll_RS
     +            _Pos - 0.2F;	break;	// Radialschlitten
  365     3                //case 'w': Soll_RS_Pos = Soll_RS_Pos - 0.1F;	break
     +            ;
  366     3                case 'z': Soll_IBF->Soll_RS_Pos = Ist_IBF->RS_Pos;
     +            break;
  367     3                //case 'r': Soll_RS_Pos = Soll_RS_Pos + 0.1F;	break
     +            ;
  368     3                case 'u': Soll_IBF->Soll_RS_Pos = Soll_IBF->Soll_RS
     +            _Pos + 0.2F; 	break;
  369     3                
  370     3                case 'd': Soll_IBF->Soll_AG_Pos = Soll_IBF->Soll_AG
     +            _Pos - 0.2F;	break;	//	Axialgerüst
  371     3                //case 's': Soll_AG_Pos = Soll_AG_Pos - 0.1F;	break
     +            ;
  372     3                case 'f': Soll_IBF->Soll_AG_Pos = Ist_IBF->AG_Pos;
     +            break;
  373     3                //case 'f': Soll_AG_Pos = Soll_AG_Pos + 0.1F;	break
     +            ;
  374     3                case 'g': Soll_IBF->Soll_AG_Pos = Soll_IBF->Soll_AG
     +            _Pos + 0.2F;	break;
  375     3                
  376     3                case 'y': Soll_IBF->Soll_ASO_Pos = Soll_IBF->Soll_A
     +            SO_Pos - 0.2F;	break;	//	Axialschlitten
  377     3                //case 'x': Soll_AS_Pos = Soll_AS_Pos - 0.1F;	break
     +            ;
  378     3                case 'x': Soll_IBF->Soll_ASO_Pos = Ist_IBF->ASO_Pos
     +            ; break;
  379     3                //case 'v': Soll_AS_Pos = Soll_AS_Pos + 0.1F;	break
     +            ;
  380     3                case 'c': Soll_IBF->Soll_ASO_Pos = Soll_IBF->Soll_A
     +            SO_Pos + 0.2F;	break;
  381     3                
  382     3                default: break;
  383     3              }  // Klammer zu: switch (ManAuswahl) 
  384     3       #endif         
  385     3          } // Klammer zu: if !AUTO then
  386     3       
  387     3          else  // von if !AUTO
  388     3          {     // automatische Steuerung:
  389     5       
  390     5                // Da Messwerte von Anlage und Mess-Schieber differ
     +            ieren (...), vor Beginn 
  391     5                // des Profilierens Aussenkontur (radial/axial) des
     +             Ringes von Hand anfahren ??
  392     5                // -> von Hand angefahrene Positionen beschreiben d
     +            en Ausgangszustand ??
  393     5       
  394     5             switch (Ist_IBF->Profilflag)      // IBF_Allgemein.IBF

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 12

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V100\RWTH_SMP.bd\source\rpw.cpp

Line  Level
     +            _Allgemein.Profilflag in axpro.h definiert, bei Step 6 in in
     +            terfac auf -1 gesetzt! 
  395     5             {
  396     5             
  397     5             case -1:    // ---------------------------------------
     +            -----------
  398     5                         //----- Startpositionen lesen, Sollwertvor
     +            gabe ------
  399     5                         //----------------------------------------
     +            -----------						
  400     5                         //   Memoryflag=IBF_Allgemein.IBF_Allgemei
     +            n.Profilflag;   //für Pausenfunktion
  401     5       
  402     5                         // Geschwindigkeiten initialisieren
  403     5                         Soll_IBF->Soll_RS_V  = 0.0F;
  404     5                         Soll_IBF->Soll_ASO_V = 0.0F; 
  405     5                         Soll_IBF->Soll_ASU_V = 0.0F;
  406     5                         Soll_IBF->Soll_AG_V  = 0.0F;
  407     5                         Soll_IBF->Soll_ZAL_V = 0.0F;
  408     5                         Soll_IBF->Soll_ZAR_V = 0.0F;
  409     5                                       
  410     5                         Soll_Inter->rs_v     = Soll_IBF->Soll_RS_V
     +            ;
  411     5                         Soll_Inter->aso_v    = Soll_IBF->Soll_ASO_
     +            V;
  412     5                         Soll_Inter->asu_v    = Soll_IBF->Soll_ASU_
     +            V;
  413     5                         Soll_Inter->ag_v     = Soll_IBF->Soll_AG_V
     +            ;       
  414     5                         Soll_Inter->zal_v    = Soll_IBF->Soll_ZAL_
     +            V;       
  415     5                         Soll_Inter->zar_v    = Soll_IBF->Soll_ZAR_
     +            V;
  416     5                         
  417     5                         Soll_Inter->kwo_n    = kw_ia/hw_ir * (diam
     +            _hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AGR + Ist_IBF->
     +            Pos_auf_Mantel)*sin_kw_winkel_halbe);
  418     5                         Soll_Inter->kwu_n    = kw_ia/hw_ir * (diam
     +            _hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AGR + Ist_IBF->
     +            Pos_auf_Mantel)*sin_kw_winkel_halbe);
     +            	
  419     5                         
  420     5                         Soll_IBF->RS_Pos_Start = Ist_IBF->RS_Pos;
     +                  // wird in case '3' -> hier Auffahren benötigt
  421     5                         
  422     5                         Soll_IBF->Soll_AG_Pos  = Soll_IBF->AG_Pos_
     +            Start = Ist_IBF->AG_Pos; // AG_Pos == auslesen der Werte aus
     +             PA-Karte inkl. Offset
     +            
  423     5                         
  424     5                         
  425     5                         //----------------------------------------
     +            -----------------------------------------
  426     5                         //------------Vorgabe für Startposition de
     +            s Radialschlitten------------------------

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 13

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V100\RWTH_SMP.bd\source\rpw.cpp

Line  Level
  427     5                         //----------------------------------------
     +            -----------------------------------------
  428     5                         
  429     5                         
  430     5                         Soll_IBF->RS_Pos_Null = (diam_hw + Ist_IBF
     +            ->Werkzeugdurchmesser)/2 + Ist_IBF->Wandstaerke_Null;  // Nu
     +            llpunkt des Radialschlittens als Abstand zwischen Hauptwalze
     +            durchmesser, Wandstärke und Dornwalzendurchmesser 
  431     5                         
  432     5                         
  433     5                         
  434     5                         //----------------------------------------
     +            -----------------------------------------
  435     5                         //------------Vorgabe für Startposition de
     +            r Axialschlitten ------------------------
  436     5                         //----------------------------------------
     +            -----------------------------------------
  437     5                         
  438     5                         Soll_IBF->AG_Pos_Null = Ist_IBF->AG_Pos; 
  439     5                         
  440     5       
     +              
  441     5                         //----------------------------------------
     +            ----------------------------------------
  442     5                         //------------Vorgaben für oberen Axialsch
     +            litten----------------------------------
  443     5                         //----------------------------------------
     +            ----------------------------------------
  444     5                         
  445     5                         
  446     5                         Soll_IBF->ASO_Pos_Null = Ist_IBF->Start_Ri
     +            nghoehe + 15.0F; 	
  447     5                         Soll_IBF->ASO_Pos_Start = Soll_IBF->ASO_Po
     +            s_Null;						
  448     5                         
  449     5                         #if (FALSE)
  450     5                         _settextposition(28,1);
  451     5                         printf("case -1");
  452     5                         #endif   
  453     5                         
  454     5                         //----------------------------------------
     +            ----------------------------------------
  455     5                         //------------------Kalibrierung der Einga
     +            ngsignale-> hier Radialkraft------------
  456     5                         //----------------------------------------
     +            ----------------------------------------
  457     5                         Soll_Inter->zal_v=0.0F ; // michl: festset
     +            zen der Zentrierarme !!! WENN ALLES FUNTZT, DANN RAUS
  458     5                         Soll_Inter->zar_v=0.0F ; // michl: festset
     +            zen der Zentrierarme  
  459     5                         
  460     5                         
  461     5                           
  462     5       
  463     5                      t_Halte= 50; //t_Halte = 10*2*diam_f/(diam_hw

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 14

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V100\RWTH_SMP.bd\source\rpw.cpp

Line  Level
     +            *f_H); // Haltezeit entspricht 1 Ringumdrehung, nötig als Kr
     +            iterium bei Kraftanfahrposition 
  464     5                      Soll_IBF->Profilflag = 0;
  465     5                      Soll_IBF->Soll_RS_Pos = Soll_IBF->RS_Pos_Null
     +            ; // definiert für RS_Pos in case 'a'
  466     5                      break; //case -1
  467     5          
  468     5          case 0:     //-------------------------------------------
     +            ---------------------
  469     7                      //----------------Routine für Startposition--
     +            ---------------------
  470     7                      //-------------------------------------------
     +            ---------------------
  471     7                      //Memoryflag=IBF_Allgemein.IBF_Allgemein.Prof
     +            ilflag;						//für
     +             Pausefunktion
  472     7                 
  473     7                      switch (Ist_IBF->InitAchse) 
  474     7                         {
  475     7                         
  476     7                           // Programmexample for IFM 2006
  477     7                           //Spezieller Programmcode zur Verifikati
     +            on einer Dornbewegung
  478     7                           //Ausgangswandicke bei Banning 200 mm so
     +            ll auf Wanddicke 100 mm verfahren
  479     7       
  480     7                           //!!!ACHTUNG!!! in Datei rwth_task.cpp m
     +            uss die Initialisierung wieder geändert werden, wenn richtig
     +             gewalzt werden soll
  481     7       
  482     7                       case 'a1':
  483     7                                    Soll_IBF->Soll_RS_V = 2.0F;
  484     7                                    Soll_IBF->Soll_AG_V  = 0.0F;
  485     7                                    Soll_IBF->Soll_ASO_V = 0.0F; 
  486     7                                    Soll_IBF->Soll_ASU_V = 0.0F;
  487     7                                       
  488     7                                    // test: Werte befinden sich je
     +            tz in den if-Anweisungen Soll_Inter->rs_v = Soll_RS_V;
     +              
  489     7                                    Soll_Inter->rs_v =  Soll_IBF->S
     +            oll_RS_V;
  490     7                                    Soll_Inter->ag_v  = Soll_IBF->S
     +            oll_AG_V;       
  491     7                                    Soll_Inter->aso_v = Soll_IBF->S
     +            oll_ASO_V;
  492     7                                    Soll_Inter->asu_v = Soll_IBF->S
     +            oll_ASU_V;
  493     8                                                              
  494     8                                    //Überprüfen, ob Dornposition e
     +            rreicht ist
  495     8                                   if(Ist_IBF->RS_Pos <= 100) // Ab
     +             hier wird Radialschlitten positionieren
  496     9                                      {
  497     9                                         Soll_IBF->Soll_RS_V = 0.0F
     +            ;

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 15

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V100\RWTH_SMP.bd\source\rpw.cpp

Line  Level
  498     9                                         Soll_IBF->InitAchse = 'b1'
     +            ;
  499     7                                         break;
  500     7                                      }
  501     7                                   break;
  502     7       
  503     7             
  504     7                         case 'b1': 
  505     7                                    Soll_IBF->Soll_RS_V  = 0.0F;
  506     7                                    Soll_IBF->Soll_AG_V  = 0.0F;
  507     7                                    Soll_IBF->Soll_ASO_V = 0.0F; 
  508     7                                    Soll_IBF->Soll_ASU_V = 0.0F;
  509     7                                       
  510     7                                    // test: Werte befinden sich je
     +            tz in den if-Anweisungen Soll_Inter->rs_v = Soll_RS_V;
     +              
  511     7                                    Soll_Inter->rs_v =  Soll_IBF->S
     +            oll_RS_V;
  512     7                                    Soll_Inter->ag_v  = Soll_IBF->S
     +            oll_AG_V;       
  513     7                                    Soll_Inter->aso_v = Soll_IBF->S
     +            oll_ASO_V;
  514     7                                    Soll_Inter->asu_v = Soll_IBF->S
     +            oll_ASU_V;
  515     7                                                          
  516     7                                    Soll_Inter->kwo_n = 0.5F*kw_ia/
     +            hw_ir * (diam_hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AG
     +            R + Ist_IBF->Pos_auf_Mantel)*sin_kw_winkel_halbe);
  517     7                                    Soll_Inter->kwu_n = 0.5F*kw_ia/
     +            hw_ir * (diam_hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AG
     +            R + Ist_IBF->Pos_auf_Mantel)*sin_kw_winkel_halbe);
     +                 			
  518     7                                   
  519     7                                    break;
  520     7       
  521     7       
  522     7       
  523     7                           case 'a':  	
  524     8                                     //_settextposition(9,19); prin
     +            tf("case a");
  525     8                                    if(FALSE)
  526     7                                    {
  527     7                                    #ifdef MRAW
  528     7                                        _settextposition(10,1); pri
     +            ntf("MAPW: RS_Pos %8.1f  Soll_RS_Pos %8.1f RS_Pos_Null%8.1f,
     +             gefilterter %8.1f", Ist_IBF->RS_Pos, Soll_IBF->Soll_RS_Pos,
     +             Ist_IBF->RS_Pos_Null, diam_f);
     +            						
  529     7                                        _settextposition(13,1); pri
     +            ntf("Dorn%8.1f, Hauptwalze%8.1f, t_Halte%8.1f",diam_dw, diam
     +            _hw, t_Halte);
  530     7                                    #endif
  531     7                                    }
  532     7                                 
  533     7                                    Soll_IBF->Soll_AG_V  = 0.0F;

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 16

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V100\RWTH_SMP.bd\source\rpw.cpp

Line  Level
  534     7                                    Soll_IBF->Soll_ASO_V = 5.0F; 
  535     7                                    Soll_IBF->Soll_ASU_V = 0.0F;
  536     7                                       
  537     7                                    // test: Werte befinden sich je
     +            tz in den if-Anweisungen Soll_Inter->rs_v = Soll_RS_V;
     +              
  538     7                                    Soll_Inter->ag_v  = Soll_IBF->S
     +            oll_AG_V;       
  539     7                                    Soll_Inter->aso_v = Soll_IBF->S
     +            oll_ASO_V;
  540     7                                    Soll_Inter->asu_v = Soll_IBF->S
     +            oll_ASU_V;
  541     7                                  
  542     7                                    Soll_Inter->kwo_n = 0.5F*kw_ia/
     +            hw_ir * (diam_hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AG
     +            R + Ist_IBF->Pos_auf_Mantel)*sin_kw_winkel_halbe);
  543     7                                    Soll_Inter->kwu_n = 0.5F*kw_ia/
     +            hw_ir * (diam_hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AG
     +            R + Ist_IBF->Pos_auf_Mantel)*sin_kw_winkel_halbe);
     +                 			
  544     8                                 
  545     8                                     
  546     8                                    //-----------------------------
     +            --------------------------------------------
  547     8                                    //---------Anfahrroutine Dorn p
     +            er Kraftregelung---------------------------- 
  548     8                                    //-----------------------------
     +            --------------------------------------------
  549     8                                   
  550     8                              if(Radialkraft!= 0.0F)	//aus IBF-Par
     +            a(Radv01) vorgegeben               	  
  551     9                               {  	
  552     9                                    
  553     9                                    
  554     9                                       Soll_IBF->Soll_RS_V  = 7.0F;
     +                        // Dorn, Radialschlitten
  555     9                                       Soll_Inter->rs_v = Soll_IBF-
     +            >Soll_RS_V; // Übergebe Gechwindigkeit an Tabelle.....
  556     9                                     
  557     9                                       Soll_IBF->Soll_ASO_Pos = Ist
     +            _IBF->Start_Ringhoehe + 1.5F; //da Ring gerne klettert, wird
     +             bereits hier ASO zugestellt
  558    10       
     +            				
  559    10                                       if (Ist_IBF->RS_Pos <= (Ist_
     +            IBF->RS_Pos_Null + eps) && t_Halte >= 30)
  560    11                                        { 
  561    11                                          Soll_IBF->Soll_RS_Pos = I
     +            st_IBF->RS_Pos_Null - n;
  562     9                                           n= n + 0.01F;
  563    10                                        }
  564    10                                     //----------------------------
     +            -----------------------------------------------------
  565    10                                     //   Routine um Radialschlitte
     +            n auf Kraft anzufahren      

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 17

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V100\RWTH_SMP.bd\source\rpw.cpp

Line  Level
  566    10                                     //----------------------------
     +            -----------------------------------------------------
  567    10                                             
  568    10                                      if ((Ist_IBF->FR_f >= Radialk
     +            raft) && (Ist_IBF->RS_Pos <= Ist_IBF->RS_Pos_Null)) 
  569    11                                      { 
  570    11                                            t_Halte--;
  571    12                                            if (t_Halte == 0)
  572    13                                            {
  573    13                                              Soll_IBF->Soll_RS_Pos
     +             = Ist_IBF->RS_Pos; // erreicht
  574    13                                              Soll_IBF->Soll_RS_V=
     +            2.0F;
  575    13                               
  576    13                                              Soll_Inter->rs_v = So
     +            ll_IBF->Soll_RS_V;
  577    13                                              Soll_IBF->InitAchse =
     +             'b';
  578    13                                              zaehler=0.5F;
  579    12                                              t_Halte=100.0F;   //z
     +            aehler für Kraftanfahrt des Axialschlittens
  580    10                                            } 
  581    10                                            else   break;
  582     7                                              
  583     7                                      } // end if(FR_f >=...)
  584     7                                      
  585     7                                      else   break;
     +            //else Soll_RS_Pos = RS_Pos_Null + 0.2F - zaehler; break;
  586     8                                       
  587     8                                 }//end if(Radialkraft != NULL)
  588     8                                             
  589     8                                                
  590     8                                if(Radialkraft == 0.0F)	
  591     9                                  { 		
  592     9                                        
  593     9                                         Soll_IBF->Soll_RS_V  = 8.0
     +            F;            // Dorn, Radialschlitten
  594     9                                         Soll_Inter->rs_v = Soll_IB
     +            F->Soll_RS_V; //Übergebe Geschwindigkeit an Tabelle..
  595     9                   
  596     9                                         Soll_IBF->Soll_RS_Pos = So
     +            ll_IBF->RS_Pos_Null;
  597     9                                         Soll_IBF->Soll_AG_Pos = Is
     +            t_IBF->Start_Ringhoehe + 1.5F; //da Ring gerne klettert, wir
     +            d bereits hier ASO zugestellt..
  598    10        
  599    10                                      if(Ist_IBF->RS_Pos <= Soll_IB
     +            F->Soll_RS_Pos) // Ab hier wird Radialschlitten positioniere
     +            n
  600    11                                      {
  601    11                                         Soll_IBF->InitAchse = 'b';
     +            
  602    11                                         zaehler = 0.5F;
     +                 //zaehler für Kraftsteuerung des Axialschlitten
  603     9                                         break;

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 18

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V100\RWTH_SMP.bd\source\rpw.cpp

Line  Level
  604     7                                      }
  605     7       
  606     7                                   
  607     7       
  608     7                                  break;   
  609     7                                 }// end if(Radial== NULL)  
  610     7                             
  611     7                               break; // zu case 'a'
  612     7       
  613     7           
  614     7                         case 'z':   // 2 Umdrehungen abwarten für
     +            gleichmäßiges Profil über Umfang 
  615     7                                     t_Halte--;
  616     7                                     if (t_Halte <= 0) {Soll_IBF->I
     +            nitAchse = 'b';};
  617     7                                     break;  // zu case 'z'
  618     7                         
  619     7                         case 'b':
     +            	
  620     7                                     Soll_Inter->kwo_n =0.5F* kw_ia
     +            /hw_ir * (diam_hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_A
     +            GR + Ist_IBF->Pos_auf_Mantel)*sin_kw_winkel_halbe);
  621     7                                     Soll_Inter->kwu_n =0.5F* kw_ia
     +            /hw_ir * (diam_hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_A
     +            GR + Ist_IBF->Pos_auf_Mantel)*sin_kw_winkel_halbe);
     +                  			
  622     7                                     
  623     7                                     Soll_IBF->Soll_ASO_V = 5.0F;
  624     7                                     Soll_IBF->Soll_ASU_V = 0.0F;
     +             
  625     7                                     Soll_IBF->Soll_RS_V  = 0.0F;
     +                 
  626     7                                     Soll_IBF->Soll_AG_V  = 10.0F;
  627     7                                     
  628     7                                     Soll_Inter->rs_v  = Soll_IBF->
     +            Soll_RS_V;        
  629     7                                     Soll_Inter->ag_v  = Soll_IBF->
     +            Soll_AG_V;       
  630     7                                     Soll_Inter->aso_v = Soll_IBF->
     +            Soll_ASO_V;
  631     7                                     Soll_Inter->asu_v = Soll_IBF->
     +            Soll_ASU_V;
  632     7                                      
  633     7                                     n=0.1f;
  634     7                                     Soll_IBF->Soll_AG_Pos = Ist_IB
     +            F->D_Null + diam_hw/2 - Ist_IBF->Pos_auf_Mantel - Ist_IBF->D
     +            el_Kr_AGR ;     // 10 steht für die Variable Pos_auf_Mantel
  635     7                                     Soll_IBF->InitAchse ='c';
  636     7                                     
  637     7                                     break; // zu case 'b'
  638     7       
  639     7                         case 'c':   Soll_IBF->Soll_AG_V  = 10.0F;
     +            							// Ax
     +            ialgerüst 
  640     7                                     Soll_IBF->Soll_RS_V  = 0.0F;

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 19

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V100\RWTH_SMP.bd\source\rpw.cpp

Line  Level
  641     7                                     Soll_IBF->Soll_ASO_V = 5.0F; 
  642     7                                     Soll_IBF->Soll_ASU_V = 0.0F;
  643     7       
  644     7                                     Soll_Inter->rs_v  = Soll_IBF->
     +            Soll_RS_V;        
  645     7                                     Soll_Inter->ag_v  = Soll_IBF->
     +            Soll_AG_V;   
  646     7                                     
  647     7                                     Soll_Inter->aso_v = Soll_IBF->
     +            Soll_ASO_V;     
  648     7                                     Soll_Inter->asu_v = Soll_IBF->
     +            Soll_ASU_V;
  649     7                                     t_Halte=500; // 200 ms = 2 sec
     +             abwarten
  650     8                                     
  651     8                                     if (Soll_IBF->Soll_AG_Pos < (I
     +            st_IBF->AG_Pos_Start))
  652     9                                     {
  653    10                                        if (Ist_IBF->AG_Pos <= (Sol
     +            l_IBF->Soll_AG_Pos + eps)) 
  654    11                                        {
  655    11                                           Soll_IBF->InitAchse = 'd
     +            ';
  656    10                                           break;
  657     8                                        }
  658     8                                        else 
  659     8                                        {
  660     9                                           #ifdef MRAW
  661     9                                              _settextposition(9,1)
     +            ;
  662     9                                              printf(" AG_Pos mit P
     +            LUS eps ");
  663     9                                           #endif
  664     9                                        }//end if
  665     9                                     }//end if
  666     9                                     else
     +                                 
  667     9                                     {
  668    10                                        if (Ist_IBF->AG_Pos >= (Sol
     +            l_IBF->Soll_AG_Pos - eps)) 
  669    11                                        {
  670    11                                           Soll_IBF->InitAchse = 'd
     +            ';
  671    10                                           break;
  672     7                                        }
  673     7                                        else 
  674     7                                        {
  675     7                                           #ifdef MRAW   
  676     7                                              _settextposition(9,1)
     +            ;
  677     7                                              printf(" AG_Pos mit M
     +            INUS eps");
  678     7                                           #endif
  679     7                                        }
  680     7                                     }//end else

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 20

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V100\RWTH_SMP.bd\source\rpw.cpp

Line  Level
  681     7       
  682     7                                     Soll_IBF->InitAchse = 'd'; //
     +            AG wird nicht positioniert darum rein   
  683     7                                     break; // zu case 'c'
  684     7                         
  685     7                         case 'd':   //Hier die Position des oberen
     +             Axialschlittens programmieren....
  686     7                                     
  687     7                                     Soll_IBF->Soll_ASO_V = 5.0F;
     +             
  688     7                                     Soll_IBF->Soll_ASU_V = 1.0F;
  689     7                                     Soll_IBF->Soll_RS_V  = 0.0F;
  690     7                                     Soll_IBF->Soll_AG_V  = 0.0F; 
  691     7       
  692     7                                     Soll_Inter->rs_v  = Soll_IBF->
     +            Soll_RS_V;       
  693     7                                     Soll_Inter->ag_v  = Soll_IBF->
     +            Soll_AG_V;       
  694     7                                     Soll_Inter->aso_v = Soll_IBF->
     +            Soll_ASO_V;     
  695     7                                     Soll_Inter->asu_v = Soll_IBF->
     +            Soll_ASU_V;     
  696     7                                     
  697     7                                     Soll_IBF->Soll_ASU_Pos = 0.0F;
     +             
  698     7                                                          
  699     7                                     Afpos_dw = Ist_IBF->RS_Pos;
     +              // Variable in der aktuelle Dornposition definiert ist nac
     +            hdem Dorn positioniert worden ist
  700     8                                     //    t_warte=10*diam_f/(diam_
     +            hw*f_H); // Hier t_warte definiert-> wird in case 1 benötigt
     +            
  701     8                                     //----------------------------
     +            ----------------------------------------------------------
  702     8                                     //----------------Anfahren des
     +             Axialschlittens auf Kraft--------------------------------
  703     8                                     //----------------------------
     +            ---------------------------------------------------------- 
  704     8                                     if(Axialkraft != 0.0F)  //wird
     +             nur durchlaufen, wenn Kraft angegeben
  705     9                                     {
  706     9                                        #ifdef MRAW
  707     9                                           _settextposition(2,10);
  708     9                                           printf("ASO anhand Kraft
     +            ");
  709     9                                        #endif
  710     9                                        Soll_IBF->Soll_ASO_Pos = Is
     +            t_IBF->Start_Ringhoehe - 10.0F;    //!!statt Zaehler wurde a
     +            ls Wert 10 (mm) eingesetzt;;;zaehler wurde in case'a' auf de
     +            n Wert 0.5F gesetzt
  711    10                                        
  712    10                                        if (Ist_IBF->FA_f >= Axialk
     +            raft  || Ist_IBF->FA_f == Axialkraft /*|| t_Halte == 0*/) //
     +            JETZT MIT TEST TEST TEST....wirkende Axialkraft1 ist gemitte
     +            lte AG-Kraft durch Eigengewicht !!

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 21

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V100\RWTH_SMP.bd\source\rpw.cpp

Line  Level
  713    11                                        {
  714    11                                           #ifdef MRAW
  715    11                                       	      _settextpositio
     +            n(2,10);
  716    11                                              printf("ASO hat Posit
     +            ion durch Kraft erreicht FA: %8.1f-eingabe-: %8.1f", Ist_IBF
     +            ->FA, Axialkraft);
  717    11                                           #endif
  718    11                                           Soll_IBF->Soll_ASO_Pos =
     +             Ist_IBF->ASO_Pos;
  719    11                                     
  720    11                                           Soll_IBF->Soll_ASO_V   =
     +             1.0F;
  721    11                                           Soll_Inter->aso_v      =
     +             Soll_IBF->Soll_ASO_V;
  722    11                                           Soll_IBF->InitAchse    =
     +             ' ';
  723     7                                           Soll_IBF->Profilflag   =
     +             1; 
  724     8                                        }// end if(uk >=0)
  725     8                                     
  726     8                                     }//end if(Axialkraft!=NULL) 
  727     8                                     
  728     8                                     
  729     8                                     if(Axialkraft == NULL) //wird
     +            durchlaufen, wenn ohne Kraftsteuerung angefahren wird
  730     9                                     { 
  731     9                                        Soll_IBF->Soll_ASO_Pos = Is
     +            t_IBF->Start_Ringhoehe;
  732    10                                        if (Ist_IBF->ASO_Pos <= (So
     +            ll_IBF->Soll_ASO_Pos + eps) || Ist_IBF->ASO_Pos <= (Soll_IBF
     +            ->Soll_ASO_Pos - eps) ) 
  733     7                                        {Soll_IBF->InitAchse = ' ';
     +             Soll_IBF->Profilflag = 1; break;} // Hier IBF_Allgemein.IBF
     +            _Allgemein.IBF_Allgemein.Profilflag bestimmen wie es weiter
     +            geht 
  734     7                                     }
  735     7       
     +            		
  736     7                                     break;//break
  737     7                                                       
  738     7                         default:    
  739     5                                     #ifdef MRAW
  740     5                                        _settextposition(9,1);
  741     5                                        printf(" InitAchse: %d - Wa
     +            rum default ?!? ", Ist_IBF->InitAchse);
  742     5                                     #endif   
  743     5                                     break;
  744     5                                     
  745     5                         } //	Klammer zu: switch (InitAchse) von ca
     +            se0 
  746     5                         break;
  747     5          
  748     5          
  749     5                case 1:     //Vergleich der eingegebenen Wandstärke

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 22

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V100\RWTH_SMP.bd\source\rpw.cpp

Line  Level
     +             und der, per Kraftsteuerung angefahrenen Wandstärke
  750     5                            // Routine, ob Schalter gesetzt ist ode
     +            r nicht -> Schalter (0,1,2)
  751     5                            
  752     5                            s_ist = Afpos_dw - ((186.9F + Ist_IBF->
     +            Werkzeugdurchmesser)/2.0F);
  753     5                            Soll_IBF->Soll_ASO_Pos_alt = Ist_IBF->A
     +            SO_Pos;     
  754     5                            s_f_alt = Ist_IBF->s_f; // dem Wert s_f
     +            _alt wird hier bereits der erste Wert vorgegeben, damit in c
     +            ase 11/12 keine Division durch NULL stattfindet.... 
  755     6                            #ifdef MRAW
  756     6                               _settextposition(6,10);
  757     6                               printf("s_ist %8.1f  s_gemessen %8.1
     +            f", s_ist, Ist_IBF->Wandstaerke_Null);
  758     6                            #endif
  759     6                            
  760     6                            if(Ist_IBF->Schalter_Kont_DisKo == 0)
     +            // kontinuierlicher Vorschub
  761     5                            {Soll_IBF->Profilflag = 11; s_ist = 0;
     +            break;}
  762     6                            
  763     6                            if (Ist_IBF->Schalter_Kont_DisKo == 1)
     +            //diskontinuierlicher Vorschub (eps über Weg)
  764     5                            {Soll_IBF->Profilflag = 12; Soll_IBF->S
     +            oll_RS_Pos = Ist_IBF->RS_Pos - 0.5f; break;}
  765     6                            
  766     6                            if (Ist_IBF->Schalter_Kont_DisKo == 2)
     +            //diskontinuierlicher Vorschub (eps über Geschwindigkeit)
  767     7                            {
  768     7                               Soll_IBF->Profilflag =13; 
  769     7                               t_dis_h = 10*(Ist_IBF->D_Null/(diam_
     +            hw*f_H)); //Zeit für x Umdrehungen bei denen der Dorn in den
     +             Ring vorfährt bis Schnabel-Formel greift
  770     6                               break;
  771     5                            }
  772     5                            
  773     5                            else
  774     5                            {
  775     5                               #ifdef MRAW
  776     5                                  _settextposition(10,15);
  777     5                                  printf("Fehler in Schalterstellun
     +            g");
  778     5                               #endif
  779     5                            }
  780     5                            break;
  781     5                           
  782     5              
  783     5              case 11:      //Kontinuierlcher Walzungsroutine
  784     5                            Soll_Inter->kwo_n = kw_ia/hw_ir * (diam
     +            _hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AGR + Ist_IBF->
     +            Pos_auf_Mantel)*sin_kw_winkel_halbe);
  785     5                            Soll_Inter->kwu_n = kw_ia/hw_ir * (diam
     +            _hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AGR + Ist_IBF->
     +            Pos_auf_Mantel)*sin_kw_winkel_halbe);

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 23

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V100\RWTH_SMP.bd\source\rpw.cpp

Line  Level
     +            	
  786     5                            
  787     5                            Soll_IBF->Soll_RS_V  = Soll_IBF->Vorsch
     +            ubgeschw_Dw;    // Dorn, Radialschlitten   
  788     5                            Soll_IBF->Soll_ASO_V = 100.0F;
  789     5                            Soll_Inter->rs_v = Soll_IBF->Soll_RS_V;
     +                    
  790     5                            Soll_Inter->ag_v = Soll_IBF->Soll_ASO_V
     +            ;
  791     5                            Soll_Inter->aso_pos = 143.0F;
  792     6                            if(Soll_IBF->Steg != 0)   // Abfrage ob
     +             Stegstärke angegeben
  793     7                            {
  794     6                            Soll_IBF->Soll_RS_Pos = (diam_hw + Ist_
     +            IBF->Werkzeugdurchmesser)/2 + Soll_IBF->Steg;
  795     5                           
  796     5                            }
  797     5                            else Soll_IBF->Soll_RS_Pos = Afpos_dw -
     +             Soll_IBF->delta_s;  //Afpos_dw wird in case 0 -> case 'a' g
     +            esetzt.....
  798     5                            
  799     5                            Soll_IBF->Soll_RS_Pos = Ist_IBF->RS_Pos
     +            ;
  800     6                           
  801     6                            if(Ist_IBF->RS_Pos <= Soll_IBF->Soll_RS
     +            _Pos || Ist_IBF->RS_Pos <= (Soll_IBF->Soll_RS_Pos + eps) ||
     +            Ist_IBF->RS_Pos <= (Soll_IBF->Soll_RS_Pos - eps))
  802     7                            {	
  803     7                               t_Halte= Soll_IBF->Umdrehungen*10*(I
     +            st_IBF->D_Null/(diam_hw*f_H));
  804     7                               //t_Halte=Umdrehungen*10*diam_f/(dia
     +            m_hw*f_H); // n Umdrehungen, 10 * "100" ms Aufrufzyklus = 10
     +            00 ms = 1s;  
  805     7                               
  806     7                               Soll_IBF->Profilflag = 2; 
  807     7                               Soll_IBF->Soll_ASO_Pos = Ist_IBF->AS
     +            O_Pos; // damit kein Durck ausgeübt wird wenn Walzprozeß bee
     +            ndet ist muss hier noch eine Konstante eingefügt werden (z.B
     +            . 5)
  808     5                               break;
  809     6                               }                  
  810     6                            
  811     6                            //-------------------------------------
     +            ------------------------------------------------------------
     +            -----
  812     6                           //--------------------------Kraftsteueru
     +            ng des oberen Axialschlittens ------------------------------
     +            ----
  813     6                           //--------------------------------------
     +            ------------------------------------------------------------
     +            ----
  814     6                              
  815     6                           if(Axialkraft != NULL)
  816     7                           {
  817     7                                                

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 24

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V100\RWTH_SMP.bd\source\rpw.cpp

Line  Level
  818     7                             uk1_ASO = uk_ASO;
  819     7                             uk_ASO = (Ist_IBF->FA_f - Axialkraft);
     +                             // gemittelte Axialkraft aus Interfac.
  820     7                             
  821     7                             Del_ASO_Pos = KP*(uk_ASO - uk1_ASO) +
     +            1.0F*uk_ASO;    // PI-Regler nach Böhmer, jedoch mit KP=Böhm
     +            er;KI=1.0F hier noch Einstellen!!!!
  822     5                                                   
  823     5                             Soll_IBF->Soll_ASO_Pos = Ist_IBF->ASO_
     +            Pos;
  824     6                              
  825     6                           }
  826     6                           
  827     6                              
  828     6                               //----------------------------------
     +            ------------------------------------------------------------
     +            --------
  829     6                               //----------------------- Positionss
     +            teuerung des oberen Axialschlittens ------------------------
     +            --------
  830     6                               //----------------------------------
     +            ------------------------------------------------------------
     +            --------
  831     6                               
  832     6                               if(t_dis_h <=0)
  833     7                               {
  834     8                                  
  835     8                                  delta_h = 10*(diam_f*(s_f_alt - I
     +            st_IBF->s_f)-(s_f_alt*s_f_alt) + (Ist_IBF->s_f*Ist_IBF->s_f)
     +            )/(diam_f * s_f_alt - (s_f_alt*s_f_alt)); 
  836     7                                  // Delta_h = 10 mm Werkzeugbreite
     +             *gef.Wanddicke (diam_f)*(Wanddicke[n]^2-Wanddicke[n-1]^2)+W
     +            anddicke[n-1]^2-Wanddike[n]^2/(Klammerausdruck)
  837     7                                  
  838     7                                  Soll_IBF->Soll_ASO_Pos = Soll_IBF
     +            ->Soll_ASO_Pos_alt + delta_h;
  839     7                                  
  840     7                                  Soll_IBF->Soll_ASO_Pos_alt = Soll
     +            _IBF->Soll_ASO_Pos;  
  841     7                                  s_f_alt = Ist_IBF->s_f;   
  842     5                                  t_dis_h = 10*(Ist_IBF->D_Null/(di
     +            am_hw*f_H)); // 1 Umdrehungen (kein Wert vor der 10), 10*100
     +             ms = 1000 ms = 1s
  843     5                               }        
  844     5                               
  845     5                               t_dis_h--;
  846     5                               
  847     5                               break;
  848     5                            
  849     5                            
  850     5               case 2:   //----------------------------------------
     +            -----------------------------------------
  851     5                         //------- 2 Umdrehungen abwarten für gleic
     +            hmäßiges Profil über Umfang -------------
  852     5                         //----------------------------------------

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 25

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V100\RWTH_SMP.bd\source\rpw.cpp

Line  Level
     +            -----------------------------------------
  853     5                         
  854     5                         Soll_Inter->kwo_n = kw_ia/hw_ir * (diam_hw
     +             * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AGR + Ist_IBF->Pos
     +            _auf_Mantel)*sin_kw_winkel_halbe);
  855     5                         Soll_Inter->kwu_n = kw_ia/hw_ir * (diam_hw
     +             * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AGR + Ist_IBF->Pos
     +            _auf_Mantel)*sin_kw_winkel_halbe);
     +            	
  856     5                         
  857     5                         Soll_IBF->Soll_ASO_V = 5.0F;
  858     5                         Soll_Inter->ag_v = Soll_IBF->Soll_ASO_V;
  859     5                                        
  860     5                           
  861     5                         t_Halte--;
  862     5                         t_warte_flag=0; //zurücksetzen der Bedingu
     +            ng (Diskonti...)
  863     6                         
  864     6                                           
  865     6                         if (t_Halte <= 0) 
  866     7                         {  
  867     5                             Soll_IBF->ExitAchse ='a';Soll_IBF->Pro
     +            filflag = 3; break;   //hier befehle reinschreiben, wenn ein
     +             weiterer Schritt abgearbeitet werden soll.....
  868     5                         }
  869     5                         break;             
  870     5                         
  871     5             
  872     5              case 3:    //Memoryflag= Ist_IBF->Profilflag;
  873     7                         // RS und AS auffahren; danach manuell Ent
     +            ladeposition anfahren (Koppers 'e')     
  874     7                         switch (Ist_IBF->ExitAchse) 
  875     7                         {                         
  876     7                         
  877     7                            Steuerbyte_Lese.freigabe = 191;	// wa
     +            r 95
  878     7                            //Freigabe_MRAW_Senden();
  879     7                                        
  880     7                               case 'a': 	
  881     7                                     Soll_IBF->Soll_RS_Pos=Ist_IBF-
     +            >RS_Pos_Start+10.0F; //michl
  882     7                                     Soll_IBF->Soll_RS_V = 5.0F;
  883     7                                     Soll_Inter->rs_v = Soll_IBF->S
     +            oll_RS_V;      
  884     7                                     if (Ist_IBF->RS_Pos >= Soll_IB
     +            F->Soll_RS_Pos) Soll_IBF->ExitAchse = 'b';
  885     7                                     break;
  886     7        
  887     7                               case 'b':
  888     7                          
  889     7                                     Soll_IBF->Soll_AG_Pos = Ist_IB
     +            F->AG_Pos_Null  + 50; 
  890     7                                     Soll_IBF->Soll_ASO_Pos= Ist_IB
     +            F->ASO_Pos_Null + 15; //michl
  891     7                                     

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 26

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V100\RWTH_SMP.bd\source\rpw.cpp

Line  Level
  892     7                                     Soll_IBF->Soll_ASO_V = 15.0F;
     +            
  893     7                                     Soll_Inter->aso_v = Soll_IBF->
     +            Soll_ASO_V;
  894     7                                     
  895     7                                     Soll_IBF->Soll_AG_V = 8.0F;
  896     7                                     Soll_Inter->ag_v = Soll_IBF->S
     +            oll_AG_V;
  897     7       
     +            
  898     7                                     Soll_Inter->zal_v=0.0F ; // mi
     +            chl: festsetzen der Zentrierarme
  899     7                                     Soll_Inter->zar_v=0.0F ; // mi
     +            chl: festsetzen der Zentrierarme    
  900     8                                     if (Ist_IBF->AG_Pos >= Soll_IB
     +            F->Soll_AG_Pos) 
  901     9                                     {
  902     9                                        Soll_IBF->ExitAchse = ' ';
     +            
  903     7                                        Soll_IBF->Profilflag++;
  904     8                                     }
  905     8                                     
  906     8                                     if (     (Ist_IBF->RS_Pos  >=
     +            Soll_IBF->Soll_RS_Pos)
  907     9                                           && (Ist_IBF->ASO_Pos >=
     +            Soll_IBF->Soll_ASO_Pos)
  908     9                                           #ifdef MRAW
  909     9                                              && (Ist_IBF->ASU_Pos
     +            >= Soll_IBF->Soll_ASU_Pos)
  910     9                                           #endif
  911     9                                        )
  912     9                                     {
  913     9                                        Soll_IBF->ExitAchse = ' ';
     +            
  914     9                                        Soll_IBF->Profilflag++;
  915     7                                        break;
  916     7                                     }
  917     7                                     //----------------------------
     +            ------------------------------------------------------------
     +            ------------
  918     7                                     //------------------- Damit di
     +            e Variabelwerte, die während einer vorgehenden Walzung------
     +            ------------
  919     7                                     //--------------------nicht im
     +             Speicher verbleiben, müssen diese zurückgesetzt werden-----
     +            ------------
  920     7                                     //----------------------------
     +            ------------------------------------------------------------
     +            ------------
  921     7                                        
  922     7                                        Ist_IBF->FR_f = 0; Ist_IBF-
     +            >FA_f = 0;
  923     7                                       	zaehler=0;	uk=0;
     +             uk1=0;   uk_ASO=0;
  924     8                                        uk1_ASO=0;	diam_f=0;   d

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 27

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V100\RWTH_SMP.bd\source\rpw.cpp

Line  Level
     +            iam_f_alt=0;     t_Halte = 0;   t_warte = 0;	
  925     7                                        
  926     7                                     break;
     +            
  927     5                                     
  928     5                         default: 	break;
  929     5                         } // Klammer zu: switch(ExitAchse)
     +                      
  930     5                         break;	
  931     5                        
  932     5           case 40:      //Routine die zur Pause gehört
  933     3                         break;
  934     1       
  935     1       /*----------------------------------------------------------
     +            -----------------------*/	
  936     1       /*--------------------------------------ENDE ENDE ENDE -----
     +            -----------------------*/		      
  937     1       /*----------------------------------------------------------
     +            -----------------------*/
  938     1          
  939     1       }; // Klammer zu: switch (IBF_Allgemein.IBF_Allgemein.Profil
     +            flag) 
  940     1              
  941     1       }; // Klammer zu: Ende von if !Auto else 
  942     1        
  943     1       //########## Ende Hand- bzw. Automatiksteuerung ##########
  944     1       
  945     1       
  946     1       /*----------------------------------------------------------
     +            --------------------------*/
  947     1       /*------------------------------- Anfang Kollisionscheck ---
     +            --------------------------*/
  948     1       /*----------------------------------------------------------
     +            --------------------------*/
  949     1       
  950     1             RS_HW = 1;
  951     1             RS_AG = 1;
  952     1             AG_RS = 1;
  953     1             AS_AS = 1;
  954     2             
  955     2             if ((RS_HW != 0) && (RS_AG != 0))
  956     3             {  
  957     2                Soll_Inter->rs_pos = Soll_IBF->Soll_RS_Pos + offset
     +            _rs;
  958     4                #ifdef MRAW
  959     4                   _settextposition(7,1);
  960     4                   printf("                                     ");
     +            
  961     4                #endif
  962     4             }
  963     4             else
  964     4             {  if (RS_HW == 0)
  965     4                {
  966     1                   #ifdef MRAW
  967     1                      _settextposition(7,1);

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 28

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V100\RWTH_SMP.bd\source\rpw.cpp

Line  Level
  968     1                      printf("    KOLLISIONSGEFAHR RS - HW   %i
     +              ", RS_HW);
  969     1                   #endif
  970     1                }
  971     1                else
  972     1                {
  973     2                   #ifdef MRAW
  974     2                      _settextposition(7,1);
  975     2                      printf("    KOLLISIONSGEFAHR RS - AG   %i
     +              ", RS_AG);
  976     2                   #endif
  977     2                }
  978     2             }
  979     2             
  980     2             if (AG_RS != 0)
  981     3             {  
  982     2                Soll_Inter->ag_pos = Soll_IBF->Soll_AG_Pos + offset
     +            _agr;
  983     1                #ifdef MRAW
  984     1                   _settextposition(7,1);
  985     1                   printf("                                     ");
     +            
  986     1                #endif
  987     1             }
  988     1             else
  989     1             {
  990     2                #ifdef MRAW
  991     2                   _settextposition(7,1);
  992     2                   printf("    KOLLISIONSGEFAHR AG - RS   %i      "
     +            , AG_RS);
  993     2                #endif
  994     2             }
  995     2             
  996     2             if (AS_AS != 0)
  997     3             {  
  998     2                Soll_Inter->aso_pos = Soll_IBF->Soll_ASO_Pos + offs
     +            et_aso;
  999     1                #ifdef MRAW
 1000     1                   Soll_Inter->asu_pos = Soll_IBF->Soll_ASU_Pos + o
     +            ffset_asu;  //michl rausgenommen
 1001     1                   _settextposition(7,1);
 1002     1                   printf("                                     ");
     +            
 1003     1                #endif
 1004     1             }
 1005     1             else
 1006     1             {  
 1007                      #ifdef MRAW
 1008                         _settextposition(7,1);
 1009                         printf("    KOLLISIONSGEFAHR oberer AS - AS   %i
     +                  ", AS_AS);
 1010                      #endif
 1011                   }
 1012                   
 1013             // ------------ Ende Kollisionscheck -----------

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 29

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V100\RWTH_SMP.bd\source\rpw.cpp

Line  Level
 1014             
 1015                 return TRUE;
 1016             }
 1017             
 1018             
 1019             
No errors have been detected

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 30

     Used Files


       0 c:\rm3dev\inc\setjmp.h
       1 c:\rm3dev\inc\stdio.h
       2 c:\rm3dev\inc\math.h
       3 c:\rm3dev\inc\stdlib.h
       4 c:\rm3dev\inc\malloc.h
       5 C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V100\RWTH_SMP.bd\inc\uftcncs.hpp
       6 C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V100\RWTH_SMP.bd\inc\raw_t_cnc_s.hpp
       7 C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V100\RWTH_SMP.bd\inc\apwcncs.hpp
       8 C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V100\RWTH_SMP.bd\inc\puff_cnc_s.hpp
       9 C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V100\RWTH_SMP.bd\inc\onli_cnc_s.hpp
      10 C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V100\RWTH_SMP.bd\inc\IBF_struct.hpp
      11 C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V100\RWTH_SMP.bd\inc\rpw.hpp
      12 C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V100\RWTH_SMP.bd\source\rpw.cpp

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 31

     Used Options


     
        -DSMP16 -D_ARCHITECTURE=386 -VCOMPACT -VSUBSYS=libc.sub
        -VSUBSYS=libx.sub -VNDP -VFIXEDPARAMS -VCPU=PENTIUM -VNEARFAR
        -VNOALIGN -VBUILTIN -o -VLISTING -VROM -VSYMUPPER -VFARCRT
        -IC:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V100\RWTH_SMP.bd\inc
        -Ic:\rm3dev\inc -Ic:\rm3dev\incplus
        -VCXX=exceptions,rtti,instantiate=used,cxxdbg
        C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V100\RWTH_SMP.bd\source\rpw.cpp
        -VDP

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 32

     Interleaved Listing

C****************************************************************************
C     6:  RPW::RPW(void) 
C     7:  { 
C****************************************************************************
                                  L2  LABEL BYTE
   DATA  :000000   00 00 00 00R             DP    __dl__FPv
                   00 00                                                      
   DATA  :000006   01 00                    DW    1
   DATA  :000008   FF FF                    DW    65535
   DATA  :00000A   06                       DB    6
                                            DB    1 DUP(?)
   DATA  :00000C   00 00 00 00 00           DP    0
                   00                                                         
   DATA  :000012   00 00                    DW    0
   DATA  :000014   FF FF                    DW    65535
   DATA  :000016   00                       DB    0
                                            DB    1 DUP(?)

                                            PUBLIC   __ct__3RPWFv
                                  __ct__3RPWFv    PROC FAR
                                            ASSUME DS:DATA
   CODE32:000000   1E                       PUSH  DS
   CODE32:000001   66 B9 00 00              MOV   CX,DATA
   CODE32:000005   8E D9                    MOV   DS,CX
   CODE32:000007   55                       PUSH  EBP
   CODE32:000008   8B EC                    MOV   EBP,ESP
   CODE32:00000A   81 EC C8 00 00           SUB   ESP,200
                   00                                                         
   CODE32:000010   C4 35 00 00 00           LES   ESI,PWORD PTR __cxxtls
                   00R                                                        
   CODE32:000016   66 26 8B 56 10           MOV   DX,ES:WORD PTR [ESI+16]
   CODE32:00001B   26 8B 46 0C              MOV   EAX,ES:DWORD PTR [ESI+12]
   CODE32:00001F   66 89 95 3C FF           MOV   WORD PTR [EBP-196],DX
                   FF FF                                                      
   CODE32:000026   89 85 38 FF FF           MOV   DWORD PTR [EBP-200],EAX
                   FF                                                         
   CODE32:00002C   8D 85 38 FF FF           LEA   EAX,DWORD PTR [EBP-200]
                   FF                                                         
   CODE32:000032   8C D2                    MOV   DX,SS
   CODE32:000034   66 26 89 56 10           MOV   ES:WORD PTR [ESI+16],DX
   CODE32:000039   26 89 46 0C              MOV   ES:DWORD PTR [ESI+12],EAX
   CODE32:00003D   C6 85 3E FF FF           MOV   BYTE PTR [EBP-194],1
                   FF 01                                                      
   CODE32:000044   C7 85 40 FF FF           MOV   DWORD PTR [EBP-192],
                   FF 00 00 00 00R                OFFSET  L2
   CODE32:00004E   8C 9D 44 FF FF           MOV   WORD PTR [EBP-188],DS
                   FF                                                         
   CODE32:000054   8D 45 F4                 LEA   EAX,DWORD PTR [EBP-12]
   CODE32:000057   8C D2                    MOV   DX,SS
   CODE32:000059   66 89 95 4C FF           MOV   WORD PTR [EBP-180],DX
                   FF FF                                                      
   CODE32:000060   89 85 48 FF FF           MOV   DWORD PTR [EBP-184],EAX
                   FF                                                         
   CODE32:000066   C4 35 00 00 00           LES   ESI,PWORD PTR __cxxtls
                   00R                                                        

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 33

     Interleaved Listing

   CODE32:00006C   26 8B 46 04              MOV   EAX,ES:DWORD PTR [ESI+4]
   CODE32:000070   66 89 85 56 FF           MOV   WORD PTR [EBP-170],AX
                   FF FF                                                      
   CODE32:000077   26 C7 46 04 FF           MOV   ES:DWORD PTR [ESI+4],65535
                   FF 00 00                                                   
   CODE32:00007F   8D 45 F0                 LEA   EAX,DWORD PTR [EBP-16]
   CODE32:000082   8C D2                    MOV   DX,SS
   CODE32:000084   66 89 55 F8              MOV   WORD PTR [EBP-8],DX
   CODE32:000088   89 45 F4                 MOV   DWORD PTR [EBP-12],EAX
   CODE32:00008B   C7 45 F0 00 00           MOV   DWORD PTR [EBP-16],0
                   00 00                                                      
   CODE32:000092   66 8B 45 14              MOV   AX,WORD PTR [EBP+20]
   CODE32:000096   98                       CWDE                              
   CODE32:000097   0B 45 10                 OR    EAX,DWORD PTR [EBP+16]
   CODE32:00009A   75 3A                    JNE   NEAR PTR   L20001
   CODE32:00009C   6A 28                    PUSH  40
   CODE32:00009E   9A 00 00 00 00R          CALL FAR PTR         __nw__FUi
                   00 00                                                      
   CODE32:0000A5   66 89 55 14              MOV   WORD PTR [EBP+20],DX
   CODE32:0000A9   89 45 10                 MOV   DWORD PTR [EBP+16],EAX
   CODE32:0000AC   C7 45 F0 01 00           MOV   DWORD PTR [EBP-16],1
                   00 00                                                      
   CODE32:0000B3   66 8B 55 14              MOV   DX,WORD PTR [EBP+20]
   CODE32:0000B7   66 89 55 FE              MOV   WORD PTR [EBP-2],DX
   CODE32:0000BB   89 45 FA                 MOV   DWORD PTR [EBP-6],EAX
   CODE32:0000BE   C4 35 00 00 00           LES   ESI,PWORD PTR __cxxtls
                   00R                                                        
   CODE32:0000C4   26 C7 46 04 00           MOV   ES:DWORD PTR [ESI+4],0
                   00 00 00                                                   
   CODE32:0000CC   66 8B 45 14              MOV   AX,WORD PTR [EBP+20]
   CODE32:0000D0   98                       CWDE                              
   CODE32:0000D1   0B 45 10                 OR    EAX,DWORD PTR [EBP+16]
   CODE32:0000D4   74 4B                    JE    NEAR PTR   L3
                                  L20001:
C****************************************************************************
C     8:   
C     9:      hw_ir                = 0.0F; // Getriebeuntersetzung Hau
C +       ptwalzenmotor 
C****************************************************************************
   CODE32:0000D6   C4 75 10                 LES   ESI,PWORD PTR [EBP+16]
   CODE32:0000D9   B8 00 00 00 00           MOV   EAX,0
   CODE32:0000DE   26 89 46 08              MOV   ES:DWORD PTR [ESI+8],EAX
C****************************************************************************
C    10:      kw_ia                = 0.0F; // Getriebeuntersetzung Keg
C +       elwalzenmotor 
C****************************************************************************
   CODE32:0000E2   B8 00 00 00 00           MOV   EAX,0
   CODE32:0000E7   26 89 46 0C              MOV   ES:DWORD PTR [ESI+12],EAX
C****************************************************************************
C    11:      sin_kw_winkel_halbe  = 0.0F; // Sinus halber Kegelwalzen
C +       winkel 
C****************************************************************************
   CODE32:0000EB   B8 00 00 00 00           MOV   EAX,0
   CODE32:0000F0   26 89 46 10              MOV   ES:DWORD PTR [ESI+16],EAX
C****************************************************************************

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 34

     Interleaved Listing

C    12:   
C    13:      offset_rs            = 0.0F;  
C****************************************************************************
   CODE32:0000F4   B8 00 00 00 00           MOV   EAX,0
   CODE32:0000F9   26 89 46 14              MOV   ES:DWORD PTR [ESI+20],EAX
C****************************************************************************
C    14:      offset_agr           = 0.0F; 
C****************************************************************************
   CODE32:0000FD   B8 00 00 00 00           MOV   EAX,0
   CODE32:000102   26 89 46 18              MOV   ES:DWORD PTR [ESI+24],EAX
C****************************************************************************
C    15:      offset_aso           = 0.0F; 
C****************************************************************************
   CODE32:000106   B8 00 00 00 00           MOV   EAX,0
   CODE32:00010B   26 89 46 1C              MOV   ES:DWORD PTR [ESI+28],EAX
C****************************************************************************
C    16:      offset_asu           = 0.0F; 
C****************************************************************************
   CODE32:00010F   B8 00 00 00 00           MOV   EAX,0
   CODE32:000114   26 89 46 20              MOV   ES:DWORD PTR [ESI+32],EAX
C****************************************************************************
C    17:      offset_tr            = 0.0F;	 
C****************************************************************************
   CODE32:000118   B8 00 00 00 00           MOV   EAX,0
   CODE32:00011D   26 89 46 24              MOV   ES:DWORD PTR [ESI+36],EAX
                                  L3:
   CODE32:000121   0F B7 85 56 FF           MOVZX EAX,WORD PTR [EBP-170]
                   FF FF                                                      
   CODE32:000128   C4 35 00 00 00           LES   ESI,PWORD PTR __cxxtls
                   00R                                                        
   CODE32:00012E   26 89 46 04              MOV   ES:DWORD PTR [ESI+4],EAX
   CODE32:000132   66 8B 95 3C FF           MOV   DX,WORD PTR [EBP-196]
                   FF FF                                                      
   CODE32:000139   8B 85 38 FF FF           MOV   EAX,DWORD PTR [EBP-200]
                   FF                                                         
   CODE32:00013F   C4 35 00 00 00           LES   ESI,PWORD PTR __cxxtls
                   00R                                                        
   CODE32:000145   66 26 89 56 10           MOV   ES:WORD PTR [ESI+16],DX
   CODE32:00014A   26 89 46 0C              MOV   ES:DWORD PTR [ESI+12],EAX
C****************************************************************************
C    18:  } 
C****************************************************************************
   CODE32:00014E   66 8B 55 14              MOV   DX,WORD PTR [EBP+20]
   CODE32:000152   8B 45 10                 MOV   EAX,DWORD PTR [EBP+16]
   CODE32:000155   C9                       LEAVE   
   CODE32:000156   1F                       POP   DS
   CODE32:000157   CA 08 00                 RET   8
                                  __ct__3RPWFv  ENDP

C****************************************************************************
C    23:  int RPW::Main_RAW(int    iter, 
C    24:                    struct Def_Ein_Puff            Ein_Puff, 
C    25:                    struct Def_Lokal_Puff          Lokal_Puff,
C +        
C    26:                    struct Def_Aus_Puff            Aus_Puff, 
C    27:                    struct Def_Ein_Onli            Ein_Onli, 

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 35

     Interleaved Listing

C    28:                    struct Def_Aus_Onli            Aus_Onli, 
C    29:                    float  IBF_PARA[IBF_PARA_MAX], 
C    30:                    struct Def_Ist_Inter           *Ist_Inter,
C +        
C    31:                    struct Def_Soll_Inter          *Soll_Inter
C +       , 
C    32:                    struct Def_IBF_Allgemein_SOLL  *Soll_IBF, 
C    33:                    struct Def_IBF_Allgemein_IST   *Ist_IBF
C +       ) 
C    34:  { 

C****************************************************************************
                                            PUBLIC   Main_RAW__3RPWFi12Def_Ein_Puff14Def_Lokal_Puff12Def_Aus_Puff12Def_Ein_Onli12Def_Aus_OnliPfP13Def_Ist_InterP14Def_Soll_InterP22Def_IBF_Allgemein_SOLLP21Def_IBF_Allgemein_IST
                                  Main_RAW__3RPWFi12Def_Ein_Puff14Def_Lokal_Puff12Def_Aus_Puff12Def_Ein_Onli12Def_Aus_OnliPfP13Def_Ist_InterP14Def_Soll_InterP22Def_IBF_Allgemein_SOLLP21Def_IBF_AllgemeASSUME DS:DATA
rP22Def_IBF_Allgemein_SOLLP21Def_IBF_AllgemeASSUME DS:DATA
   CODE32:000000   55                       PUSH  EBP
   CODE32:000001   8B EC                    MOV   EBP,ESP
C****************************************************************************
C    35:     // Defintion der lokalen Variabeln 
C    36:     // struct Def_IBF_Allgemein *IBF_Allgemein; 
C    37:     // Los gehts 
C    38:   
C    39:     // Initilisieren 
C    40:   /* 
C    41:     if (Ein_Puff.walzenstart_flag) 
C    42:     { 
C    43:  		Soll_Inter->rs_v = 0.0F;	 
C    44:     } 
C    45:     else 
C    46:     { 
C    47:        if (Ein_Onli.rwg_poti_wert > 0.05F) 
C    48:        { 
C    49:  	     Soll_Inter->rs_v = 2.0F * Ein_Onli.rwg_poti_wert
C +       ; 
C    50:   	   } 
C    51:        else 
C    52:        { 
C    53:          Soll_Inter->rs_v = 0.0F;  
C    54:        } 
C    55:   
C    56:        Soll_Inter->aso_v = 0.0F; 
C    57:     } 
C    58:  */	 
C    59:     // Istwerte aufbereiten 
C    60:     Istwerte_RAW(  Ein_Puff, 
C****************************************************************************
   CODE32:000003   66 8B 95 3C 2A           MOV   DX,WORD PTR [EBP+10812]
                   00 00                                                      
   CODE32:00000A   52                       PUSH  EDX
   CODE32:00000B   FF B5 38 2A 00           PUSH  DWORD PTR [EBP+10808]
                   00                                                         
   CODE32:000011   81 EC 28 0D 00           SUB   ESP,3368
                   00                                                         
   CODE32:000017   1E                       PUSH  DS
   CODE32:000018   8D 85 0C 1D 00           LEA   EAX,DWORD PTR [EBP+7436]

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 36

     Interleaved Listing

                   00                                                         
   CODE32:00001E   89 C6                    MOV   ESI,EAX
   CODE32:000020   8D 7C 24 04              LEA   EDI,DWORD PTR [ESP+4]
   CODE32:000024   16 07                    PUSH  SS
                                            POP   ES
   CODE32:000026   FC                       CLD                               
   CODE32:000027   B9 4A 03 00 00           MOV   ECX,842
   CODE32:00002C   F3 36 A5                 REP MOVS  DWORD PTR ES:[EDI],
                                                    DWORD PTR SS:[ESI]
   CODE32:00002F   1F                       POP   DS
   CODE32:000030   81 EC 98 05 00           SUB   ESP,1432
                   00                                                         
   CODE32:000036   1E                       PUSH  DS
   CODE32:000037   56                       PUSH  ESI
   CODE32:000038   8D 85 74 17 00           LEA   EAX,DWORD PTR [EBP+6004]
                   00                                                         
   CODE32:00003E   89 C6                    MOV   ESI,EAX
   CODE32:000040   8D 7C 24 08              LEA   EDI,DWORD PTR [ESP+8]
   CODE32:000044   16 07                    PUSH  SS
                                            POP   ES
   CODE32:000046   FC                       CLD                               
   CODE32:000047   B9 65 01 00 00           MOV   ECX,357
   CODE32:00004C   F3 36 A5                 REP MOVS  DWORD PTR ES:[EDI],
                                                    DWORD PTR SS:[ESI]
   CODE32:00004F   66 36 A5                 MOVS  WORD PTR ES:[EDI],
                                                    WORD PTR SS:[ESI]
   CODE32:000052   5E                       POP   ESI
   CODE32:000053   1F                       POP   DS
   CODE32:000054   81 EC 54 0D 00           SUB   ESP,3412
                   00                                                         
   CODE32:00005A   1E                       PUSH  DS
   CODE32:00005B   56                       PUSH  ESI
   CODE32:00005C   8D 85 20 0A 00           LEA   EAX,DWORD PTR [EBP+2592]
                   00                                                         
   CODE32:000062   89 C6                    MOV   ESI,EAX
   CODE32:000064   8D 7C 24 08              LEA   EDI,DWORD PTR [ESP+8]
   CODE32:000068   16 07                    PUSH  SS
                                            POP   ES
   CODE32:00006A   FC                       CLD                               
   CODE32:00006B   B9 55 03 00 00           MOV   ECX,853
   CODE32:000070   F3 36 A5                 REP MOVS  DWORD PTR ES:[EDI],
                                                    DWORD PTR SS:[ESI]
   CODE32:000073   5E                       POP   ESI
   CODE32:000074   1F                       POP   DS
   CODE32:000075   66 8B 55 24              MOV   DX,WORD PTR [EBP+36]
   CODE32:000079   52                       PUSH  EDX
   CODE32:00007A   FF 75 20                 PUSH  DWORD PTR [EBP+32]
   CODE32:00007D   E8 00 00 00 00R          CALL  NEAR PTR         
                                                  Istwerte_RAW__3RPWF12Def_Ein_Pu
                                                  
C****************************************************************************
C    61:                    Lokal_Puff, 
C    62:                    Aus_Puff, 
C    63:                    &*Ist_Inter); 
C    64:   

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 37

     Interleaved Listing

C    65:     Soll_Inter->rs_v  = Aus_Onli.ds_dh_sp_hp.s_punkt; 
C****************************************************************************
   CODE32:000082   D9 45 74                 FLD   DWORD PTR [EBP+116]
   CODE32:000085   C4 75 18                 LES   ESI,PWORD PTR [EBP+24]
   CODE32:000088   26 D9 1E                 FSTP  ES:DWORD PTR [ESI]
C****************************************************************************
C    66:     Soll_Inter->aso_v = Aus_Onli.ds_dh_sp_hp.h_punkt; 
C****************************************************************************
   CODE32:00008B   D9 45 70                 FLD   DWORD PTR [EBP+112]
   CODE32:00008E   26 D9 5E 04              FSTP  ES:DWORD PTR [ESI+4]
C****************************************************************************
C    67:   
C    68:     // Hauptprogrammteil des IBF-Tasks 
C    69:     Main(*Ist_Inter, 
C****************************************************************************
   CODE32:000092   66 8B 95 3C 2A           MOV   DX,WORD PTR [EBP+10812]
                   00 00                                                      
   CODE32:000099   52                       PUSH  EDX
   CODE32:00009A   FF B5 38 2A 00           PUSH  DWORD PTR [EBP+10808]
                   00                                                         
   CODE32:0000A0   81 EC 0C 03 00           SUB   ESP,780
                   00                                                         
   CODE32:0000A6   1E                       PUSH  DS
   CODE32:0000A7   C4 75 20                 LES   ESI,PWORD PTR [EBP+32]
   CODE32:0000AA   06                       PUSH  ES
   CODE32:0000AB   8D 7C 24 08              LEA   EDI,DWORD PTR [ESP+8]
   CODE32:0000AF   16 07                    PUSH  SS
                                            POP   ES
   CODE32:0000B1   FC                       CLD                               
   CODE32:0000B2   1F                       POP   DS
   CODE32:0000B3   B9 C2 00 00 00           MOV   ECX,194
   CODE32:0000B8   F3 A5                    REP MOVSD 
   CODE32:0000BA   66 A5                    MOVSW                             
   CODE32:0000BC   1F                       POP   DS
   CODE32:0000BD   66 8B 55 2C              MOV   DX,WORD PTR [EBP+44]
   CODE32:0000C1   52                       PUSH  EDX
   CODE32:0000C2   FF 75 28                 PUSH  DWORD PTR [EBP+40]
   CODE32:0000C5   66 8B 55 0C              MOV   DX,WORD PTR [EBP+12]
   CODE32:0000C9   52                       PUSH  EDX
   CODE32:0000CA   FF 75 08                 PUSH  DWORD PTR [EBP+8]
   CODE32:0000CD   66 8B 55 1C              MOV   DX,WORD PTR [EBP+28]
   CODE32:0000D1   52                       PUSH  EDX
   CODE32:0000D2   FF 75 18                 PUSH  DWORD PTR [EBP+24]
   CODE32:0000D5   66 8B 55 14              MOV   DX,WORD PTR [EBP+20]
   CODE32:0000D9   52                       PUSH  EDX
   CODE32:0000DA   FF 75 10                 PUSH  DWORD PTR [EBP+16]
   CODE32:0000DD   E8 00 00 00 00R          CALL  NEAR PTR         
                                                  Main__3RPWF13Def_Ist_InterPfP21
                                                  
C****************************************************************************
C    70:          IBF_PARA, 
C    71:          &*Ist_IBF, 
C    72:          &*Soll_Inter, 
C    73:          &*Soll_IBF); 
C    74:   

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 38

     Interleaved Listing

C    75:     return TRUE; 
C****************************************************************************
   CODE32:0000E2   B8 FF FF FF FF           MOV   EAX,-1
   CODE32:0000E7   C9                       LEAVE   
   CODE32:0000E8   C2 38 2A                 RET   10808
                                  Main_RAW__3RPWFi12Def_Ein_Puff14Def_Lokal_Puff12Def_Aus_Puff12Def_Ein_Onli12Def_Aus_OnliPfP13Def_Ist_InterP14Def_Soll_InterP22Def_IBF_Allgemein_SOLLP21Def_IBF_Allgemein_IST  ENDP

C****************************************************************************
C    81:  int RPW::Istwerte_RAW(  struct Def_Ein_Puff    Ein_Puff, 
C    82:                          struct Def_Lokal_Puff  Lokal_Puff, 
C    83:                          struct Def_Aus_Puff    Aus_Puff, 
C    84:                          struct Def_Ist_Inter   *Ist_Inter) 
C    85:  { 
C****************************************************************************
                                  L20002  LABEL BYTE
   LINK  :000000   89                       DB    137
   LINK  :000001   88                       DB    136
   LINK  :000002   88                       DB    136
   LINK  :000003   3C                       DB    60
                                  L20003  LABEL BYTE
   LINK  :000004   00                       DB    0
   LINK  :000005   00                       DB    0
   LINK  :000006   00                       DB    0
   LINK  :000007   3F                       DB    63

                                            PUBLIC   Istwerte_RAW__3RPWF12Def_Ein_Puff14Def_Lokal_Puff12Def_Aus_PuffP13Def_Ist_Inter
                                  Istwerte_RAW__3RPWF12Def_Ein_Puff14Def_Lokal_Puff12Def_Aus_PuffP13Def_Ist_Inter    PROC NEAR
                                            ASSUME DS:DATA
C****************************************************************************
C    86:     Ist_Inter->rs_pos    =    Ein_Puff.form_mess_of.dis_hw_dw
C +         
C****************************************************************************
   CODE32:0000EB   D9 84 24 78 1A           FLD   DWORD PTR [ESP+6776]
                   00 00                                                      
   CODE32:0000F2   D8 84 24 80 13           FADD  DWORD PTR [ESP+4992]
                   00 00                                                      
   CODE32:0000F9   D9 84 24 B0 1A           FLD   DWORD PTR [ESP+6832]
                   00 00                                                      
   CODE32:000100   DE C1                    FADD                              
   CODE32:000102   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:000106   26 D9 19                 FSTP  ES:DWORD PTR [ECX]
C****************************************************************************
C    87:                             + Ein_Puff.hw_geometrie.r_nenn 
C    88:                             + Ein_Puff.dw_geometrie.r_nenn; 
C    89:     Ist_Inter->ag_pos    =    Ein_Puff.form_mess_of.da 
C****************************************************************************
   CODE32:000109   D9 84 24 B0 16           FLD   DWORD PTR [ESP+5808]
                   00 00                                                      
   CODE32:000110   D8 AC 24 74 13           FSUBR DWORD PTR [ESP+4980]
                   00 00                                                      
   CODE32:000117   D9 84 24 F0 1A           FLD   DWORD PTR [ESP+6896]
                   00 00                                                      
   CODE32:00011E   DE E9                    FSUBR                             
   CODE32:000120   D9 84 24 78 1A           FLD   DWORD PTR [ESP+6776]
                   00 00                                                      
   CODE32:000127   DE C1                    FADD                              

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 39

     Interleaved Listing

   CODE32:000129   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:00012D   26 D9 59 0C              FSTP  ES:DWORD PTR [ECX+12]
C****************************************************************************
C    90:                             - Ein_Puff.pos_laser_u_of 
C    91:                             - Ein_Puff.awu_geometrie.l_fehlen
C +       de_spitze 
C    92:                             + Ein_Puff.hw_geometrie.r_nenn; 
C    93:     Ist_Inter->aso_pos   =    Ein_Puff.form_mess_of.dis_aw; 
C****************************************************************************
   CODE32:000131   D9 84 24 84 13           FLD   DWORD PTR [ESP+4996]
                   00 00                                                      
   CODE32:000138   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:00013C   26 D9 59 04              FSTP  ES:DWORD PTR [ECX+4]
C****************************************************************************
C    94:     Ist_Inter->asu_pos   =    0.0F; 
C****************************************************************************
   CODE32:000140   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:000144   B8 00 00 00 00           MOV   EAX,0
   CODE32:000149   26 89 41 08              MOV   ES:DWORD PTR [ECX+8],EAX
C****************************************************************************
C    95:     Ist_Inter->tr_pos    =    Ein_Puff.pos_laser_u_of 
C****************************************************************************
   CODE32:00014D   D9 84 24 F0 1A           FLD   DWORD PTR [ESP+6896]
                   00 00                                                      
   CODE32:000154   D8 84 24 B0 16           FADD  DWORD PTR [ESP+5808]
                   00 00                                                      
   CODE32:00015B   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:00015F   26 D9 59 18              FSTP  ES:DWORD PTR [ECX+24]
C****************************************************************************
C    96:                             + Ein_Puff.awu_geometrie.l_fehlen
C +       de_spitze; 
C    97:     Ist_Inter->rs_f      =    Ein_Puff.fr_of;  
C****************************************************************************
   CODE32:000163   D9 84 24 0C 1A           FLD   DWORD PTR [ESP+6668]
                   00 00                                                      
   CODE32:00016A   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:00016E   26 D9 59 34              FSTP  ES:DWORD PTR [ECX+52]
C****************************************************************************
C    98:     Ist_Inter->as_f      =    Ein_Puff.fa_of;	 
C****************************************************************************
   CODE32:000172   D9 84 24 08 1A           FLD   DWORD PTR [ESP+6664]
                   00 00                                                      
   CODE32:000179   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:00017D   26 D9 59 38              FSTP  ES:DWORD PTR [ECX+56]
C****************************************************************************
C    99:   
C   100:     Ist_Inter->hw_n      =    Ein_Puff.n_hw_motor_ist / MIN_F
C +       AK; 
C****************************************************************************
   CODE32:000181   2E D9 05 00 00           FLD   CS:DWORD PTR L20002
                   00 00R                                                     
   CODE32:000188   D8 BC 24 50 13           FDIVR DWORD PTR [ESP+4944]
                   00 00                                                      
   CODE32:00018F   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:000193   26 D9 59 64              FSTP  ES:DWORD PTR [ECX+100]

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 40

     Interleaved Listing

C****************************************************************************
C   101:   
C   102:     diam_hw              =    Ein_Puff.hw_geometrie.d_nenn; 
C****************************************************************************
   CODE32:000197   D9 84 24 50 1A           FLD   DWORD PTR [ESP+6736]
                   00 00                                                      
   CODE32:00019E   C4 8C 24 20 20           LES   ECX,PWORD PTR [ESP+8224]
                   00 00                                                      
   CODE32:0001A5   26 D9 19                 FSTP  ES:DWORD PTR [ECX]
C****************************************************************************
C   103:     diam_dw              =    Ein_Puff.dw_geometrie.d_nenn;  
C****************************************************************************
   CODE32:0001A8   D9 84 24 88 1A           FLD   DWORD PTR [ESP+6792]
                   00 00                                                      
   CODE32:0001AF   C4 8C 24 20 20           LES   ECX,PWORD PTR [ESP+8224]
                   00 00                                                      
   CODE32:0001B6   26 D9 59 04              FSTP  ES:DWORD PTR [ECX+4]
C****************************************************************************
C   104:   
C   105:     hw_ir                =    Ein_Puff.hw1_motor.getriebe_unt
C +       ersetzung;              // Getriebeuntersetzung Hauptwalzenm
C +       otor 
C****************************************************************************
   CODE32:0001BA   D9 84 24 58 1B           FLD   DWORD PTR [ESP+7000]
                   00 00                                                      
   CODE32:0001C1   C4 8C 24 20 20           LES   ECX,PWORD PTR [ESP+8224]
                   00 00                                                      
   CODE32:0001C8   26 D9 59 08              FSTP  ES:DWORD PTR [ECX+8]
C****************************************************************************
C   106:     kw_ia                =    Ein_Puff.awu_motor.getriebe_unt
C +       ersetzung;              // Getriebeuntersetzung Kegelwalzenm
C +       otor 
C****************************************************************************
   CODE32:0001CC   D9 84 24 E8 1B           FLD   DWORD PTR [ESP+7144]
                   00 00                                                      
   CODE32:0001D3   C4 8C 24 20 20           LES   ECX,PWORD PTR [ESP+8224]
                   00 00                                                      
   CODE32:0001DA   26 D9 59 0C              FSTP  ES:DWORD PTR [ECX+12]
C****************************************************************************
C   107:     sin_kw_winkel_halbe  =    (float) sin(Ein_Puff.awu_geomet
C +       rie.winkel_bo * 0.5F);  // Sinus halber Kegelwalzenwinkel 
C****************************************************************************
   CODE32:0001DE   2E D9 05 00 00           FLD   CS:DWORD PTR L20003
                   00 00R                                                     
   CODE32:0001E5   D8 8C 24 10 1B           FMUL  DWORD PTR [ESP+6928]
                   00 00                                                      
   CODE32:0001EC   D9 FE                    FSIN                              
   CODE32:0001EE   9B                       FWAIT                             
   CODE32:0001EF   C4 8C 24 20 20           LES   ECX,PWORD PTR [ESP+8224]
                   00 00                                                      
   CODE32:0001F6   26 D9 59 10              FSTP  ES:DWORD PTR [ECX+16]
C****************************************************************************
C   108:   
C   109:  	Ist_Inter->da              = Aus_Puff.form_ring.da;
C +           					/* Aeusserer Durchmes

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 41

     Interleaved Listing

C +       ser        [mm]    */ 
C****************************************************************************
   CODE32:0001FA   D9 84 24 EC 01           FLD   DWORD PTR [ESP+492]
                   00 00                                                      
   CODE32:000201   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:000205   26 D9 99 94 00           FSTP  ES:DWORD PTR [ECX+148]
                   00 00                                                      
C****************************************************************************
C   110:  	Ist_Inter->da_of           = Ein_Puff.form_mess_of.da
C +       ; 
C****************************************************************************
   CODE32:00020C   D9 84 24 74 13           FLD   DWORD PTR [ESP+4980]
                   00 00                                                      
   CODE32:000213   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:000217   26 D9 99 98 00           FSTP  ES:DWORD PTR [ECX+152]
                   00 00                                                      
C****************************************************************************
C   111:    	Ist_Inter->di              = Aus_Puff.form_ring.di;
C +           					/* Innerer   Durchmes
C +       ser        [mm]    */ 
C****************************************************************************
   CODE32:00021E   D9 84 24 F4 01           FLD   DWORD PTR [ESP+500]
                   00 00                                                      
   CODE32:000225   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:000229   26 D9 99 9C 00           FSTP  ES:DWORD PTR [ECX+156]
                   00 00                                                      
C****************************************************************************
C   112:    	Ist_Inter->di_of           = Ein_Puff.form_mess_of.di
C +       ; 
C****************************************************************************
   CODE32:000230   D9 84 24 7C 13           FLD   DWORD PTR [ESP+4988]
                   00 00                                                      
   CODE32:000237   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:00023B   26 D9 99 A0 00           FSTP  ES:DWORD PTR [ECX+160]
                   00 00                                                      
C****************************************************************************
C   113:    	Ist_Inter->dm              = Aus_Puff.form_ring.dm;
C +           					/* Mittlerer Durchmes
C +       ser        [mm]    */ 
C****************************************************************************
   CODE32:000242   D9 84 24 F0 01           FLD   DWORD PTR [ESP+496]
                   00 00                                                      
   CODE32:000249   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:00024D   26 D9 99 A4 00           FSTP  ES:DWORD PTR [ECX+164]
                   00 00                                                      
C****************************************************************************
C   114:    	Ist_Inter->dm_of           = Ein_Puff.form_mess_of.dm
C +       ;     
C****************************************************************************
   CODE32:000254   D9 84 24 78 13           FLD   DWORD PTR [ESP+4984]
                   00 00                                                      
   CODE32:00025B   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:00025F   26 D9 99 A8 00           FSTP  ES:DWORD PTR [ECX+168]
                   00 00                                                      
C****************************************************************************

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 42

     Interleaved Listing

C   115:    	Ist_Inter->fertig_ho_soll  = Aus_Puff.ist_walzform.hm
C +       ; 
C****************************************************************************
   CODE32:000266   D9 44 24 5C              FLD   DWORD PTR [ESP+92]
   CODE32:00026A   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:00026E   26 D9 99 AC 00           FSTP  ES:DWORD PTR [ECX+172]
                   00 00                                                      
C****************************************************************************
C   116:    	Ist_Inter->fertig_wd_soll  = Aus_Puff.ist_walzform.sm
C +       ; 
C****************************************************************************
   CODE32:000275   D9 44 24 58              FLD   DWORD PTR [ESP+88]
   CODE32:000279   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:00027D   26 D9 99 B0 00           FSTP  ES:DWORD PTR [ECX+176]
                   00 00                                                      
C****************************************************************************
C   117:    	Ist_Inter->h0a             = Aus_Puff.h0a;
C +       			/* Ringhoehe axial  einlaufend  [mm]
C +          */  		 
C****************************************************************************
   CODE32:000284   D9 84 24 C4 05           FLD   DWORD PTR [ESP+1476]
                   00 00                                                      
   CODE32:00028B   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:00028F   26 D9 99 B4 00           FSTP  ES:DWORD PTR [ECX+180]
                   00 00                                                      
C****************************************************************************
C   118:    	Ist_Inter->h0r             = Aus_Puff.h0r;
C +       			/* Ringhoehe radial einlaufend  [mm]
C +          */ 
C****************************************************************************
   CODE32:000296   D9 84 24 BC 05           FLD   DWORD PTR [ESP+1468]
                   00 00                                                      
   CODE32:00029D   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:0002A1   26 D9 99 B8 00           FSTP  ES:DWORD PTR [ECX+184]
                   00 00                                                      
C****************************************************************************
C   119:    	Ist_Inter->h1r             = Aus_Puff.h1r;
C +       			/* Ringhoehe radial auslaufend  [mm]
C +          */ 
C****************************************************************************
   CODE32:0002A8   D9 84 24 C0 05           FLD   DWORD PTR [ESP+1472]
                   00 00                                                      
   CODE32:0002AF   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:0002B3   26 D9 99 BC 00           FSTP  ES:DWORD PTR [ECX+188]
                   00 00                                                      
C****************************************************************************
C   120:    	Ist_Inter->h1a             = Aus_Puff.h1a;
C +       			/* Ringhoehe axial  auslaufend  [mm]
C +          */ 
C****************************************************************************
   CODE32:0002BA   D9 84 24 C8 05           FLD   DWORD PTR [ESP+1480]
                   00 00                                                      
   CODE32:0002C1   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:0002C5   26 D9 99 C0 00           FSTP  ES:DWORD PTR [ECX+192]
                   00 00                                                      

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 43

     Interleaved Listing

C****************************************************************************
C   121:    	Ist_Inter->h1a_of          = Ein_Puff.form_mess_of.di
C +       s_aw; 
C****************************************************************************
   CODE32:0002CC   D9 84 24 84 13           FLD   DWORD PTR [ESP+4996]
                   00 00                                                      
   CODE32:0002D3   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:0002D7   26 D9 99 C4 00           FSTP  ES:DWORD PTR [ECX+196]
                   00 00                                                      
C****************************************************************************
C   122:    	Ist_Inter->s0a             = Aus_Puff.s0a;
C +       			/* Wanddicke axial  einlaufend  [mm]
C +          */ 
C****************************************************************************
   CODE32:0002DE   D9 84 24 D4 05           FLD   DWORD PTR [ESP+1492]
                   00 00                                                      
   CODE32:0002E5   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:0002E9   26 D9 99 C8 00           FSTP  ES:DWORD PTR [ECX+200]
                   00 00                                                      
C****************************************************************************
C   123:    	Ist_Inter->s0r             = Aus_Puff.s0r;
C +       			/* Wanddicke radial einlaufend  [mm]
C +          */ 
C****************************************************************************
   CODE32:0002F0   D9 84 24 CC 05           FLD   DWORD PTR [ESP+1484]
                   00 00                                                      
   CODE32:0002F7   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:0002FB   26 D9 99 CC 00           FSTP  ES:DWORD PTR [ECX+204]
                   00 00                                                      
C****************************************************************************
C   124:    	Ist_Inter->s1a             = Aus_Puff.s1a;
C +       			/* Wanddicke axial  auslaufend  [mm]
C +          */ 
C****************************************************************************
   CODE32:000302   D9 84 24 D8 05           FLD   DWORD PTR [ESP+1496]
                   00 00                                                      
   CODE32:000309   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:00030D   26 D9 99 D0 00           FSTP  ES:DWORD PTR [ECX+208]
                   00 00                                                      
C****************************************************************************
C   125:    	Ist_Inter->s1r             = Aus_Puff.s1r;
C +       			/* Wanddicke radial auslaufend  [mm]
C +          */ 
C****************************************************************************
   CODE32:000314   D9 84 24 D0 05           FLD   DWORD PTR [ESP+1488]
                   00 00                                                      
   CODE32:00031B   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:00031F   26 D9 99 D4 00           FSTP  ES:DWORD PTR [ECX+212]
                   00 00                                                      
C****************************************************************************
C   126:    	Ist_Inter->s1r_of          = Ein_Puff.form_mess_of.di
C +       s_hw_dw; 
C****************************************************************************
   CODE32:000326   D9 84 24 80 13           FLD   DWORD PTR [ESP+4992]
                   00 00                                                      

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 44

     Interleaved Listing

   CODE32:00032D   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:000331   26 D9 99 D8 00           FSTP  ES:DWORD PTR [ECX+216]
                   00 00                                                      
C****************************************************************************
C   127:  	Ist_Inter->sfh             = Aus_Puff.s_ekv;
C +       				/* Wanddicke bei Fertighoehe
C +          [mm]    */ 
C****************************************************************************
   CODE32:000338   D9 84 24 E0 05           FLD   DWORD PTR [ESP+1504]
                   00 00                                                      
   CODE32:00033F   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:000343   26 D9 99 DC 00           FSTP  ES:DWORD PTR [ECX+220]
                   00 00                                                      
C****************************************************************************
C   128:    	Ist_Inter->skw             = 0.0F;
C +         
C****************************************************************************
   CODE32:00034A   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:00034E   B8 00 00 00 00           MOV   EAX,0
   CODE32:000353   26 89 81 E0 00           MOV   ES:DWORD PTR [ECX+224],EAX
                   00 00                                                      
C****************************************************************************
C   129:    	Ist_Inter->skw_of          = 0.0F;
C +          		 
C****************************************************************************
   CODE32:00035A   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:00035E   B8 00 00 00 00           MOV   EAX,0
   CODE32:000363   26 89 81 E4 00           MOV   ES:DWORD PTR [ECX+228],EAX
                   00 00                                                      
C****************************************************************************
C   130:    	Ist_Inter->wa_dvol         = Aus_Puff.dvol_ring_proz;
C +              /* Berechnete Volumendifferenz [%]      */ 
C****************************************************************************
   CODE32:00036A   D9 84 24 44 07           FLD   DWORD PTR [ESP+1860]
                   00 00                                                      
   CODE32:000371   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:000375   26 D9 99 E8 00           FSTP  ES:DWORD PTR [ECX+232]
                   00 00                                                      
C****************************************************************************
C   131:     Ist_Inter->Vorform.sm      = Ein_Puff.vorform.sm;
C +         /* Wandstärke Null                  [mm] */ 
C****************************************************************************
   CODE32:00037C   D9 84 24 D4 16           FLD   DWORD PTR [ESP+5844]
                   00 00                                                      
   CODE32:000383   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:000387   26 D9 99 EC 00           FSTP  ES:DWORD PTR [ECX+236]
                   00 00                                                      
C****************************************************************************
C   132:     Ist_Inter->Vorform.da      = Ein_Puff.vorform.da;
C +         /* Durchmesser Vorform                   */ 
C****************************************************************************
   CODE32:00038E   D9 84 24 C8 16           FLD   DWORD PTR [ESP+5832]
                   00 00                                                      
   CODE32:000395   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:000399   26 D9 99 F4 00           FSTP  ES:DWORD PTR [ECX+244]

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 45

     Interleaved Listing

                   00 00                                                      
C****************************************************************************
C   133:     
C   134:   
C   135:      return TRUE; 
C****************************************************************************
   CODE32:0003A0   B8 FF FF FF FF           MOV   EAX,-1
   CODE32:0003A5   C2 24 20                 RET   8228
                                  Istwerte_RAW__3RPWF12Def_Ein_Puff14Def_Lokal_Puff12Def_Aus_PuffP13Def_Ist_Inter  ENDP

C****************************************************************************
C   141:  int RPW::Main( struct Def_Ist_Inter          Ist_Inter, 
C   142:                 float  IBF_PARA[IBF_PARA_MAX], 
C   143:                 struct Def_IBF_Allgemein_IST  *Ist_IBF,  
C   144:                 struct Def_Soll_Inter         *Soll_Inter, 
C   145:                 struct Def_IBF_Allgemein_SOLL *Soll_IBF) 
C   146:  { 
C****************************************************************************
                                  L20004  LABEL BYTE
   LINK  :000008   00                       DB    0
   LINK  :000009   00                       DB    0
   LINK  :00000A   80                       DB    128
   LINK  :00000B   3F                       DB    63
                                  L20005  LABEL BYTE
   LINK  :00000C   00                       DB    0
   LINK  :00000D   00                       DB    0
   LINK  :00000E   00                       DB    0
   LINK  :00000F   40                       DB    64
                                  L20006  LABEL BYTE
   LINK  :000010   00                       DB    0
   LINK  :000011   00                       DB    0
   LINK  :000012   70                       DB    112
   LINK  :000013   42                       DB    66
                                  L20008  LABEL BYTE
   LINK  :000014   00                       DB    0
   LINK  :000015   00                       DB    0
   LINK  :000016   70                       DB    112
   LINK  :000017   41                       DB    65
                                  L20010  LABEL BYTE
   LINK  :000018   00                       DB    0
   LINK  :000019   00                       DB    0
   LINK  :00001A   C8                       DB    200
   LINK  :00001B   42                       DB    66
                                  L20011  LABEL BYTE
   LINK  :00001C   00                       DB    0
   LINK  :00001D   00                       DB    0
   LINK  :00001E   C0                       DB    192
   LINK  :00001F   3F                       DB    63
                                  L20012  LABEL BYTE
   LINK  :000020   00                       DB    0
   LINK  :000021   00                       DB    0
   LINK  :000022   F0                       DB    240
   LINK  :000023   41                       DB    65
                                  L20013  LABEL BYTE
   LINK  :000024   0A                       DB    10
   LINK  :000025   D7                       DB    215

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 46

     Interleaved Listing

   LINK  :000026   23                       DB    35
   LINK  :000027   3C                       DB    60
                                  L20014  LABEL BYTE
   LINK  :000028   00                       DB    0
   LINK  :000029   00                       DB    0
   LINK  :00002A   20                       DB    32
   LINK  :00002B   41                       DB    65
                                  L20020  LABEL BYTE
   LINK  :00002C   66                       DB    102
   LINK  :00002D   E6                       DB    230
   LINK  :00002E   3A                       DB    58
   LINK  :00002F   43                       DB    67
                                  L20023  LABEL BYTE
   LINK  :000030   00                       DB    0
   LINK  :000031   00                       DB    0
   LINK  :000032   48                       DB    72
   LINK  :000033   42                       DB    66

                                            PUBLIC   Main__3RPWF13Def_Ist_InterPfP21Def_IBF_Allgemein_ISTP14Def_Soll_InterP22Def_IBF_Allgemein_SOLL
                                  Main__3RPWF13Def_Ist_InterPfP21Def_IBF_Allgemein_ISTP14Def_Soll_InterP22Def_IBF_Allgemein_SOLL    PROC NEAR
                                            ASSUME DS:DATA
   CODE32:0003A8   55                       PUSH  EBP
   CODE32:0003A9   8B EC                    MOV   EBP,ESP
   CODE32:0003AB   81 EC 90 00 00           SUB   ESP,144
                   00                                                         
C****************************************************************************
C   147:   
C   148:     // Zuweisung Def_IBF_Allgemein_SOLL  
C   149:   
C   150:     // Übergeben der Parameter aus Soll_IBF/Ist_IBF Struktur 
C   151:         
C   152:     Ist_IBF->Profilflag = Soll_IBF->Profilflag; 
C   153:     Ist_IBF->InitAchse  = Soll_IBF->InitAchse; 
C   154:     Ist_IBF->ExitAchse  = Soll_IBF->ExitAchse; 
C   155:     
C   156:     Ist_IBF->RS_Pos_Null  = Soll_IBF->RS_Pos_Null; // bla_Nul
C +       l -> Initialisierung nach manueller Anfahrt / vor Profiliere
C +       n  
C   157:     Ist_IBF->ASO_Pos_Null = Soll_IBF->ASO_Pos_Null; 
C   158:     Ist_IBF->AG_Pos_Null  = Soll_IBF->AG_Pos_Null;
C +        
C   159:   
C   160:     Ist_IBF->RS_Pos_Start = Soll_IBF->RS_Pos_Start; 	// Po
C +       sitionen in 'Walzen' vor Profilieren  
C   161:     Ist_IBF->AG_Pos_Start = Soll_IBF->AG_Pos_Start; 	 
C   162:     Ist_IBF->ASO_Pos_Start= Soll_IBF->ASO_Pos_Start;
C +          
C   163:      
C   164:     Ist_IBF->Wandstaerke_Null    = Ist_Inter.Vorform.sm; //Wa
C +       ndstärke aus Carwin   
C   165:     Ist_IBF->Werkzeugdurchmesser = diam_dw;   
C   166:     Ist_IBF->D_Null              = Ist_Inter.Vorform.da;
C +                                 
C   167:   
C   168:  #if(MRAW) 

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 47

     Interleaved Listing

C   169:     Ist_IBF->FA_f       = 0.1F; 
C   170:     Ist_IBF->FR_f       = 0.1F;  // im Interfac gefiltert 
C   171:     Ist_IBF->s_f        = 0.1F; 
C   172:      
C   173:  #else  
C   174:     Ist_IBF->FA_f       = 1.0F; //Aus_Puff.fa_mf;  
C   175:     Ist_IBF->FR_f       = 1.0F; //Aus_Puff.fr_mf; 
C   176:     Ist_IBF->s_f        = 1.0F; //Aus_Puff.s1r; 
C   177:   
C   178:  #endif 
C   179:  //----------------------------------------------------------
C +       ----------------- 
C   180:  // Beginn AXPRO.H 
C   181:  //----------------------------------------------------------
C +       ----------------- 
C   182:     
C   183:      
C   184:     //-------------------------------------------------------
C +       ---------------------------------- 
C   185:     //-----------------------Definition für Kraftregler/Filte
C +       rwerte u.ä.----------------------- 
C   186:     //-------------------------------------------------------
C +       ---------------------------------- 
C   187:      
C   188:      
C   189:     float s_f_alt = 0.0F; // 	gefilterte Wanddicke zum Zeit
C +       punkt t-1 für Positionierung der oberen Kegelwalze 
C   190:                 
C   191:     float uk = 0;              //Wert für Radialkraft 
C   192:     float uk1 = 0; 
C   193:     float KP = 0.00191F;        //Radialkraft Prop 
C   194:      
C   195:     	 
C   196:     float uk_ASO = 0;   			//Hilfsvariab
C +       le für Axialkraftregelung   MIC 040416 
C   197:     float uk1_ASO = 0;          //Hilfsvariable für Axialkraf
C +       tregelung  MIC 040416 
C   198:      
C   199:      
C   200:     // Filter für Ringdurchmesser      
C   201:     float	 diam_f = 0;			// gefilterte
C +       r Ringdurchmesser  
C   202:     float	 diam_f_alt = 0;	// letzter Wert Ringd
C +       urchmesser für Filter  
C   203:      
C   204:      
C   205:      
C   206:     float RS_Koll = 1.0F;      // Sicherheitsabstand RS-HW
C +        (1 mm) 
C   207:     float AG_Koll =  5.0F;     // Sicherheitsabstand AS-RS
C +         (5 mm) 
C   208:  
C +               
C   209:     float eps = 0.1F;          // Positioniergenauigkeit mich
C +       l:-> war 0.1F 

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 48

     Interleaved Listing

C   210:      
C   211:     float t_Halte = 50;        // Haltezeit in Vielfachen von
C +        100ms                
C   212:     float t_warte = 0;         // Wartezeit in Vielfaches von
C +        100ms    
C   213:     float t_warte_flag = 0;    // WarteFlag, damit t_warte be
C +       i der ersten Initialisierung gesetzt wird 
C   214:                         
C   215:     //-------------------------------------------------------
C +       --------------------------------------- 
C   216:     //--------------------------Variablen aus IBFPARA3.c-----
C +       --------------------------------------- 
C   217:     //-------------------------------------------------------
C +       --------------------------------------- 
C   218:     float Axialkraft; 
C   219:     float Radialkraft; 
C   220:     //-------------------------------------------------------
C +       ---------------------------------------- 
C   221:     //------------------------------sonstige Hilfsvariablen--
C +       ---------------------------------------- 
C   222:     //-------------------------------------------------------
C +       ----------------------------------------  
C   223:      
C   224:     float Afpos_dw = 0.0F; // änderung der VAriablen "Anfahrp
C +       osition_Dorn;" auf 8 Zeichen 	// Variable für Dornposition,
C +        nachdem dieser Positioniert woren ist    
C   225:      
C   226:      
C   227:          
C   228:       
C   229:     //-------------------------------------------------------
C +       -----------------------------------------  
C   230:     float zaehler=0.01F;    
C   231:     float n = 0.0f;     
C   232:     float s_ist =0.0f;          
C   233:      
C   234:     //-------------------------------------------------------
C +       ---------------------------------------- 
C   235:     //------------------------- Variablen für die diskontinui
C +       erliche Funktion ----------------------- 
C   236:     //-------------------------------------------------------
C +       ---------------------------------------- 
C   237:      
C   238:      
C   239:     float t_dis_h = 0; // Haltezeit für 1.5 Umdrehungen, bei
C +       denen der Dorn stehen bleiben soll (Diskontinuierliche Abwal
C +       zung) 
C   240:      
C   241:     float delta_h = 0.0F; 
C   242:   
C   243:  //----------------------------------------------------------
C +       ----------------- 
C   244:  // Ende AXPRO.H 
C   245:  //----------------------------------------------------------
C +       ----------------- 

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 49

     Interleaved Listing

C   246:   
C   247:     // Ring: Höhe und Wanddicke; Außendurchmesser 'diam' exte
C +       rn von interfac 
C   248:     float h_a1;             // Ringhöhe nach Axialwalzspalt b
C +       zw. Entfernung Kr-K 
C   249:     float s_r1;             // Wanddicke nach Radialwalzspalt
C +        bzw. Entfernung DW-HW 
C   250:     float diam;             // Ringdurchmesser 
C   251:   
C   252:     float Ta  = 0.1F;       // Filter  
C   253:     float Kpf = 1; 
C   254:     float T1f = 1;      
C   255:   
C   256:      
C   257:     float Del_ASO_Pos;      // KORREKTUR ASO für axiale Walzk
C +       raftregelung MIC 040406 
C   258:   
C   259:     float f_H;              // Drehfrequenz der HW in 1/s (_n
C +       icht_ 1/min!) 
C   260:      
C   261:     float t_U;              // Zeit für eine Ringumdrehung
C +        
C   262:   
C   263:     int RS_HW = 1;    // Kollisionsgefahr RS-HW 
C   264:     int RS_AG = 1;    // Kollisionsgefahr RS_AG 
C   265:     int AG_RS = 1;    // Kollisionsgefahr AG-RS 
C   266:     int AS_AS = 1;    // Kollisionsgefahr oKrw-uKw  
C   267:   
C   268:     // Pi  
C   269:     #ifndef  PI 
C   270:     #define  PI 3.14159265 
C   271:     #endif  
C   272:   
C   273:     /* Daten von Oberflaeche an Task */
C +        
C   274:     struct Def_Steuerbyte Steuerbyte_Lese; // far Steuerbyte_
C +       Lese;  
C****************************************************************************
   CODE32:0003B1   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:0003B4   26 8B 01                 MOV   EAX,ES:DWORD PTR [ECX]
   CODE32:0003B7   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:0003BA   26 89 41 09              MOV   ES:DWORD PTR [ECX+9],EAX
   CODE32:0003BE   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:0003C1   26 0F BE 41 04           MOVSX EAX,ES:BYTE PTR [ECX+4]
   CODE32:0003C6   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:0003CA   64 88 43 0D              MOV   FS:BYTE PTR [EBX+13],AL
   CODE32:0003CE   26 0F BE 41 05           MOVSX EAX,ES:BYTE PTR [ECX+5]
   CODE32:0003D3   64 88 43 0E              MOV   FS:BYTE PTR [EBX+14],AL
   CODE32:0003D7   0F B4 5D 08              LFS   EBX,PWORD PTR [EBP+8]
   CODE32:0003DB   64 D9 43 16              FLD   FS:DWORD PTR [EBX+22]
   CODE32:0003DF   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:0003E2   26 D9 59 27              FSTP  ES:DWORD PTR [ECX+39]
   CODE32:0003E6   64 D9 43 32              FLD   FS:DWORD PTR [EBX+50]
   CODE32:0003EA   26 D9 59 2B              FSTP  ES:DWORD PTR [ECX+43]
   CODE32:0003EE   64 D9 43 52              FLD   FS:DWORD PTR [EBX+82]

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 50

     Interleaved Listing

   CODE32:0003F2   26 D9 59 2F              FSTP  ES:DWORD PTR [ECX+47]
   CODE32:0003F6   64 D9 43 1A              FLD   FS:DWORD PTR [EBX+26]
   CODE32:0003FA   26 D9 59 33              FSTP  ES:DWORD PTR [ECX+51]
   CODE32:0003FE   64 D9 43 56              FLD   FS:DWORD PTR [EBX+86]
   CODE32:000402   26 D9 59 37              FSTP  ES:DWORD PTR [ECX+55]
   CODE32:000406   64 D9 43 36              FLD   FS:DWORD PTR [EBX+54]
   CODE32:00040A   26 D9 59 3B              FSTP  ES:DWORD PTR [ECX+59]
   CODE32:00040E   D9 85 14 01 00           FLD   DWORD PTR [EBP+276]
                   00                                                         
   CODE32:000414   26 D9 59 5B              FSTP  ES:DWORD PTR [ECX+91]
   CODE32:000418   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:00041F   64 D9 43 04              FLD   FS:DWORD PTR [EBX+4]
   CODE32:000423   26 D9 59 63              FSTP  ES:DWORD PTR [ECX+99]
   CODE32:000427   D9 85 1C 01 00           FLD   DWORD PTR [EBP+284]
                   00                                                         
   CODE32:00042D   26 D9 59 57              FSTP  ES:DWORD PTR [ECX+87]
   CODE32:000431   B8 00 00 80 3F           MOV   EAX,1065353216
   CODE32:000436   26 89 41 43              MOV   ES:DWORD PTR [ECX+67],EAX
   CODE32:00043A   B8 00 00 80 3F           MOV   EAX,1065353216
   CODE32:00043F   26 89 41 3F              MOV   ES:DWORD PTR [ECX+63],EAX
   CODE32:000443   B8 00 00 80 3F           MOV   EAX,1065353216
   CODE32:000448   26 89 41 47              MOV   ES:DWORD PTR [ECX+71],EAX
   CODE32:00044C   B8 00 00 00 00           MOV   EAX,0
   CODE32:000451   89 45 F8                 MOV   DWORD PTR [EBP-8],EAX
   CODE32:000454   89 45 8C                 MOV   DWORD PTR [EBP-116],EAX
   CODE32:000457   89 45 90                 MOV   DWORD PTR [EBP-112],EAX
   CODE32:00045A   B8 F7 58 FA 3A           MOV   EAX,989485303
   CODE32:00045F   89 45 94                 MOV   DWORD PTR [EBP-108],EAX
   CODE32:000462   B8 00 00 00 00           MOV   EAX,0
   CODE32:000467   89 45 E8                 MOV   DWORD PTR [EBP-24],EAX
   CODE32:00046A   89 45 C4                 MOV   DWORD PTR [EBP-60],EAX
   CODE32:00046D   89 45 EC                 MOV   DWORD PTR [EBP-20],EAX
   CODE32:000470   89 45 C8                 MOV   DWORD PTR [EBP-56],EAX
   CODE32:000473   B8 CD CC CC 3D           MOV   EAX,1036831949
   CODE32:000478   89 45 F4                 MOV   DWORD PTR [EBP-12],EAX
   CODE32:00047B   B8 00 00 48 42           MOV   EAX,1112014848
   CODE32:000480   89 45 FC                 MOV   DWORD PTR [EBP-4],EAX
   CODE32:000483   B8 00 00 00 00           MOV   EAX,0
   CODE32:000488   89 45 98                 MOV   DWORD PTR [EBP-104],EAX
   CODE32:00048B   89 45 9C                 MOV   DWORD PTR [EBP-100],EAX
   CODE32:00048E   89 45 D0                 MOV   DWORD PTR [EBP-48],EAX
   CODE32:000491   B8 0A D7 23 3C           MOV   EAX,1008981770
   CODE32:000496   89 45 D4                 MOV   DWORD PTR [EBP-44],EAX
   CODE32:000499   B8 00 00 00 00           MOV   EAX,0
   CODE32:00049E   89 45 DC                 MOV   DWORD PTR [EBP-36],EAX
   CODE32:0004A1   89 45 A8                 MOV   DWORD PTR [EBP-88],EAX
   CODE32:0004A4   89 45 E0                 MOV   DWORD PTR [EBP-32],EAX
   CODE32:0004A7   89 45 AC                 MOV   DWORD PTR [EBP-84],EAX
   CODE32:0004AA   B8 CD CC CC 3D           MOV   EAX,1036831949
   CODE32:0004AF   89 45 B0                 MOV   DWORD PTR [EBP-80],EAX
   CODE32:0004B2   B8 00 00 80 3F           MOV   EAX,1065353216
   CODE32:0004B7   89 45 A4                 MOV   DWORD PTR [EBP-92],EAX
   CODE32:0004BA   89 45 B4                 MOV   DWORD PTR [EBP-76],EAX
   CODE32:0004BD   C7 45 D8 01 00           MOV   DWORD PTR [EBP-40],1

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 51

     Interleaved Listing

                   00 00                                                      
   CODE32:0004C4   C7 45 B8 01 00           MOV   DWORD PTR [EBP-72],1
                   00 00                                                      
   CODE32:0004CB   C7 45 BC 01 00           MOV   DWORD PTR [EBP-68],1
                   00 00                                                      
   CODE32:0004D2   C7 45 C0 01 00           MOV   DWORD PTR [EBP-64],1
                   00 00                                                      
C****************************************************************************
C   275:   
C   276:  //++++++++++ Zyklische Initialisierung und Aktualisierung de
C +       r Messgrößen ++++++++++ 
C   277:   
C   278:     // schritt_nr = Soll_Inter->schritt_nr;	// lese aktue
C +       llen Programmstatus (Koppers)  
C   279:      
C   280:     // aktuelle Positionen im Walzwerk auslesen und berechnen
C +       : 
C   281:     Ist_IBF->RS_Pos   = Ist_Inter.rs_pos  - offset_rs;      /
C +       / aktuelle Dornposition 
C****************************************************************************
   CODE32:0004D9   64 D9 43 14              FLD   FS:DWORD PTR [EBX+20]
   CODE32:0004DD   D8 6D 28                 FSUBR DWORD PTR [EBP+40]
   CODE32:0004E0   26 D9 59 0F              FSTP  ES:DWORD PTR [ECX+15]
C****************************************************************************
C   282:     Ist_IBF->AG_Pos   = Ist_Inter.ag_pos  - offset_agr;     /
C +       / aktuelle Axialgerüstposition 
C****************************************************************************
   CODE32:0004E4   64 D9 43 18              FLD   FS:DWORD PTR [EBX+24]
   CODE32:0004E8   D8 6D 34                 FSUBR DWORD PTR [EBP+52]
   CODE32:0004EB   26 D9 59 13              FSTP  ES:DWORD PTR [ECX+19]
C****************************************************************************
C   283:     Ist_IBF->ASO_Pos  = Ist_Inter.aso_pos - offset_aso;     /
C +       / aktuelle Axialschlittenposition oben 
C****************************************************************************
   CODE32:0004EF   64 D9 43 1C              FLD   FS:DWORD PTR [EBX+28]
   CODE32:0004F3   D8 6D 2C                 FSUBR DWORD PTR [EBP+44]
   CODE32:0004F6   26 D9 59 17              FSTP  ES:DWORD PTR [ECX+23]
C****************************************************************************
C   284:  #ifdef MRAW 
C   285:     Ist_IBF->ASU_Pos  = Ist_Inter.asu_pos - offset_asu;     /
C +       / aktuelle Axialschlittenposition unten 
C   286:  #endif 
C   287:     Ist_IBF->TR_Pos   = Ist_Inter.tr_pos  - offset_tr;      /
C +       / aktuelle Tastrollenposition 
C****************************************************************************
   CODE32:0004FA   64 D9 43 24              FLD   FS:DWORD PTR [EBX+36]
   CODE32:0004FE   D8 6D 40                 FSUBR DWORD PTR [EBP+64]
   CODE32:000501   26 D9 59 1B              FSTP  ES:DWORD PTR [ECX+27]
C****************************************************************************
C   288:     Ist_IBF->FR       = Ist_Inter.rs_f;                     /
C +       / aktuelle rad. Walzkraft      
C****************************************************************************
   CODE32:000505   D9 45 5C                 FLD   DWORD PTR [EBP+92]
   CODE32:000508   26 D9 59 1F              FSTP  ES:DWORD PTR [ECX+31]
C****************************************************************************

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 52

     Interleaved Listing

C   289:     Ist_IBF->FA       = Ist_Inter.as_f;                     /
C +       / aktuelle axiale Walzkraft     
C****************************************************************************
   CODE32:00050C   D9 45 60                 FLD   DWORD PTR [EBP+96]
   CODE32:00050F   26 D9 59 23              FSTP  ES:DWORD PTR [ECX+35]
C****************************************************************************
C   290:      
C   291:     // Sollgeschwindigkeiten im Walzwerk (alle 0 wg. aut init
C +        startpos): 
C   292:     Soll_IBF->Soll_RS_V = Soll_IBF->Soll_ASO_V = Soll_IBF->So
C +       ll_AG_V = 1.0F;      //  !!! 
C****************************************************************************
   CODE32:000513   2E D9 05 00 00           FLD   CS:DWORD PTR L20004
                   00 00R                                                     
   CODE32:00051A   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:00051D   26 D9 51 4E              FST   ES:DWORD PTR [ECX+78]
   CODE32:000521   26 D9 51 2E              FST   ES:DWORD PTR [ECX+46]
   CODE32:000525   26 D9 59 12              FSTP  ES:DWORD PTR [ECX+18]
C****************************************************************************
C   293:      
C   294:     Soll_Inter->rs_v  = Soll_IBF->Soll_RS_V; 
C****************************************************************************
   CODE32:000529   0F B4 5D 08              LFS   EBX,PWORD PTR [EBP+8]
   CODE32:00052D   64 D9 43 12              FLD   FS:DWORD PTR [EBX+18]
   CODE32:000531   C4 4D 10                 LES   ECX,PWORD PTR [EBP+16]
   CODE32:000534   26 D9 19                 FSTP  ES:DWORD PTR [ECX]
C****************************************************************************
C   295:     Soll_Inter->ag_v  = Soll_IBF->Soll_AG_V; 
C****************************************************************************
   CODE32:000537   64 D9 43 4E              FLD   FS:DWORD PTR [EBX+78]
   CODE32:00053B   26 D9 59 0C              FSTP  ES:DWORD PTR [ECX+12]
C****************************************************************************
C   296:     Soll_Inter->aso_v = Soll_IBF->Soll_ASO_V; 
C****************************************************************************
   CODE32:00053F   64 D9 43 2E              FLD   FS:DWORD PTR [EBX+46]
   CODE32:000543   26 D9 59 04              FSTP  ES:DWORD PTR [ECX+4]
C****************************************************************************
C   297:      
C   298:     // aktuelle Ringgeometrie 
C   299:     h_a1 = Ist_IBF->ASO_Pos;                               //
C +        Ringhöhe 
C****************************************************************************
   CODE32:000547   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:00054A   26 D9 41 17              FLD   ES:DWORD PTR [ECX+23]
   CODE32:00054E   D9 9D 78 FF FF           FSTP  DWORD PTR [EBP-136]
                   FF                                                         
C****************************************************************************
C   300:     s_r1 = Ist_IBF->RS_Pos - ((diam_hw + diam_dw) / 2.0F); //
C +        Wanddicke; Problem wegen Breitung!?!? 
C****************************************************************************
   CODE32:000554   C4 8D 34 03 00           LES   ECX,PWORD PTR [EBP+820]
                   00                                                         
   CODE32:00055A   26 D9 41 04              FLD   ES:DWORD PTR [ECX+4]
   CODE32:00055E   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 53

     Interleaved Listing

   CODE32:000565   64 D8 03                 FADD  FS:DWORD PTR [EBX]
   CODE32:000568   2E D9 05 00 00           FLD   CS:DWORD PTR L20005
                   00 00R                                                     
   CODE32:00056F   DE F9                    FDIVR                             
   CODE32:000571   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:000574   26 D8 69 0F              FSUBR ES:DWORD PTR [ECX+15]
   CODE32:000578   D9 9D 7C FF FF           FSTP  DWORD PTR [EBP-132]
                   FF                                                         
C****************************************************************************
C   301:     diam = Ist_IBF->TR_Pos + Ist_IBF->AG_Pos - (diam_hw / 2.0
C +       F);   // momentaner Ringdurchmesser 
C****************************************************************************
   CODE32:00057E   26 D9 41 13              FLD   ES:DWORD PTR [ECX+19]
   CODE32:000582   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000586   64 D8 43 1B              FADD  FS:DWORD PTR [EBX+27]
   CODE32:00058A   2E D9 05 00 00           FLD   CS:DWORD PTR L20005
                   00 00R                                                     
   CODE32:000591   C4 8D 34 03 00           LES   ECX,PWORD PTR [EBP+820]
                   00                                                         
   CODE32:000597   26 D8 39                 FDIVR ES:DWORD PTR [ECX]
   CODE32:00059A   DE E9                    FSUBR                             
   CODE32:00059C   D9 5D A0                 FSTP  DWORD PTR [EBP-96]
C****************************************************************************
C   302:                            
C   303:     // Filter für Ringdurchmesser, Bö, 020528 
C   304:     diam_f     = (Kpf * diam + ((T1f / Ta) * diam_f_alt)) / (
C +       (T1f / Ta) + 1); 
C****************************************************************************
   CODE32:00059F   D9 45 B0                 FLD   DWORD PTR [EBP-80]
   CODE32:0005A2   D8 7D B4                 FDIVR DWORD PTR [EBP-76]
   CODE32:0005A5   D9 45 C8                 FLD   DWORD PTR [EBP-56]
   CODE32:0005A8   DE C9                    FMUL                              
   CODE32:0005AA   D9 45 A0                 FLD   DWORD PTR [EBP-96]
   CODE32:0005AD   D8 4D A4                 FMUL  DWORD PTR [EBP-92]
   CODE32:0005B0   DE C1                    FADD                              
   CODE32:0005B2   D9 45 B0                 FLD   DWORD PTR [EBP-80]
   CODE32:0005B5   D8 7D B4                 FDIVR DWORD PTR [EBP-76]
   CODE32:0005B8   2E D9 05 00 00           FLD   CS:DWORD PTR L20004
                   00 00R                                                     
   CODE32:0005BF   DE C1                    FADD                              
   CODE32:0005C1   DE F9                    FDIVR                             
   CODE32:0005C3   D9 5D EC                 FSTP  DWORD PTR [EBP-20]
C****************************************************************************
C   305:     diam_f_alt = diam_f;          
C****************************************************************************
   CODE32:0005C6   D9 45 EC                 FLD   DWORD PTR [EBP-20]
   CODE32:0005C9   D9 5D C8                 FSTP  DWORD PTR [EBP-56]
C****************************************************************************
C   306:                
C   307:     // Sonstige Größen, Hilfsgrößen etc. 
C   308:     f_H = Ist_Inter.hw_n/(hw_ir*60.0F); 
C****************************************************************************
   CODE32:0005CC   2E D9 05 00 00           FLD   CS:DWORD PTR L20006
                   00 00R                                                     
   CODE32:0005D3   26 D8 49 08              FMUL  ES:DWORD PTR [ECX+8]

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 54

     Interleaved Listing

   CODE32:0005D7   D8 BD 8C 00 00           FDIVR DWORD PTR [EBP+140]
                   00                                                         
   CODE32:0005DD   D9 5D E4                 FSTP  DWORD PTR [EBP-28]
C****************************************************************************
C   309:      
C   310:     t_U = diam_f/(diam_hw*f_H); // Zeit für eine Ringumdrehun
C +       g gemessen in s 
C****************************************************************************
   CODE32:0005E0   D9 45 E4                 FLD   DWORD PTR [EBP-28]
   CODE32:0005E3   26 D8 09                 FMUL  ES:DWORD PTR [ECX]
   CODE32:0005E6   D8 7D EC                 FDIVR DWORD PTR [EBP-20]
   CODE32:0005E9   D9 5D 84                 FSTP  DWORD PTR [EBP-124]
C****************************************************************************
C   311:   
C   312:  //----------------------------------------------------------
C +       ----------------------------------------- 
C   313:  //------------------ Übergabe der Zahlenwerte aus IBFPARA-Fe
C +       nster ----------------------------------- 
C   314:  //----------------------------------------------------------
C +       ----------------------------------------- 
C   315:     
C   316:     Axialkraft                    = 0.0F;   // Keine Vorgabe
C +       der Sollkraft  = zahl10;   //*!!!*  
C****************************************************************************
   CODE32:0005EC   B8 00 00 00 00           MOV   EAX,0
   CODE32:0005F1   89 45 F0                 MOV   DWORD PTR [EBP-16],EAX
C****************************************************************************
C   317:     Radialkraft                   = 0.0F;   // Keine Vorgabe
C +       der Sollkraft  = zahl11;   //*!!!*  
C****************************************************************************
   CODE32:0005F4   89 45 CC                 MOV   DWORD PTR [EBP-52],EAX
C****************************************************************************
C   318:     Ist_IBF->Del_Kr_AGR           = 1.0F; 
C****************************************************************************
   CODE32:0005F7   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:0005FA   B8 00 00 80 3F           MOV   EAX,1065353216
   CODE32:0005FF   26 89 41 4F              MOV   ES:DWORD PTR [ECX+79],EAX
C****************************************************************************
C   319:     Ist_IBF->Pos_auf_Mantel       = 1.0F;   // 	 
C****************************************************************************
   CODE32:000603   B8 00 00 80 3F           MOV   EAX,1065353216
   CODE32:000608   26 89 41 53              MOV   ES:DWORD PTR [ECX+83],EAX
C****************************************************************************
C   320:      
C   321:  //----------------------------------------------------------
C +       ------------------------------------------	 
C   322:   
C   323:   
C   324:  //++++++++++ Ende Initialisierung ++++++++++ 
C   325:   
C   326:  //########## Hand- bzw. Automatiksteuerung ausgehend von Kop
C +       pers Position bei Walzenstart ########## 
C   327:   
C   328:     // Geschwindigkeiten sind in axpro.h vorbelegt 
C   329:     // Startposition für jeweilige Ringgeometrie in axpro.h e

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 55

     Interleaved Listing

C +       intragen? 
C   330:   
C   331:     if (! Ist_IBF->AUTO)		// AUTO = 0 heißt man
C +       uelle Steuerung 
C   332:     { 
C****************************************************************************
   CODE32:00060C   26 83 39 00              CMP   ES:DWORD PTR [ECX],0
C****************************************************************************
C   333:  #ifdef MRAW 
C   334:   
C   335:        if (Ist_IBF->StartPos == 1) 
C   336:        { 
C   337:           // Bei manuell braucht keine Startposition eingenom
C +       men werden !?! 
C   338:           // Sollposition auf Istposition zu Beginn: 
C   339:           Soll_IBF->Soll_RS_Pos  = Ist_IBF->RS_Pos; 
C   340:           Soll_IBF->Soll_ASO_Pos = Ist_IBF->ASO_Pos; 
C   341:           Soll_IBF->Soll_AG_Pos  = Ist_IBF->AG_Pos; 
C   342:            
C   343:           // Sollgeschwindigkeiten im Walzwerk: 
C   344:           Soll_IBF->Soll_RS_V = 100000.0F; 
C   345:           Soll_IBF->Soll_ASO_V = 1.0F; 
C   346:           Soll_IBF->Soll_AG_V = 1.0F; 
C   347:            
C   348:           Soll_Inter->rs_v = Soll_IBF->Soll_RS_V; 
C   349:           Soll_Inter->ag_v = Soll_IBF->Soll_AG_V; 
C   350:           Soll_Inter->aso_v = Soll_IBF->Soll_ASO_V; 
C   351:            
C   352:           Ist_IBF->StartPos = 0; 
C   353:        };
C +               
C   354:         
C   355:        _settextposition(6,1); 
C   356:        printf("Manuelle Steuerung: Beenden mit klein 'l': ");
C +          
C   357:        printf("TEST fuer Pause die Taste 'p' druecken"); 
C   358:   
C   359:        if (kbhit()) Ist_IBF->ManAuswahl = getch(); 
C   360:   
C   361:        switch (Ist_IBF->ManAuswahl) 
C   362:        { 
C   363:   
C   364:           case 't': Soll_IBF->Soll_RS_Pos = Soll_IBF->Soll_RS
C +       _Pos - 0.2F;	break;	// Radialschlitten 
C   365:           //case 'w': Soll_RS_Pos = Soll_RS_Pos - 0.1F;	break
C +       ; 
C   366:           case 'z': Soll_IBF->Soll_RS_Pos = Ist_IBF->RS_Pos;
C +       break; 
C   367:           //case 'r': Soll_RS_Pos = Soll_RS_Pos + 0.1F;	break
C +       ; 
C   368:           case 'u': Soll_IBF->Soll_RS_Pos = Soll_IBF->Soll_RS
C +       _Pos + 0.2F; 	break; 
C   369:            
C   370:           case 'd': Soll_IBF->Soll_AG_Pos = Soll_IBF->Soll_AG
C +       _Pos - 0.2F;	break;	//	Axialgerüst 

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 56

     Interleaved Listing

C   371:           //case 's': Soll_AG_Pos = Soll_AG_Pos - 0.1F;	break
C +       ; 
C   372:           case 'f': Soll_IBF->Soll_AG_Pos = Ist_IBF->AG_Pos;
C +       break; 
C   373:           //case 'f': Soll_AG_Pos = Soll_AG_Pos + 0.1F;	break
C +       ; 
C   374:           case 'g': Soll_IBF->Soll_AG_Pos = Soll_IBF->Soll_AG
C +       _Pos + 0.2F;	break; 
C   375:            
C   376:           case 'y': Soll_IBF->Soll_ASO_Pos = Soll_IBF->Soll_A
C +       SO_Pos - 0.2F;	break;	//	Axialschlitten 
C   377:           //case 'x': Soll_AS_Pos = Soll_AS_Pos - 0.1F;	break
C +       ; 
C   378:           case 'x': Soll_IBF->Soll_ASO_Pos = Ist_IBF->ASO_Pos
C +       ; break; 
C   379:           //case 'v': Soll_AS_Pos = Soll_AS_Pos + 0.1F;	break
C +       ; 
C   380:           case 'c': Soll_IBF->Soll_ASO_Pos = Soll_IBF->Soll_A
C +       SO_Pos + 0.2F;	break; 
C   381:            
C   382:           default: break; 
C   383:         }  // Klammer zu: switch (ManAuswahl)  
C   384:  #endif          
C   385:     } // Klammer zu: if !AUTO then 
C   386:   
C   387:     else  // von if !AUTO 
C   388:     {     // automatische Steuerung: 
C****************************************************************************
   CODE32:000610   0F 84 80 0E 00           JE    NEAR PTR   L8
                   00                                                         
C****************************************************************************
C   389:   
C   390:           // Da Messwerte von Anlage und Mess-Schieber differ
C +       ieren (...), vor Beginn  
C   391:           // des Profilierens Aussenkontur (radial/axial) des
C +        Ringes von Hand anfahren ?? 
C   392:           // -> von Hand angefahrene Positionen beschreiben d
C +       en Ausgangszustand ?? 
C   393:   
C   394:        switch (Ist_IBF->Profilflag)      // IBF_Allgemein.IBF
C +       _Allgemein.Profilflag in axpro.h definiert, bei Step 6 in in
C +       terfac auf -1 gesetzt!  
C****************************************************************************
   CODE32:000616   26 8B 41 09              MOV   EAX,ES:DWORD PTR [ECX+9]
   CODE32:00061A   3D 02 00 00 00           CMP   EAX,2
   CODE32:00061F   7F 26                    JG    NEAR PTR   L20024
   CODE32:000621   0F 84 3B 0C 00           JE    NEAR PTR   L55
                   00                                                         
   CODE32:000627   40                       INC   EAX
   CODE32:000628   3D 02 00 00 00           CMP   EAX,2
   CODE32:00062D   0F 87 63 0E 00           JA    NEAR PTR   L8
                   00                                                         
   CODE32:000633   2E FF 24 85 00           JMP   CS:WORD PTR L20025[EAX*4]
                   00 00 00R                                                  
                                  L20025:

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 57

     Interleaved Listing

   CODE32:00063B   00 00 00 00R             DD    L10
   CODE32:00063F   00 00 00 00R             DD    L11
   CODE32:000643   00 00 00 00R             DD    L43
                                  L20024:
   CODE32:000647   3D 0B 00 00 00           CMP   EAX,11
   CODE32:00064C   7F 16                    JG    NEAR PTR   L20026
   CODE32:00064E   0F 84 9C 09 00           JE    NEAR PTR   L49
                   00                                                         
   CODE32:000654   3D 03 00 00 00           CMP   EAX,3
   CODE32:000659   0F 84 EB 0C 00           JE    NEAR PTR   L57
                   00                                                         
   CODE32:00065F   E9 32 0E 00 00           JMP   NEAR PTR   L8
                                  L20026:
   CODE32:000664   3D 28 00 00 00           CMP   EAX,40
   CODE32:000669   0F 84 27 0E 00           JE    NEAR PTR   L8
                   00                                                         
   CODE32:00066F   E9 22 0E 00 00           JMP   NEAR PTR   L8
C****************************************************************************
C   395:        { 
C   396:         
C   397:        case -1:    // ---------------------------------------
C +       ----------- 
C   398:                    //----- Startpositionen lesen, Sollwertvor
C +       gabe ------ 
C   399:                    //----------------------------------------
C +       -----------						 
C   400:                    //   Memoryflag=IBF_Allgemein.IBF_Allgemei
C +       n.Profilflag;   //für Pausenfunktion 
C   401:   
C   402:                    // Geschwindigkeiten initialisieren 
C   403:                    Soll_IBF->Soll_RS_V  = 0.0F; 
C****************************************************************************
                                  L10:
   CODE32:000674   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000677   B8 00 00 00 00           MOV   EAX,0
   CODE32:00067C   26 89 41 12              MOV   ES:DWORD PTR [ECX+18],EAX
C****************************************************************************
C   404:                    Soll_IBF->Soll_ASO_V = 0.0F;  
C****************************************************************************
   CODE32:000680   B8 00 00 00 00           MOV   EAX,0
   CODE32:000685   26 89 41 2E              MOV   ES:DWORD PTR [ECX+46],EAX
C****************************************************************************
C   405:                    Soll_IBF->Soll_ASU_V = 0.0F; 
C****************************************************************************
   CODE32:000689   B8 00 00 00 00           MOV   EAX,0
   CODE32:00068E   26 89 41 42              MOV   ES:DWORD PTR [ECX+66],EAX
C****************************************************************************
C   406:                    Soll_IBF->Soll_AG_V  = 0.0F; 
C****************************************************************************
   CODE32:000692   B8 00 00 00 00           MOV   EAX,0
   CODE32:000697   26 89 41 4E              MOV   ES:DWORD PTR [ECX+78],EAX
C****************************************************************************
C   407:                    Soll_IBF->Soll_ZAL_V = 0.0F; 
C****************************************************************************
   CODE32:00069B   B8 00 00 00 00           MOV   EAX,0

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 58

     Interleaved Listing

   CODE32:0006A0   26 89 41 62              MOV   ES:DWORD PTR [ECX+98],EAX
C****************************************************************************
C   408:                    Soll_IBF->Soll_ZAR_V = 0.0F; 
C****************************************************************************
   CODE32:0006A4   B8 00 00 00 00           MOV   EAX,0
   CODE32:0006A9   26 89 41 5E              MOV   ES:DWORD PTR [ECX+94],EAX
C****************************************************************************
C   409:                                   
C   410:                    Soll_Inter->rs_v     = Soll_IBF->Soll_RS_V
C +       ; 
C****************************************************************************
   CODE32:0006AD   0F B4 5D 08              LFS   EBX,PWORD PTR [EBP+8]
   CODE32:0006B1   64 D9 43 12              FLD   FS:DWORD PTR [EBX+18]
   CODE32:0006B5   C4 4D 10                 LES   ECX,PWORD PTR [EBP+16]
   CODE32:0006B8   26 D9 19                 FSTP  ES:DWORD PTR [ECX]
C****************************************************************************
C   411:                    Soll_Inter->aso_v    = Soll_IBF->Soll_ASO_
C +       V; 
C****************************************************************************
   CODE32:0006BB   64 D9 43 2E              FLD   FS:DWORD PTR [EBX+46]
   CODE32:0006BF   26 D9 59 04              FSTP  ES:DWORD PTR [ECX+4]
C****************************************************************************
C   412:                    Soll_Inter->asu_v    = Soll_IBF->Soll_ASU_
C +       V; 
C****************************************************************************
   CODE32:0006C3   64 D9 43 42              FLD   FS:DWORD PTR [EBX+66]
   CODE32:0006C7   26 D9 59 08              FSTP  ES:DWORD PTR [ECX+8]
C****************************************************************************
C   413:                    Soll_Inter->ag_v     = Soll_IBF->Soll_AG_V
C +       ;        
C****************************************************************************
   CODE32:0006CB   64 D9 43 4E              FLD   FS:DWORD PTR [EBX+78]
   CODE32:0006CF   26 D9 59 0C              FSTP  ES:DWORD PTR [ECX+12]
C****************************************************************************
C   414:                    Soll_Inter->zal_v    = Soll_IBF->Soll_ZAL_
C +       V;        
C****************************************************************************
   CODE32:0006D3   64 D9 43 62              FLD   FS:DWORD PTR [EBX+98]
   CODE32:0006D7   26 D9 59 10              FSTP  ES:DWORD PTR [ECX+16]
C****************************************************************************
C   415:                    Soll_Inter->zar_v    = Soll_IBF->Soll_ZAR_
C +       V; 
C****************************************************************************
   CODE32:0006DB   64 D9 43 5E              FLD   FS:DWORD PTR [EBX+94]
   CODE32:0006DF   26 D9 59 14              FSTP  ES:DWORD PTR [ECX+20]
C****************************************************************************
C   416:                     
C   417:                    Soll_Inter->kwo_n    = kw_ia/hw_ir * (diam
C +       _hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AGR + Ist_IBF->
C +       Pos_auf_Mantel)*sin_kw_winkel_halbe); 
C****************************************************************************
   CODE32:0006E3   D9 85 8C 00 00           FLD   DWORD PTR [EBP+140]
                   00                                                         
   CODE32:0006E9   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 59

     Interleaved Listing

   CODE32:0006F0   64 D8 0B                 FMUL  FS:DWORD PTR [EBX]
   CODE32:0006F3   2E D9 05 00 00           FLD   CS:DWORD PTR L20005
                   00 00R                                                     
   CODE32:0006FA   DE F9                    FDIVR                             
   CODE32:0006FC   64 D9 43 08              FLD   FS:DWORD PTR [EBX+8]
   CODE32:000700   0F B5 95 34 03           LGS   EDX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:000707   65 D8 7A 0C              FDIVR GS:DWORD PTR [EDX+12]
   CODE32:00070B   DE C9                    FMUL                              
   CODE32:00070D   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000711   64 D9 43 53              FLD   FS:DWORD PTR [EBX+83]
   CODE32:000715   0F B5 55 18              LGS   EDX,PWORD PTR [EBP+24]
   CODE32:000719   65 D8 42 4F              FADD  GS:DWORD PTR [EDX+79]
   CODE32:00071D   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:000724   64 D9 43 10              FLD   FS:DWORD PTR [EBX+16]
   CODE32:000728   DE C9                    FMUL                              
   CODE32:00072A   DE F9                    FDIVR                             
   CODE32:00072C   26 D9 59 34              FSTP  ES:DWORD PTR [ECX+52]
C****************************************************************************
C   418:                    Soll_Inter->kwu_n    = kw_ia/hw_ir * (diam
C +       _hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AGR + Ist_IBF->
C +       Pos_auf_Mantel)*sin_kw_winkel_halbe);
C +       	 
C****************************************************************************
   CODE32:000730   D9 85 8C 00 00           FLD   DWORD PTR [EBP+140]
                   00                                                         
   CODE32:000736   64 D8 0B                 FMUL  FS:DWORD PTR [EBX]
   CODE32:000739   2E D9 05 00 00           FLD   CS:DWORD PTR L20005
                   00 00R                                                     
   CODE32:000740   DE F9                    FDIVR                             
   CODE32:000742   64 D9 43 08              FLD   FS:DWORD PTR [EBX+8]
   CODE32:000746   0F B5 95 34 03           LGS   EDX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:00074D   65 D8 7A 0C              FDIVR GS:DWORD PTR [EDX+12]
   CODE32:000751   DE C9                    FMUL                              
   CODE32:000753   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000757   64 D9 43 53              FLD   FS:DWORD PTR [EBX+83]
   CODE32:00075B   0F B5 55 18              LGS   EDX,PWORD PTR [EBP+24]
   CODE32:00075F   65 D8 42 4F              FADD  GS:DWORD PTR [EDX+79]
   CODE32:000763   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:00076A   64 D9 43 10              FLD   FS:DWORD PTR [EBX+16]
   CODE32:00076E   DE C9                    FMUL                              
   CODE32:000770   DE F9                    FDIVR                             
   CODE32:000772   26 D9 59 38              FSTP  ES:DWORD PTR [ECX+56]
C****************************************************************************
C   419:                     
C   420:                    Soll_IBF->RS_Pos_Start = Ist_IBF->RS_Pos;
C +             // wird in case '3' -> hier Auffahren benötigt 
C****************************************************************************
   CODE32:000776   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:00077A   64 D9 43 0F              FLD   FS:DWORD PTR [EBX+15]
   CODE32:00077E   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000781   26 D9 59 1A              FSTP  ES:DWORD PTR [ECX+26]

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 60

     Interleaved Listing

C****************************************************************************
C   421:                     
C   422:                    Soll_IBF->Soll_AG_Pos  = Soll_IBF->AG_Pos_
C +       Start = Ist_IBF->AG_Pos; // AG_Pos == auslesen der Werte aus
C +        PA-Karte inkl. Offset
C +        
C****************************************************************************
   CODE32:000785   64 D9 43 13              FLD   FS:DWORD PTR [EBX+19]
   CODE32:000789   26 D9 51 56              FST   ES:DWORD PTR [ECX+86]
   CODE32:00078D   26 D9 59 4A              FSTP  ES:DWORD PTR [ECX+74]
C****************************************************************************
C   423:                     
C   424:                     
C   425:                    //----------------------------------------
C +       ----------------------------------------- 
C   426:                    //------------Vorgabe für Startposition de
C +       s Radialschlitten------------------------ 
C   427:                    //----------------------------------------
C +       ----------------------------------------- 
C   428:                     
C   429:                     
C   430:                    Soll_IBF->RS_Pos_Null = (diam_hw + Ist_IBF
C +       ->Werkzeugdurchmesser)/2 + Ist_IBF->Wandstaerke_Null;  // Nu
C +       llpunkt des Radialschlittens als Abstand zwischen Hauptwalze
C +       durchmesser, Wandstärke und Dornwalzendurchmesser  
C****************************************************************************
   CODE32:000791   64 D9 43 63              FLD   FS:DWORD PTR [EBX+99]
   CODE32:000795   0F B5 95 34 03           LGS   EDX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:00079C   65 D8 02                 FADD  GS:DWORD PTR [EDX]
   CODE32:00079F   2E D9 05 00 00           FLD   CS:DWORD PTR L20005
                   00 00R                                                     
   CODE32:0007A6   DE F9                    FDIVR                             
   CODE32:0007A8   64 D9 43 5B              FLD   FS:DWORD PTR [EBX+91]
   CODE32:0007AC   DE C1                    FADD                              
   CODE32:0007AE   26 D9 59 16              FSTP  ES:DWORD PTR [ECX+22]
C****************************************************************************
C   431:                     
C   432:                     
C   433:                     
C   434:                    //----------------------------------------
C +       ----------------------------------------- 
C   435:                    //------------Vorgabe für Startposition de
C +       r Axialschlitten ------------------------ 
C   436:                    //----------------------------------------
C +       ----------------------------------------- 
C   437:                     
C   438:                    Soll_IBF->AG_Pos_Null = Ist_IBF->AG_Pos;  
C****************************************************************************
   CODE32:0007B2   64 D9 43 13              FLD   FS:DWORD PTR [EBX+19]
   CODE32:0007B6   26 D9 59 52              FSTP  ES:DWORD PTR [ECX+82]
C****************************************************************************
C   439:                     
C   440:  
C +          

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 61

     Interleaved Listing

C   441:                    //----------------------------------------
C +       ---------------------------------------- 
C   442:                    //------------Vorgaben für oberen Axialsch
C +       litten---------------------------------- 
C   443:                    //----------------------------------------
C +       ---------------------------------------- 
C   444:                     
C   445:                     
C   446:                    Soll_IBF->ASO_Pos_Null = Ist_IBF->Start_Ri
C +       nghoehe + 15.0F; 	 
C****************************************************************************
   CODE32:0007BA   2E D9 05 00 00           FLD   CS:DWORD PTR L20008
                   00 00R                                                     
   CODE32:0007C1   64 D8 43 5F              FADD  FS:DWORD PTR [EBX+95]
   CODE32:0007C5   26 D9 59 32              FSTP  ES:DWORD PTR [ECX+50]
C****************************************************************************
C   447:                    Soll_IBF->ASO_Pos_Start = Soll_IBF->ASO_Po
C +       s_Null;						 
C****************************************************************************
   CODE32:0007C9   0F B4 5D 08              LFS   EBX,PWORD PTR [EBP+8]
   CODE32:0007CD   64 D9 43 32              FLD   FS:DWORD PTR [EBX+50]
   CODE32:0007D1   26 D9 59 36              FSTP  ES:DWORD PTR [ECX+54]
C****************************************************************************
C   448:                     
C   449:                    #if (FALSE) 
C   450:                    _settextposition(28,1); 
C   451:                    printf("case -1"); 
C   452:                    #endif    
C   453:                     
C   454:                    //----------------------------------------
C +       ---------------------------------------- 
C   455:                    //------------------Kalibrierung der Einga
C +       ngsignale-> hier Radialkraft------------ 
C   456:                    //----------------------------------------
C +       ---------------------------------------- 
C   457:                    Soll_Inter->zal_v=0.0F ; // michl: festset
C +       zen der Zentrierarme !!! WENN ALLES FUNTZT, DANN RAUS 
C****************************************************************************
   CODE32:0007D5   C4 4D 10                 LES   ECX,PWORD PTR [EBP+16]
   CODE32:0007D8   B8 00 00 00 00           MOV   EAX,0
   CODE32:0007DD   26 89 41 10              MOV   ES:DWORD PTR [ECX+16],EAX
C****************************************************************************
C   458:                    Soll_Inter->zar_v=0.0F ; // michl: festset
C +       zen der Zentrierarme   
C****************************************************************************
   CODE32:0007E1   B8 00 00 00 00           MOV   EAX,0
   CODE32:0007E6   26 89 41 14              MOV   ES:DWORD PTR [ECX+20],EAX
C****************************************************************************
C   459:                     
C   460:                     
C   461:                       
C   462:   
C   463:                 t_Halte= 50; //t_Halte = 10*2*diam_f/(diam_hw
C +       *f_H); // Haltezeit entspricht 1 Ringumdrehung, nötig als Kr
C +       iterium bei Kraftanfahrposition  

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 62

     Interleaved Listing

C****************************************************************************
   CODE32:0007EA   B8 00 00 48 42           MOV   EAX,1112014848
   CODE32:0007EF   89 45 FC                 MOV   DWORD PTR [EBP-4],EAX
C****************************************************************************
C   464:                 Soll_IBF->Profilflag = 0; 
C****************************************************************************
   CODE32:0007F2   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:0007F5   26 C7 01 00 00           MOV   ES:DWORD PTR [ECX],0
                   00 00                                                      
C****************************************************************************
C   465:                 Soll_IBF->Soll_RS_Pos = Soll_IBF->RS_Pos_Null
C +       ; // definiert für RS_Pos in case 'a' 
C****************************************************************************
   CODE32:0007FC   64 D9 43 16              FLD   FS:DWORD PTR [EBX+22]
C****************************************************************************
C   466:                 break; //case -1 
C****************************************************************************
   CODE32:000800   26 D9 59 0A              FSTP  ES:DWORD PTR [ECX+10]
   CODE32:000804   E9 8D 0C 00 00           JMP   NEAR PTR   L8
C****************************************************************************
C   467:      
C   468:     case 0:     //-------------------------------------------
C +       --------------------- 
C   469:                 //----------------Routine für Startposition--
C +       --------------------- 
C   470:                 //-------------------------------------------
C +       --------------------- 
C   471:                 //Memoryflag=IBF_Allgemein.IBF_Allgemein.Prof
C +       ilflag;						//für
C +        Pausefunktion 
C   472:             
C   473:                 switch (Ist_IBF->InitAchse)  
C****************************************************************************
                                  L11:
   CODE32:000809   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:00080C   26 0F BE 41 0D           MOVSX EAX,ES:BYTE PTR [ECX+13]
   CODE32:000811   3D 64 00 00 00           CMP   EAX,100
   CODE32:000816   7F 2A                    JG    NEAR PTR   L20017
   CODE32:000818   0F 84 D6 05 00           JE    NEAR PTR   L37
                   00                                                         
   CODE32:00081E   2D 61 00 00 00           SUB   EAX,97
   CODE32:000823   3D 02 00 00 00           CMP   EAX,2
   CODE32:000828   0F 87 68 0C 00           JA    NEAR PTR   L8
                   00                                                         
   CODE32:00082E   2E FF 24 85 00           JMP   CS:WORD PTR L20018[EAX*4]
                   00 00 00R                                                  
                                  L20018:
   CODE32:000836   00 00 00 00R             DD    L18
   CODE32:00083A   00 00 00 00R             DD    L29
   CODE32:00083E   00 00 00 00R             DD    L30
                                  L20017:
   CODE32:000842   3D 31 61 00 00           CMP   EAX,24881
   CODE32:000847   7F 12                    JG    NEAR PTR   L20019
   CODE32:000849   74 1C                    JE    NEAR PTR   L13
   CODE32:00084B   3D 7A 00 00 00           CMP   EAX,122

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 63

     Interleaved Listing

   CODE32:000850   0F 84 A1 03 00           JE    NEAR PTR   L27
                   00                                                         
   CODE32:000856   E9 3B 0C 00 00           JMP   NEAR PTR   L8
                                  L20019:
   CODE32:00085B   3D 31 62 00 00           CMP   EAX,25137
   CODE32:000860   74 7F                    JE    NEAR PTR   L16
   CODE32:000862   E9 2F 0C 00 00           JMP   NEAR PTR   L8
C****************************************************************************
C   474:                    { 
C   475:                     
C   476:                      // Programmexample for IFM 2006 
C   477:                      //Spezieller Programmcode zur Verifikati
C +       on einer Dornbewegung 
C   478:                      //Ausgangswandicke bei Banning 200 mm so
C +       ll auf Wanddicke 100 mm verfahren 
C   479:   
C   480:                      //!!!ACHTUNG!!! in Datei rwth_task.cpp m
C +       uss die Initialisierung wieder geändert werden, wenn richtig
C +        gewalzt werden soll 
C   481:   
C   482:                  case 'a1': 
C   483:                               Soll_IBF->Soll_RS_V = 2.0F; 
C****************************************************************************
                                  L13:
   CODE32:000867   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:00086A   B8 00 00 00 40           MOV   EAX,1073741824
   CODE32:00086F   26 89 41 12              MOV   ES:DWORD PTR [ECX+18],EAX
C****************************************************************************
C   484:                               Soll_IBF->Soll_AG_V  = 0.0F; 
C****************************************************************************
   CODE32:000873   B8 00 00 00 00           MOV   EAX,0
   CODE32:000878   26 89 41 4E              MOV   ES:DWORD PTR [ECX+78],EAX
C****************************************************************************
C   485:                               Soll_IBF->Soll_ASO_V = 0.0F;  
C****************************************************************************
   CODE32:00087C   B8 00 00 00 00           MOV   EAX,0
   CODE32:000881   26 89 41 2E              MOV   ES:DWORD PTR [ECX+46],EAX
C****************************************************************************
C   486:                               Soll_IBF->Soll_ASU_V = 0.0F; 
C****************************************************************************
   CODE32:000885   B8 00 00 00 00           MOV   EAX,0
   CODE32:00088A   26 89 41 42              MOV   ES:DWORD PTR [ECX+66],EAX
C****************************************************************************
C   487:                                   
C   488:                               // test: Werte befinden sich je
C +       tz in den if-Anweisungen Soll_Inter->rs_v = Soll_RS_V;
C +          
C   489:                               Soll_Inter->rs_v =  Soll_IBF->S
C +       oll_RS_V; 
C****************************************************************************
   CODE32:00088E   0F B4 5D 08              LFS   EBX,PWORD PTR [EBP+8]
   CODE32:000892   64 D9 43 12              FLD   FS:DWORD PTR [EBX+18]
   CODE32:000896   C4 4D 10                 LES   ECX,PWORD PTR [EBP+16]
   CODE32:000899   26 D9 19                 FSTP  ES:DWORD PTR [ECX]
C****************************************************************************

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 64

     Interleaved Listing

C   490:                               Soll_Inter->ag_v  = Soll_IBF->S
C +       oll_AG_V;        
C****************************************************************************
   CODE32:00089C   64 D9 43 4E              FLD   FS:DWORD PTR [EBX+78]
   CODE32:0008A0   26 D9 59 0C              FSTP  ES:DWORD PTR [ECX+12]
C****************************************************************************
C   491:                               Soll_Inter->aso_v = Soll_IBF->S
C +       oll_ASO_V; 
C****************************************************************************
   CODE32:0008A4   64 D9 43 2E              FLD   FS:DWORD PTR [EBX+46]
   CODE32:0008A8   26 D9 59 04              FSTP  ES:DWORD PTR [ECX+4]
C****************************************************************************
C   492:                               Soll_Inter->asu_v = Soll_IBF->S
C +       oll_ASU_V; 
C****************************************************************************
   CODE32:0008AC   64 D9 43 42              FLD   FS:DWORD PTR [EBX+66]
   CODE32:0008B0   26 D9 59 08              FSTP  ES:DWORD PTR [ECX+8]
C****************************************************************************
C   493:                                                          
C   494:                               //Überprüfen, ob Dornposition e
C +       rreicht ist 
C   495:                              if(Ist_IBF->RS_Pos <= 100) // Ab
C +        hier wird Radialschlitten positionieren 
C   496:                                 { 
C****************************************************************************
   CODE32:0008B4   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:0008B7   2E D9 05 00 00           FLD   CS:DWORD PTR L20010
                   00 00R                                                     
   CODE32:0008BE   26 D8 59 0F              FCOMP ES:DWORD PTR [ECX+15]
   CODE32:0008C2   DF E0                    FNSTSW AX                         
   CODE32:0008C4   9E                       SAHF                              
   CODE32:0008C5   0F 82 CB 0B 00           JB    NEAR PTR   L8
                   00                                                         
C****************************************************************************
C   497:                                    Soll_IBF->Soll_RS_V = 0.0F
C +       ; 
C****************************************************************************
   CODE32:0008CB   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:0008CE   B8 00 00 00 00           MOV   EAX,0
   CODE32:0008D3   26 89 41 12              MOV   ES:DWORD PTR [ECX+18],EAX
C****************************************************************************
C   498:                                    Soll_IBF->InitAchse = 'b1'
C +       ; 
C   499:                                    break; 
C****************************************************************************
   CODE32:0008D7   26 C6 41 04 31           MOV   ES:BYTE PTR [ECX+4],49
   CODE32:0008DC   E9 B5 0B 00 00           JMP   NEAR PTR   L8
C****************************************************************************
C   500:                                 } 
C   501:                              break; 
C   502:   
C   503:         
C   504:                    case 'b1':  
C   505:                               Soll_IBF->Soll_RS_V  = 0.0F; 
C****************************************************************************

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 65

     Interleaved Listing

                                  L16:
   CODE32:0008E1   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:0008E4   B8 00 00 00 00           MOV   EAX,0
   CODE32:0008E9   26 89 41 12              MOV   ES:DWORD PTR [ECX+18],EAX
C****************************************************************************
C   506:                               Soll_IBF->Soll_AG_V  = 0.0F; 
C****************************************************************************
   CODE32:0008ED   B8 00 00 00 00           MOV   EAX,0
   CODE32:0008F2   26 89 41 4E              MOV   ES:DWORD PTR [ECX+78],EAX
C****************************************************************************
C   507:                               Soll_IBF->Soll_ASO_V = 0.0F;  
C****************************************************************************
   CODE32:0008F6   B8 00 00 00 00           MOV   EAX,0
   CODE32:0008FB   26 89 41 2E              MOV   ES:DWORD PTR [ECX+46],EAX
C****************************************************************************
C   508:                               Soll_IBF->Soll_ASU_V = 0.0F; 
C****************************************************************************
   CODE32:0008FF   B8 00 00 00 00           MOV   EAX,0
   CODE32:000904   26 89 41 42              MOV   ES:DWORD PTR [ECX+66],EAX
C****************************************************************************
C   509:                                   
C   510:                               // test: Werte befinden sich je
C +       tz in den if-Anweisungen Soll_Inter->rs_v = Soll_RS_V;
C +          
C   511:                               Soll_Inter->rs_v =  Soll_IBF->S
C +       oll_RS_V; 
C****************************************************************************
   CODE32:000908   0F B4 5D 08              LFS   EBX,PWORD PTR [EBP+8]
   CODE32:00090C   64 D9 43 12              FLD   FS:DWORD PTR [EBX+18]
   CODE32:000910   C4 4D 10                 LES   ECX,PWORD PTR [EBP+16]
   CODE32:000913   26 D9 19                 FSTP  ES:DWORD PTR [ECX]
C****************************************************************************
C   512:                               Soll_Inter->ag_v  = Soll_IBF->S
C +       oll_AG_V;        
C****************************************************************************
   CODE32:000916   64 D9 43 4E              FLD   FS:DWORD PTR [EBX+78]
   CODE32:00091A   26 D9 59 0C              FSTP  ES:DWORD PTR [ECX+12]
C****************************************************************************
C   513:                               Soll_Inter->aso_v = Soll_IBF->S
C +       oll_ASO_V; 
C****************************************************************************
   CODE32:00091E   64 D9 43 2E              FLD   FS:DWORD PTR [EBX+46]
   CODE32:000922   26 D9 59 04              FSTP  ES:DWORD PTR [ECX+4]
C****************************************************************************
C   514:                               Soll_Inter->asu_v = Soll_IBF->S
C +       oll_ASU_V; 
C****************************************************************************
   CODE32:000926   64 D9 43 42              FLD   FS:DWORD PTR [EBX+66]
   CODE32:00092A   26 D9 59 08              FSTP  ES:DWORD PTR [ECX+8]
C****************************************************************************
C   515:                                                      
C   516:                               Soll_Inter->kwo_n = 0.5F*kw_ia/
C +       hw_ir * (diam_hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AG
C +       R + Ist_IBF->Pos_auf_Mantel)*sin_kw_winkel_halbe); 
C****************************************************************************

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 66

     Interleaved Listing

   CODE32:00092E   D9 85 8C 00 00           FLD   DWORD PTR [EBP+140]
                   00                                                         
   CODE32:000934   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:00093B   64 D8 0B                 FMUL  FS:DWORD PTR [EBX]
   CODE32:00093E   2E D9 05 00 00           FLD   CS:DWORD PTR L20005
                   00 00R                                                     
   CODE32:000945   DE F9                    FDIVR                             
   CODE32:000947   2E D9 05 00 00           FLD   CS:DWORD PTR L20003
                   00 00R                                                     
   CODE32:00094E   64 D8 4B 0C              FMUL  FS:DWORD PTR [EBX+12]
   CODE32:000952   64 D9 43 08              FLD   FS:DWORD PTR [EBX+8]
   CODE32:000956   DE F9                    FDIVR                             
   CODE32:000958   DE C9                    FMUL                              
   CODE32:00095A   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:00095E   64 D9 43 53              FLD   FS:DWORD PTR [EBX+83]
   CODE32:000962   0F B5 55 18              LGS   EDX,PWORD PTR [EBP+24]
   CODE32:000966   65 D8 42 4F              FADD  GS:DWORD PTR [EDX+79]
   CODE32:00096A   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:000971   64 D9 43 10              FLD   FS:DWORD PTR [EBX+16]
   CODE32:000975   DE C9                    FMUL                              
   CODE32:000977   DE F9                    FDIVR                             
   CODE32:000979   26 D9 59 34              FSTP  ES:DWORD PTR [ECX+52]
C****************************************************************************
C   517:                               Soll_Inter->kwu_n = 0.5F*kw_ia/
C +       hw_ir * (diam_hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AG
C +       R + Ist_IBF->Pos_auf_Mantel)*sin_kw_winkel_halbe);
C +            			 
C****************************************************************************
   CODE32:00097D   D9 85 8C 00 00           FLD   DWORD PTR [EBP+140]
                   00                                                         
   CODE32:000983   64 D8 0B                 FMUL  FS:DWORD PTR [EBX]
   CODE32:000986   2E D9 05 00 00           FLD   CS:DWORD PTR L20005
                   00 00R                                                     
   CODE32:00098D   DE F9                    FDIVR                             
   CODE32:00098F   2E D9 05 00 00           FLD   CS:DWORD PTR L20003
                   00 00R                                                     
   CODE32:000996   64 D8 4B 0C              FMUL  FS:DWORD PTR [EBX+12]
   CODE32:00099A   64 D9 43 08              FLD   FS:DWORD PTR [EBX+8]
   CODE32:00099E   DE F9                    FDIVR                             
   CODE32:0009A0   DE C9                    FMUL                              
   CODE32:0009A2   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:0009A6   64 D9 43 53              FLD   FS:DWORD PTR [EBX+83]
   CODE32:0009AA   65 D8 42 4F              FADD  GS:DWORD PTR [EDX+79]
   CODE32:0009AE   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:0009B5   64 D9 43 10              FLD   FS:DWORD PTR [EBX+16]
   CODE32:0009B9   DE C9                    FMUL                              
   CODE32:0009BB   DE F9                    FDIVR                             
C****************************************************************************
C   518:                               
C   519:                               break; 
C****************************************************************************
   CODE32:0009BD   26 D9 59 38              FSTP  ES:DWORD PTR [ECX+56]

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 67

     Interleaved Listing

   CODE32:0009C1   E9 D0 0A 00 00           JMP   NEAR PTR   L8
C****************************************************************************
C   520:   
C   521:   
C   522:   
C   523:                      case 'a':  	 
C   524:                                //_settextposition(9,19); prin
C +       tf("case a"); 
C   525:                               if(FALSE) 
C   526:                               { 
C****************************************************************************
                                  L18:
C****************************************************************************
C   527:                               #ifdef MRAW 
C   528:                                   _settextposition(10,1); pri
C +       ntf("MAPW: RS_Pos %8.1f  Soll_RS_Pos %8.1f RS_Pos_Null%8.1f,
C +        gefilterter %8.1f", Ist_IBF->RS_Pos, Soll_IBF->Soll_RS_Pos,
C +        Ist_IBF->RS_Pos_Null, diam_f);
C +       						 
C   529:                                   _settextposition(13,1); pri
C +       ntf("Dorn%8.1f, Hauptwalze%8.1f, t_Halte%8.1f",diam_dw, diam
C +       _hw, t_Halte); 
C   530:                               #endif 
C   531:                               } 
C   532:                             
C   533:                               Soll_IBF->Soll_AG_V  = 0.0F; 
C****************************************************************************
   CODE32:0009C6   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:0009C9   B8 00 00 00 00           MOV   EAX,0
   CODE32:0009CE   26 89 41 4E              MOV   ES:DWORD PTR [ECX+78],EAX
C****************************************************************************
C   534:                               Soll_IBF->Soll_ASO_V = 5.0F;  
C****************************************************************************
   CODE32:0009D2   B8 00 00 A0 40           MOV   EAX,1084227584
   CODE32:0009D7   26 89 41 2E              MOV   ES:DWORD PTR [ECX+46],EAX
C****************************************************************************
C   535:                               Soll_IBF->Soll_ASU_V = 0.0F; 
C****************************************************************************
   CODE32:0009DB   B8 00 00 00 00           MOV   EAX,0
   CODE32:0009E0   26 89 41 42              MOV   ES:DWORD PTR [ECX+66],EAX
C****************************************************************************
C   536:                                   
C   537:                               // test: Werte befinden sich je
C +       tz in den if-Anweisungen Soll_Inter->rs_v = Soll_RS_V;
C +          
C   538:                               Soll_Inter->ag_v  = Soll_IBF->S
C +       oll_AG_V;        
C****************************************************************************
   CODE32:0009E4   0F B4 5D 08              LFS   EBX,PWORD PTR [EBP+8]
   CODE32:0009E8   64 D9 43 4E              FLD   FS:DWORD PTR [EBX+78]
   CODE32:0009EC   C4 4D 10                 LES   ECX,PWORD PTR [EBP+16]
   CODE32:0009EF   26 D9 59 0C              FSTP  ES:DWORD PTR [ECX+12]
C****************************************************************************
C   539:                               Soll_Inter->aso_v = Soll_IBF->S
C +       oll_ASO_V; 

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 68

     Interleaved Listing

C****************************************************************************
   CODE32:0009F3   64 D9 43 2E              FLD   FS:DWORD PTR [EBX+46]
   CODE32:0009F7   26 D9 59 04              FSTP  ES:DWORD PTR [ECX+4]
C****************************************************************************
C   540:                               Soll_Inter->asu_v = Soll_IBF->S
C +       oll_ASU_V; 
C****************************************************************************
   CODE32:0009FB   64 D9 43 42              FLD   FS:DWORD PTR [EBX+66]
   CODE32:0009FF   26 D9 59 08              FSTP  ES:DWORD PTR [ECX+8]
C****************************************************************************
C   541:                              
C   542:                               Soll_Inter->kwo_n = 0.5F*kw_ia/
C +       hw_ir * (diam_hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AG
C +       R + Ist_IBF->Pos_auf_Mantel)*sin_kw_winkel_halbe); 
C****************************************************************************
   CODE32:000A03   D9 85 8C 00 00           FLD   DWORD PTR [EBP+140]
                   00                                                         
   CODE32:000A09   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:000A10   64 D8 0B                 FMUL  FS:DWORD PTR [EBX]
   CODE32:000A13   2E D9 05 00 00           FLD   CS:DWORD PTR L20005
                   00 00R                                                     
   CODE32:000A1A   DE F9                    FDIVR                             
   CODE32:000A1C   2E D9 05 00 00           FLD   CS:DWORD PTR L20003
                   00 00R                                                     
   CODE32:000A23   64 D8 4B 0C              FMUL  FS:DWORD PTR [EBX+12]
   CODE32:000A27   64 D9 43 08              FLD   FS:DWORD PTR [EBX+8]
   CODE32:000A2B   DE F9                    FDIVR                             
   CODE32:000A2D   DE C9                    FMUL                              
   CODE32:000A2F   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000A33   64 D9 43 53              FLD   FS:DWORD PTR [EBX+83]
   CODE32:000A37   0F B5 55 18              LGS   EDX,PWORD PTR [EBP+24]
   CODE32:000A3B   65 D8 42 4F              FADD  GS:DWORD PTR [EDX+79]
   CODE32:000A3F   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:000A46   64 D9 43 10              FLD   FS:DWORD PTR [EBX+16]
   CODE32:000A4A   DE C9                    FMUL                              
   CODE32:000A4C   DE F9                    FDIVR                             
   CODE32:000A4E   26 D9 59 34              FSTP  ES:DWORD PTR [ECX+52]
C****************************************************************************
C   543:                               Soll_Inter->kwu_n = 0.5F*kw_ia/
C +       hw_ir * (diam_hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AG
C +       R + Ist_IBF->Pos_auf_Mantel)*sin_kw_winkel_halbe);
C +            			 
C****************************************************************************
   CODE32:000A52   D9 85 8C 00 00           FLD   DWORD PTR [EBP+140]
                   00                                                         
   CODE32:000A58   64 D8 0B                 FMUL  FS:DWORD PTR [EBX]
   CODE32:000A5B   2E D9 05 00 00           FLD   CS:DWORD PTR L20005
                   00 00R                                                     
   CODE32:000A62   DE F9                    FDIVR                             
   CODE32:000A64   2E D9 05 00 00           FLD   CS:DWORD PTR L20003
                   00 00R                                                     
   CODE32:000A6B   64 D8 4B 0C              FMUL  FS:DWORD PTR [EBX+12]
   CODE32:000A6F   64 D9 43 08              FLD   FS:DWORD PTR [EBX+8]

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 69

     Interleaved Listing

   CODE32:000A73   DE F9                    FDIVR                             
   CODE32:000A75   DE C9                    FMUL                              
   CODE32:000A77   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000A7B   64 D9 43 53              FLD   FS:DWORD PTR [EBX+83]
   CODE32:000A7F   65 D8 42 4F              FADD  GS:DWORD PTR [EDX+79]
   CODE32:000A83   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:000A8A   64 D9 43 10              FLD   FS:DWORD PTR [EBX+16]
   CODE32:000A8E   DE C9                    FMUL                              
   CODE32:000A90   DE F9                    FDIVR                             
   CODE32:000A92   26 D9 59 38              FSTP  ES:DWORD PTR [ECX+56]
C****************************************************************************
C   544:                             
C   545:                                 
C   546:                               //-----------------------------
C +       -------------------------------------------- 
C   547:                               //---------Anfahrroutine Dorn p
C +       er Kraftregelung----------------------------  
C   548:                               //-----------------------------
C +       -------------------------------------------- 
C   549:                               
C   550:                         if(Radialkraft!= 0.0F)	//aus IBF-Par
C +       a(Radv01) vorgegeben               	   
C   551:                          {  	 
C****************************************************************************
   CODE32:000A96   D9 EE                    FLDZ                              
   CODE32:000A98   D8 5D CC                 FCOMP DWORD PTR [EBP-52]
   CODE32:000A9B   DF E0                    FNSTSW AX                         
   CODE32:000A9D   9E                       SAHF                              
   CODE32:000A9E   0F 84 EA 00 00           JE    NEAR PTR   L19
                   00                                                         
C****************************************************************************
C   552:                                
C   553:                                
C   554:                                  Soll_IBF->Soll_RS_V  = 7.0F;
C +                   // Dorn, Radialschlitten 
C****************************************************************************
   CODE32:000AA4   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000AA7   B8 00 00 E0 40           MOV   EAX,1088421888
   CODE32:000AAC   26 89 41 12              MOV   ES:DWORD PTR [ECX+18],EAX
C****************************************************************************
C   555:                                  Soll_Inter->rs_v = Soll_IBF-
C +       >Soll_RS_V; // Übergebe Gechwindigkeit an Tabelle..... 
C****************************************************************************
   CODE32:000AB0   0F B4 5D 08              LFS   EBX,PWORD PTR [EBP+8]
   CODE32:000AB4   64 D9 43 12              FLD   FS:DWORD PTR [EBX+18]
   CODE32:000AB8   C4 4D 10                 LES   ECX,PWORD PTR [EBP+16]
   CODE32:000ABB   26 D9 19                 FSTP  ES:DWORD PTR [ECX]
C****************************************************************************
C   556:                                 
C   557:                                  Soll_IBF->Soll_ASO_Pos = Ist
C +       _IBF->Start_Ringhoehe + 1.5F; //da Ring gerne klettert, wird
C +        bereits hier ASO zugestellt 
C****************************************************************************
   CODE32:000ABE   2E D9 05 00 00           FLD   CS:DWORD PTR L20011

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 70

     Interleaved Listing

                   00 00R                                                     
   CODE32:000AC5   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000AC9   64 D8 43 5F              FADD  FS:DWORD PTR [EBX+95]
   CODE32:000ACD   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000AD0   26 D9 59 26              FSTP  ES:DWORD PTR [ECX+38]
C****************************************************************************
C   558:  
C +       				 
C   559:                                  if (Ist_IBF->RS_Pos <= (Ist_
C +       IBF->RS_Pos_Null + eps) && t_Halte >= 30) 
C   560:                                   {  
C****************************************************************************
   CODE32:000AD4   D9 45 F4                 FLD   DWORD PTR [EBP-12]
   CODE32:000AD7   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:000ADA   26 D8 41 27              FADD  ES:DWORD PTR [ECX+39]
   CODE32:000ADE   64 D8 5B 0F              FCOMP FS:DWORD PTR [EBX+15]
   CODE32:000AE2   DF E0                    FNSTSW AX                         
   CODE32:000AE4   9E                       SAHF                              
   CODE32:000AE5   72 2A                    JB    NEAR PTR   L20
   CODE32:000AE7   2E D9 05 00 00           FLD   CS:DWORD PTR L20012
                   00 00R                                                     
   CODE32:000AEE   D8 5D FC                 FCOMP DWORD PTR [EBP-4]
   CODE32:000AF1   DF E0                    FNSTSW AX                         
   CODE32:000AF3   9E                       SAHF                              
   CODE32:000AF4   77 1B                    JA    NEAR PTR   L20
C****************************************************************************
C   561:                                     Soll_IBF->Soll_RS_Pos = I
C +       st_IBF->RS_Pos_Null - n; 
C****************************************************************************
   CODE32:000AF6   D9 45 DC                 FLD   DWORD PTR [EBP-36]
   CODE32:000AF9   64 D8 6B 27              FSUBR FS:DWORD PTR [EBX+39]
   CODE32:000AFD   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000B00   26 D9 59 0A              FSTP  ES:DWORD PTR [ECX+10]
C****************************************************************************
C   562:                                      n= n + 0.01F; 
C****************************************************************************
   CODE32:000B04   2E D9 05 00 00           FLD   CS:DWORD PTR L20013
                   00 00R                                                     
   CODE32:000B0B   D8 45 DC                 FADD  DWORD PTR [EBP-36]
   CODE32:000B0E   D9 5D DC                 FSTP  DWORD PTR [EBP-36]
                                  L20:
C****************************************************************************
C   563:                                   } 
C   564:                                //----------------------------
C +       ----------------------------------------------------- 
C   565:                                //   Routine um Radialschlitte
C +       n auf Kraft anzufahren       
C   566:                                //----------------------------
C +       ----------------------------------------------------- 
C   567:                                         
C   568:                                 if ((Ist_IBF->FR_f >= Radialk
C +       raft) && (Ist_IBF->RS_Pos <= Ist_IBF->RS_Pos_Null))  
C   569:                                 {  
C****************************************************************************
   CODE32:000B11   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 71

     Interleaved Listing

   CODE32:000B14   D9 45 CC                 FLD   DWORD PTR [EBP-52]
   CODE32:000B17   26 D8 59 3F              FCOMP ES:DWORD PTR [ECX+63]
   CODE32:000B1B   DF E0                    FNSTSW AX                         
   CODE32:000B1D   9E                       SAHF                              
   CODE32:000B1E   0F 87 72 09 00           JA    NEAR PTR   L8
                   00                                                         
   CODE32:000B24   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000B28   26 D9 41 27              FLD   ES:DWORD PTR [ECX+39]
   CODE32:000B2C   64 D8 5B 0F              FCOMP FS:DWORD PTR [EBX+15]
   CODE32:000B30   DF E0                    FNSTSW AX                         
   CODE32:000B32   9E                       SAHF                              
   CODE32:000B33   0F 82 5D 09 00           JB    NEAR PTR   L8
                   00                                                         
C****************************************************************************
C   570:                                       t_Halte--; 
C****************************************************************************
   CODE32:000B39   2E D9 05 00 00           FLD   CS:DWORD PTR L20004
                   00 00R                                                     
   CODE32:000B40   D8 6D FC                 FSUBR DWORD PTR [EBP-4]
   CODE32:000B43   D9 5D FC                 FSTP  DWORD PTR [EBP-4]
C****************************************************************************
C   571:                                       if (t_Halte == 0) 
C   572:                                       { 
C****************************************************************************
   CODE32:000B46   D9 EE                    FLDZ                              
   CODE32:000B48   D8 5D FC                 FCOMP DWORD PTR [EBP-4]
   CODE32:000B4B   DF E0                    FNSTSW AX                         
   CODE32:000B4D   9E                       SAHF                              
   CODE32:000B4E   0F 85 42 09 00           JNE   NEAR PTR   L8
                   00                                                         
C****************************************************************************
C   573:                                         Soll_IBF->Soll_RS_Pos
C +        = Ist_IBF->RS_Pos; // erreicht 
C****************************************************************************
   CODE32:000B54   64 D9 43 0F              FLD   FS:DWORD PTR [EBX+15]
   CODE32:000B58   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000B5B   26 D9 59 0A              FSTP  ES:DWORD PTR [ECX+10]
C****************************************************************************
C   574:                                         Soll_IBF->Soll_RS_V=
C +       2.0F; 
C****************************************************************************
   CODE32:000B5F   B8 00 00 00 40           MOV   EAX,1073741824
   CODE32:000B64   26 89 41 12              MOV   ES:DWORD PTR [ECX+18],EAX
C****************************************************************************
C   575:                           
C   576:                                         Soll_Inter->rs_v = So
C +       ll_IBF->Soll_RS_V; 
C****************************************************************************
   CODE32:000B68   0F B4 5D 08              LFS   EBX,PWORD PTR [EBP+8]
   CODE32:000B6C   64 D9 43 12              FLD   FS:DWORD PTR [EBX+18]
   CODE32:000B70   C4 4D 10                 LES   ECX,PWORD PTR [EBP+16]
   CODE32:000B73   26 D9 19                 FSTP  ES:DWORD PTR [ECX]
C****************************************************************************
C   577:                                         Soll_IBF->InitAchse =
C +        'b'; 

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 72

     Interleaved Listing

C****************************************************************************
   CODE32:000B76   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000B79   26 C6 41 04 62           MOV   ES:BYTE PTR [ECX+4],98
C****************************************************************************
C   578:                                         zaehler=0.5F; 
C****************************************************************************
   CODE32:000B7E   B8 00 00 00 3F           MOV   EAX,1056964608
   CODE32:000B83   89 45 D4                 MOV   DWORD PTR [EBP-44],EAX
C****************************************************************************
C   579:                                         t_Halte=100.0F;   //z
C +       aehler für Kraftanfahrt des Axialschlittens 
C****************************************************************************
   CODE32:000B86   B8 00 00 C8 42           MOV   EAX,1120403456
C****************************************************************************
C   580:                                       }  
C   581:                                       else   break; 
C****************************************************************************
   CODE32:000B8B   89 45 FC                 MOV   DWORD PTR [EBP-4],EAX
C****************************************************************************
C   582:                                          
C   583:                                 } // end if(FR_f >=...) 
C   584:                                  
C   585:                                 else   break;
C +       //else Soll_RS_Pos = RS_Pos_Null + 0.2F - zaehler; break; 
C****************************************************************************
                                  L19:
C****************************************************************************
C   586:                                   
C   587:                            }//end if(Radialkraft != NULL) 
C   588:                                         
C   589:                                            
C   590:                           if(Radialkraft == 0.0F)	 
C   591:                             { 		 
C****************************************************************************
   CODE32:000B8E   D9 EE                    FLDZ                              
   CODE32:000B90   D8 5D CC                 FCOMP DWORD PTR [EBP-52]
   CODE32:000B93   DF E0                    FNSTSW AX                         
   CODE32:000B95   9E                       SAHF                              
   CODE32:000B96   0F 85 FA 08 00           JNE   NEAR PTR   L8
                   00                                                         
C****************************************************************************
C   592:                                    
C   593:                                    Soll_IBF->Soll_RS_V  = 8.0
C +       F;            // Dorn, Radialschlitten 
C****************************************************************************
   CODE32:000B9C   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000B9F   B8 00 00 00 41           MOV   EAX,1090519040
   CODE32:000BA4   26 89 41 12              MOV   ES:DWORD PTR [ECX+18],EAX
C****************************************************************************
C   594:                                    Soll_Inter->rs_v = Soll_IB
C +       F->Soll_RS_V; //Übergebe Geschwindigkeit an Tabelle.. 
C****************************************************************************
   CODE32:000BA8   0F B4 5D 08              LFS   EBX,PWORD PTR [EBP+8]
   CODE32:000BAC   64 D9 43 12              FLD   FS:DWORD PTR [EBX+18]
   CODE32:000BB0   C4 4D 10                 LES   ECX,PWORD PTR [EBP+16]

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 73

     Interleaved Listing

   CODE32:000BB3   26 D9 19                 FSTP  ES:DWORD PTR [ECX]
C****************************************************************************
C   595:               
C   596:                                    Soll_IBF->Soll_RS_Pos = So
C +       ll_IBF->RS_Pos_Null; 
C****************************************************************************
   CODE32:000BB6   64 D9 43 16              FLD   FS:DWORD PTR [EBX+22]
   CODE32:000BBA   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000BBD   26 D9 59 0A              FSTP  ES:DWORD PTR [ECX+10]
C****************************************************************************
C   597:                                    Soll_IBF->Soll_AG_Pos = Is
C +       t_IBF->Start_Ringhoehe + 1.5F; //da Ring gerne klettert, wir
C +       d bereits hier ASO zugestellt.. 
C****************************************************************************
   CODE32:000BC1   2E D9 05 00 00           FLD   CS:DWORD PTR L20011
                   00 00R                                                     
   CODE32:000BC8   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000BCC   64 D8 43 5F              FADD  FS:DWORD PTR [EBX+95]
   CODE32:000BD0   26 D9 59 4A              FSTP  ES:DWORD PTR [ECX+74]
C****************************************************************************
C   598:    
C   599:                                 if(Ist_IBF->RS_Pos <= Soll_IB
C +       F->Soll_RS_Pos) // Ab hier wird Radialschlitten positioniere
C +       n 
C   600:                                 { 
C****************************************************************************
   CODE32:000BD4   26 D9 41 0A              FLD   ES:DWORD PTR [ECX+10]
   CODE32:000BD8   64 D8 5B 0F              FCOMP FS:DWORD PTR [EBX+15]
   CODE32:000BDC   DF E0                    FNSTSW AX                         
   CODE32:000BDE   9E                       SAHF                              
   CODE32:000BDF   0F 82 B1 08 00           JB    NEAR PTR   L8
                   00                                                         
C****************************************************************************
C   601:                                    Soll_IBF->InitAchse = 'b';
C +        
C****************************************************************************
   CODE32:000BE5   26 C6 41 04 62           MOV   ES:BYTE PTR [ECX+4],98
C****************************************************************************
C   602:                                    zaehler = 0.5F;
C +            //zaehler für Kraftsteuerung des Axialschlitten 
C****************************************************************************
   CODE32:000BEA   B8 00 00 00 3F           MOV   EAX,1056964608
C****************************************************************************
C   603:                                    break; 
C****************************************************************************
   CODE32:000BEF   89 45 D4                 MOV   DWORD PTR [EBP-44],EAX
   CODE32:000BF2   E9 9F 08 00 00           JMP   NEAR PTR   L8
C****************************************************************************
C   604:                                 } 
C   605:   
C   606:                               
C   607:   
C   608:                             break;    
C   609:                            }// end if(Radial== NULL)   
C   610:                         

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 74

     Interleaved Listing

C   611:                          break; // zu case 'a' 
C   612:   
C   613:       
C   614:                    case 'z':   // 2 Umdrehungen abwarten für
C +       gleichmäßiges Profil über Umfang  
C   615:                                t_Halte--; 
C****************************************************************************
                                  L27:
   CODE32:000BF7   2E D9 05 00 00           FLD   CS:DWORD PTR L20004
                   00 00R                                                     
   CODE32:000BFE   D8 6D FC                 FSUBR DWORD PTR [EBP-4]
   CODE32:000C01   D9 5D FC                 FSTP  DWORD PTR [EBP-4]
C****************************************************************************
C   616:                                if (t_Halte <= 0) {Soll_IBF->I
C +       nitAchse = 'b';}; 
C****************************************************************************
   CODE32:000C04   D9 EE                    FLDZ                              
   CODE32:000C06   D8 5D FC                 FCOMP DWORD PTR [EBP-4]
   CODE32:000C09   DF E0                    FNSTSW AX                         
   CODE32:000C0B   9E                       SAHF                              
   CODE32:000C0C   0F 82 84 08 00           JB    NEAR PTR   L8
                   00                                                         
   CODE32:000C12   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000C15   26 C6 41 04 62           MOV   ES:BYTE PTR [ECX+4],98
C****************************************************************************
C   617:                                break;  // zu case 'z' 
C****************************************************************************
   CODE32:000C1A   E9 77 08 00 00           JMP   NEAR PTR   L8
C****************************************************************************
C   618:                     
C   619:                    case 'b':
C +       	 
C   620:                                Soll_Inter->kwo_n =0.5F* kw_ia
C +       /hw_ir * (diam_hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_A
C +       GR + Ist_IBF->Pos_auf_Mantel)*sin_kw_winkel_halbe); 
C****************************************************************************
                                  L29:
   CODE32:000C1F   D9 85 8C 00 00           FLD   DWORD PTR [EBP+140]
                   00                                                         
   CODE32:000C25   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:000C2C   64 D8 0B                 FMUL  FS:DWORD PTR [EBX]
   CODE32:000C2F   2E D9 05 00 00           FLD   CS:DWORD PTR L20005
                   00 00R                                                     
   CODE32:000C36   DE F9                    FDIVR                             
   CODE32:000C38   2E D9 05 00 00           FLD   CS:DWORD PTR L20003
                   00 00R                                                     
   CODE32:000C3F   64 D8 4B 0C              FMUL  FS:DWORD PTR [EBX+12]
   CODE32:000C43   64 D9 43 08              FLD   FS:DWORD PTR [EBX+8]
   CODE32:000C47   DE F9                    FDIVR                             
   CODE32:000C49   DE C9                    FMUL                              
   CODE32:000C4B   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000C4F   64 D9 43 53              FLD   FS:DWORD PTR [EBX+83]
   CODE32:000C53   0F B5 55 18              LGS   EDX,PWORD PTR [EBP+24]
   CODE32:000C57   65 D8 42 4F              FADD  GS:DWORD PTR [EDX+79]

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 75

     Interleaved Listing

   CODE32:000C5B   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:000C62   64 D9 43 10              FLD   FS:DWORD PTR [EBX+16]
   CODE32:000C66   DE C9                    FMUL                              
   CODE32:000C68   DE F9                    FDIVR                             
   CODE32:000C6A   C4 4D 10                 LES   ECX,PWORD PTR [EBP+16]
   CODE32:000C6D   26 D9 59 34              FSTP  ES:DWORD PTR [ECX+52]
C****************************************************************************
C   621:                                Soll_Inter->kwu_n =0.5F* kw_ia
C +       /hw_ir * (diam_hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_A
C +       GR + Ist_IBF->Pos_auf_Mantel)*sin_kw_winkel_halbe);
C +             			 
C****************************************************************************
   CODE32:000C71   D9 85 8C 00 00           FLD   DWORD PTR [EBP+140]
                   00                                                         
   CODE32:000C77   64 D8 0B                 FMUL  FS:DWORD PTR [EBX]
   CODE32:000C7A   2E D9 05 00 00           FLD   CS:DWORD PTR L20005
                   00 00R                                                     
   CODE32:000C81   DE F9                    FDIVR                             
   CODE32:000C83   2E D9 05 00 00           FLD   CS:DWORD PTR L20003
                   00 00R                                                     
   CODE32:000C8A   64 D8 4B 0C              FMUL  FS:DWORD PTR [EBX+12]
   CODE32:000C8E   64 D9 43 08              FLD   FS:DWORD PTR [EBX+8]
   CODE32:000C92   DE F9                    FDIVR                             
   CODE32:000C94   DE C9                    FMUL                              
   CODE32:000C96   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000C9A   64 D9 43 53              FLD   FS:DWORD PTR [EBX+83]
   CODE32:000C9E   65 D8 42 4F              FADD  GS:DWORD PTR [EDX+79]
   CODE32:000CA2   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:000CA9   64 D9 43 10              FLD   FS:DWORD PTR [EBX+16]
   CODE32:000CAD   DE C9                    FMUL                              
   CODE32:000CAF   DE F9                    FDIVR                             
   CODE32:000CB1   26 D9 59 38              FSTP  ES:DWORD PTR [ECX+56]
C****************************************************************************
C   622:                                 
C   623:                                Soll_IBF->Soll_ASO_V = 5.0F; 
C****************************************************************************
   CODE32:000CB5   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000CB8   B8 00 00 A0 40           MOV   EAX,1084227584
   CODE32:000CBD   26 89 41 2E              MOV   ES:DWORD PTR [ECX+46],EAX
C****************************************************************************
C   624:                                Soll_IBF->Soll_ASU_V = 0.0F;
C +         
C****************************************************************************
   CODE32:000CC1   B8 00 00 00 00           MOV   EAX,0
   CODE32:000CC6   26 89 41 42              MOV   ES:DWORD PTR [ECX+66],EAX
C****************************************************************************
C   625:                                Soll_IBF->Soll_RS_V  = 0.0F;
C +             
C****************************************************************************
   CODE32:000CCA   B8 00 00 00 00           MOV   EAX,0
   CODE32:000CCF   26 89 41 12              MOV   ES:DWORD PTR [ECX+18],EAX
C****************************************************************************
C   626:                                Soll_IBF->Soll_AG_V  = 10.0F; 

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 76

     Interleaved Listing

C****************************************************************************
   CODE32:000CD3   B8 00 00 20 41           MOV   EAX,1092616192
   CODE32:000CD8   26 89 41 4E              MOV   ES:DWORD PTR [ECX+78],EAX
C****************************************************************************
C   627:                                 
C   628:                                Soll_Inter->rs_v  = Soll_IBF->
C +       Soll_RS_V;         
C****************************************************************************
   CODE32:000CDC   0F B4 5D 08              LFS   EBX,PWORD PTR [EBP+8]
   CODE32:000CE0   64 D9 43 12              FLD   FS:DWORD PTR [EBX+18]
   CODE32:000CE4   C4 4D 10                 LES   ECX,PWORD PTR [EBP+16]
   CODE32:000CE7   26 D9 19                 FSTP  ES:DWORD PTR [ECX]
C****************************************************************************
C   629:                                Soll_Inter->ag_v  = Soll_IBF->
C +       Soll_AG_V;        
C****************************************************************************
   CODE32:000CEA   64 D9 43 4E              FLD   FS:DWORD PTR [EBX+78]
   CODE32:000CEE   26 D9 59 0C              FSTP  ES:DWORD PTR [ECX+12]
C****************************************************************************
C   630:                                Soll_Inter->aso_v = Soll_IBF->
C +       Soll_ASO_V; 
C****************************************************************************
   CODE32:000CF2   64 D9 43 2E              FLD   FS:DWORD PTR [EBX+46]
   CODE32:000CF6   26 D9 59 04              FSTP  ES:DWORD PTR [ECX+4]
C****************************************************************************
C   631:                                Soll_Inter->asu_v = Soll_IBF->
C +       Soll_ASU_V; 
C****************************************************************************
   CODE32:000CFA   64 D9 43 42              FLD   FS:DWORD PTR [EBX+66]
   CODE32:000CFE   26 D9 59 08              FSTP  ES:DWORD PTR [ECX+8]
C****************************************************************************
C   632:                                  
C   633:                                n=0.1f; 
C****************************************************************************
   CODE32:000D02   B8 CD CC CC 3D           MOV   EAX,1036831949
   CODE32:000D07   89 45 DC                 MOV   DWORD PTR [EBP-36],EAX
C****************************************************************************
C   634:                                Soll_IBF->Soll_AG_Pos = Ist_IB
C +       F->D_Null + diam_hw/2 - Ist_IBF->Pos_auf_Mantel - Ist_IBF->D
C +       el_Kr_AGR ;     // 10 steht für die Variable Pos_auf_Mantel 
C****************************************************************************
   CODE32:000D0A   2E D9 05 00 00           FLD   CS:DWORD PTR L20005
                   00 00R                                                     
   CODE32:000D11   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:000D18   64 D8 3B                 FDIVR FS:DWORD PTR [EBX]
   CODE32:000D1B   65 D8 42 57              FADD  GS:DWORD PTR [EDX+87]
   CODE32:000D1F   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000D23   64 D9 43 53              FLD   FS:DWORD PTR [EBX+83]
   CODE32:000D27   DE E9                    FSUBR                             
   CODE32:000D29   64 D9 43 4F              FLD   FS:DWORD PTR [EBX+79]
   CODE32:000D2D   DE E9                    FSUBR                             
   CODE32:000D2F   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000D32   26 D9 59 4A              FSTP  ES:DWORD PTR [ECX+74]
C****************************************************************************

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 77

     Interleaved Listing

C   635:                                Soll_IBF->InitAchse ='c'; 
C   636:                                 
C   637:                                break; // zu case 'b' 
C****************************************************************************
   CODE32:000D36   26 C6 41 04 63           MOV   ES:BYTE PTR [ECX+4],99
   CODE32:000D3B   E9 56 07 00 00           JMP   NEAR PTR   L8
C****************************************************************************
C   638:   
C   639:                    case 'c':   Soll_IBF->Soll_AG_V  = 10.0F;
C +       							// Ax
C +       ialgerüst  
C****************************************************************************
                                  L30:
   CODE32:000D40   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000D43   B8 00 00 20 41           MOV   EAX,1092616192
   CODE32:000D48   26 89 41 4E              MOV   ES:DWORD PTR [ECX+78],EAX
C****************************************************************************
C   640:                                Soll_IBF->Soll_RS_V  = 0.0F; 
C****************************************************************************
   CODE32:000D4C   B8 00 00 00 00           MOV   EAX,0
   CODE32:000D51   26 89 41 12              MOV   ES:DWORD PTR [ECX+18],EAX
C****************************************************************************
C   641:                                Soll_IBF->Soll_ASO_V = 5.0F;  
C****************************************************************************
   CODE32:000D55   B8 00 00 A0 40           MOV   EAX,1084227584
   CODE32:000D5A   26 89 41 2E              MOV   ES:DWORD PTR [ECX+46],EAX
C****************************************************************************
C   642:                                Soll_IBF->Soll_ASU_V = 0.0F; 
C****************************************************************************
   CODE32:000D5E   B8 00 00 00 00           MOV   EAX,0
   CODE32:000D63   26 89 41 42              MOV   ES:DWORD PTR [ECX+66],EAX
C****************************************************************************
C   643:   
C   644:                                Soll_Inter->rs_v  = Soll_IBF->
C +       Soll_RS_V;         
C****************************************************************************
   CODE32:000D67   0F B4 5D 08              LFS   EBX,PWORD PTR [EBP+8]
   CODE32:000D6B   64 D9 43 12              FLD   FS:DWORD PTR [EBX+18]
   CODE32:000D6F   C4 4D 10                 LES   ECX,PWORD PTR [EBP+16]
   CODE32:000D72   26 D9 19                 FSTP  ES:DWORD PTR [ECX]
C****************************************************************************
C   645:                                Soll_Inter->ag_v  = Soll_IBF->
C +       Soll_AG_V;    
C****************************************************************************
   CODE32:000D75   64 D9 43 4E              FLD   FS:DWORD PTR [EBX+78]
   CODE32:000D79   26 D9 59 0C              FSTP  ES:DWORD PTR [ECX+12]
C****************************************************************************
C   646:                                 
C   647:                                Soll_Inter->aso_v = Soll_IBF->
C +       Soll_ASO_V;      
C****************************************************************************
   CODE32:000D7D   64 D9 43 2E              FLD   FS:DWORD PTR [EBX+46]
   CODE32:000D81   26 D9 59 04              FSTP  ES:DWORD PTR [ECX+4]
C****************************************************************************
C   648:                                Soll_Inter->asu_v = Soll_IBF->

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 78

     Interleaved Listing

C +       Soll_ASU_V; 
C****************************************************************************
   CODE32:000D85   64 D9 43 42              FLD   FS:DWORD PTR [EBX+66]
   CODE32:000D89   26 D9 59 08              FSTP  ES:DWORD PTR [ECX+8]
C****************************************************************************
C   649:                                t_Halte=500; // 200 ms = 2 sec
C +        abwarten 
C****************************************************************************
   CODE32:000D8D   B8 00 00 FA 43           MOV   EAX,1140457472
   CODE32:000D92   89 45 FC                 MOV   DWORD PTR [EBP-4],EAX
C****************************************************************************
C   650:                                 
C   651:                                if (Soll_IBF->Soll_AG_Pos < (I
C +       st_IBF->AG_Pos_Start)) 
C   652:                                { 
C****************************************************************************
   CODE32:000D95   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:000D98   26 D9 41 37              FLD   ES:DWORD PTR [ECX+55]
   CODE32:000D9C   64 D8 5B 4A              FCOMP FS:DWORD PTR [EBX+74]
   CODE32:000DA0   DF E0                    FNSTSW AX                         
   CODE32:000DA2   9E                       SAHF                              
   CODE32:000DA3   76 21                    JBE   NEAR PTR   L31
C****************************************************************************
C   653:                                   if (Ist_IBF->AG_Pos <= (Sol
C +       l_IBF->Soll_AG_Pos + eps))  
C   654:                                   { 
C****************************************************************************
   CODE32:000DA5   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000DA9   D9 45 F4                 FLD   DWORD PTR [EBP-12]
   CODE32:000DAC   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000DAF   26 D8 41 4A              FADD  ES:DWORD PTR [ECX+74]
   CODE32:000DB3   64 D8 5B 13              FCOMP FS:DWORD PTR [EBX+19]
   CODE32:000DB7   DF E0                    FNSTSW AX                         
   CODE32:000DB9   9E                       SAHF                              
   CODE32:000DBA   72 2B                    JB    NEAR PTR   L34
C****************************************************************************
C   655:                                      Soll_IBF->InitAchse = 'd
C +       '; 
C   656:                                      break; 
C****************************************************************************
   CODE32:000DBC   26 C6 41 04 64           MOV   ES:BYTE PTR [ECX+4],100
   CODE32:000DC1   E9 D0 06 00 00           JMP   NEAR PTR   L8
C****************************************************************************
C   657:                                   } 
C   658:                                   else  
C   659:                                   { 
C   660:                                      #ifdef MRAW 
C   661:                                         _settextposition(9,1)
C +       ; 
C   662:                                         printf(" AG_Pos mit P
C +       LUS eps "); 
C   663:                                      #endif 
C   664:                                   }//end if 
C   665:                                }//end if 
C   666:                                else

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 79

     Interleaved Listing

C +                             
C   667:                                { 
C****************************************************************************
                                  L31:
C****************************************************************************
C   668:                                   if (Ist_IBF->AG_Pos >= (Sol
C +       l_IBF->Soll_AG_Pos - eps))  
C   669:                                   { 
C****************************************************************************
   CODE32:000DC6   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000DCA   D9 45 F4                 FLD   DWORD PTR [EBP-12]
   CODE32:000DCD   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000DD0   26 D8 69 4A              FSUBR ES:DWORD PTR [ECX+74]
   CODE32:000DD4   64 D8 5B 13              FCOMP FS:DWORD PTR [EBX+19]
   CODE32:000DD8   DF E0                    FNSTSW AX                         
   CODE32:000DDA   9E                       SAHF                              
   CODE32:000DDB   77 0A                    JA    NEAR PTR   L34
C****************************************************************************
C   670:                                      Soll_IBF->InitAchse = 'd
C +       '; 
C   671:                                      break; 
C****************************************************************************
   CODE32:000DDD   26 C6 41 04 64           MOV   ES:BYTE PTR [ECX+4],100
   CODE32:000DE2   E9 AF 06 00 00           JMP   NEAR PTR   L8
C****************************************************************************
C   672:                                   } 
C   673:                                   else  
C   674:                                   { 
C****************************************************************************
                                  L34:
C****************************************************************************
C   675:                                      #ifdef MRAW    
C   676:                                         _settextposition(9,1)
C +       ; 
C   677:                                         printf(" AG_Pos mit M
C +       INUS eps"); 
C   678:                                      #endif 
C   679:                                   } 
C   680:                                }//end else 
C   681:   
C   682:                                Soll_IBF->InitAchse = 'd'; //
C +       AG wird nicht positioniert darum rein    
C****************************************************************************
   CODE32:000DE7   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
C****************************************************************************
C   683:                                break; // zu case 'c' 
C****************************************************************************
   CODE32:000DEA   26 C6 41 04 64           MOV   ES:BYTE PTR [ECX+4],100
   CODE32:000DEF   E9 A2 06 00 00           JMP   NEAR PTR   L8
C****************************************************************************
C   684:                     
C   685:                    case 'd':   //Hier die Position des oberen
C +        Axialschlittens programmieren.... 
C   686:                                 
C   687:                                Soll_IBF->Soll_ASO_V = 5.0F;

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 80

     Interleaved Listing

C +         
C****************************************************************************
                                  L37:
   CODE32:000DF4   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000DF7   B8 00 00 A0 40           MOV   EAX,1084227584
   CODE32:000DFC   26 89 41 2E              MOV   ES:DWORD PTR [ECX+46],EAX
C****************************************************************************
C   688:                                Soll_IBF->Soll_ASU_V = 1.0F; 
C****************************************************************************
   CODE32:000E00   B8 00 00 80 3F           MOV   EAX,1065353216
   CODE32:000E05   26 89 41 42              MOV   ES:DWORD PTR [ECX+66],EAX
C****************************************************************************
C   689:                                Soll_IBF->Soll_RS_V  = 0.0F; 
C****************************************************************************
   CODE32:000E09   B8 00 00 00 00           MOV   EAX,0
   CODE32:000E0E   26 89 41 12              MOV   ES:DWORD PTR [ECX+18],EAX
C****************************************************************************
C   690:                                Soll_IBF->Soll_AG_V  = 0.0F;  
C****************************************************************************
   CODE32:000E12   B8 00 00 00 00           MOV   EAX,0
   CODE32:000E17   26 89 41 4E              MOV   ES:DWORD PTR [ECX+78],EAX
C****************************************************************************
C   691:   
C   692:                                Soll_Inter->rs_v  = Soll_IBF->
C +       Soll_RS_V;        
C****************************************************************************
   CODE32:000E1B   0F B4 5D 08              LFS   EBX,PWORD PTR [EBP+8]
   CODE32:000E1F   64 D9 43 12              FLD   FS:DWORD PTR [EBX+18]
   CODE32:000E23   C4 4D 10                 LES   ECX,PWORD PTR [EBP+16]
   CODE32:000E26   26 D9 19                 FSTP  ES:DWORD PTR [ECX]
C****************************************************************************
C   693:                                Soll_Inter->ag_v  = Soll_IBF->
C +       Soll_AG_V;        
C****************************************************************************
   CODE32:000E29   64 D9 43 4E              FLD   FS:DWORD PTR [EBX+78]
   CODE32:000E2D   26 D9 59 0C              FSTP  ES:DWORD PTR [ECX+12]
C****************************************************************************
C   694:                                Soll_Inter->aso_v = Soll_IBF->
C +       Soll_ASO_V;      
C****************************************************************************
   CODE32:000E31   64 D9 43 2E              FLD   FS:DWORD PTR [EBX+46]
   CODE32:000E35   26 D9 59 04              FSTP  ES:DWORD PTR [ECX+4]
C****************************************************************************
C   695:                                Soll_Inter->asu_v = Soll_IBF->
C +       Soll_ASU_V;      
C****************************************************************************
   CODE32:000E39   64 D9 43 42              FLD   FS:DWORD PTR [EBX+66]
   CODE32:000E3D   26 D9 59 08              FSTP  ES:DWORD PTR [ECX+8]
C****************************************************************************
C   696:                                 
C   697:                                Soll_IBF->Soll_ASU_Pos = 0.0F;
C +         
C****************************************************************************
   CODE32:000E41   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000E44   B8 00 00 00 00           MOV   EAX,0

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 81

     Interleaved Listing

   CODE32:000E49   26 89 41 3E              MOV   ES:DWORD PTR [ECX+62],EAX
C****************************************************************************
C   698:                                                      
C   699:                                Afpos_dw = Ist_IBF->RS_Pos;
C +         // Variable in der aktuelle Dornposition definiert ist nac
C +       hdem Dorn positioniert worden ist 
C****************************************************************************
   CODE32:000E4D   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:000E50   26 D9 41 0F              FLD   ES:DWORD PTR [ECX+15]
   CODE32:000E54   D9 5D D0                 FSTP  DWORD PTR [EBP-48]
C****************************************************************************
C   700:                                //    t_warte=10*diam_f/(diam_
C +       hw*f_H); // Hier t_warte definiert-> wird in case 1 benötigt
C +        
C   701:                                //----------------------------
C +       ---------------------------------------------------------- 
C   702:                                //----------------Anfahren des
C +        Axialschlittens auf Kraft-------------------------------- 
C   703:                                //----------------------------
C +       ----------------------------------------------------------  
C   704:                                if(Axialkraft != 0.0F)  //wird
C +        nur durchlaufen, wenn Kraft angegeben 
C   705:                                { 
C****************************************************************************
   CODE32:000E57   D9 EE                    FLDZ                              
   CODE32:000E59   D8 5D F0                 FCOMP DWORD PTR [EBP-16]
   CODE32:000E5C   DF E0                    FNSTSW AX                         
   CODE32:000E5E   9E                       SAHF                              
   CODE32:000E5F   74 67                    JE    NEAR PTR   L38
C****************************************************************************
C   706:                                   #ifdef MRAW 
C   707:                                      _settextposition(2,10); 
C   708:                                      printf("ASO anhand Kraft
C +       "); 
C   709:                                   #endif 
C   710:                                   Soll_IBF->Soll_ASO_Pos = Is
C +       t_IBF->Start_Ringhoehe - 10.0F;    //!!statt Zaehler wurde a
C +       ls Wert 10 (mm) eingesetzt;;;zaehler wurde in case'a' auf de
C +       n Wert 0.5F gesetzt 
C****************************************************************************
   CODE32:000E61   2E D9 05 00 00           FLD   CS:DWORD PTR L20014
                   00 00R                                                     
   CODE32:000E68   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000E6C   64 D8 6B 5F              FSUBR FS:DWORD PTR [EBX+95]
   CODE32:000E70   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000E73   26 D9 59 26              FSTP  ES:DWORD PTR [ECX+38]
C****************************************************************************
C   711:                                    
C   712:                                   if (Ist_IBF->FA_f >= Axialk
C +       raft  || Ist_IBF->FA_f == Axialkraft /*|| t_Halte == 0*/) //
C +       JETZT MIT TEST TEST TEST....wirkende Axialkraft1 ist gemitte
C +       lte AG-Kraft durch Eigengewicht !! 
C   713:                                   { 
C****************************************************************************
   CODE32:000E77   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 82

     Interleaved Listing

   CODE32:000E7A   D9 45 F0                 FLD   DWORD PTR [EBP-16]
   CODE32:000E7D   26 D8 59 43              FCOMP ES:DWORD PTR [ECX+67]
   CODE32:000E81   DF E0                    FNSTSW AX                         
   CODE32:000E83   9E                       SAHF                              
   CODE32:000E84   76 0C                    JBE   NEAR PTR   L20015
   CODE32:000E86   D9 45 F0                 FLD   DWORD PTR [EBP-16]
   CODE32:000E89   26 D8 59 43              FCOMP ES:DWORD PTR [ECX+67]
   CODE32:000E8D   DF E0                    FNSTSW AX                         
   CODE32:000E8F   9E                       SAHF                              
   CODE32:000E90   75 36                    JNE   NEAR PTR   L38
                                  L20015:
C****************************************************************************
C   714:                                      #ifdef MRAW 
C   715:                                  	      _settextpositio
C +       n(2,10); 
C   716:                                         printf("ASO hat Posit
C +       ion durch Kraft erreicht FA: %8.1f-eingabe-: %8.1f", Ist_IBF
C +       ->FA, Axialkraft); 
C   717:                                      #endif 
C   718:                                      Soll_IBF->Soll_ASO_Pos =
C +        Ist_IBF->ASO_Pos; 
C****************************************************************************
   CODE32:000E92   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000E96   64 D9 43 17              FLD   FS:DWORD PTR [EBX+23]
   CODE32:000E9A   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000E9D   26 D9 59 26              FSTP  ES:DWORD PTR [ECX+38]
C****************************************************************************
C   719:                                 
C   720:                                      Soll_IBF->Soll_ASO_V   =
C +        1.0F; 
C****************************************************************************
   CODE32:000EA1   B8 00 00 80 3F           MOV   EAX,1065353216
   CODE32:000EA6   26 89 41 2E              MOV   ES:DWORD PTR [ECX+46],EAX
C****************************************************************************
C   721:                                      Soll_Inter->aso_v      =
C +        Soll_IBF->Soll_ASO_V; 
C****************************************************************************
   CODE32:000EAA   0F B4 5D 08              LFS   EBX,PWORD PTR [EBP+8]
   CODE32:000EAE   64 D9 43 2E              FLD   FS:DWORD PTR [EBX+46]
   CODE32:000EB2   C4 4D 10                 LES   ECX,PWORD PTR [EBP+16]
   CODE32:000EB5   26 D9 59 04              FSTP  ES:DWORD PTR [ECX+4]
C****************************************************************************
C   722:                                      Soll_IBF->InitAchse    =
C +        ' '; 
C****************************************************************************
   CODE32:000EB9   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000EBC   26 C6 41 04 20           MOV   ES:BYTE PTR [ECX+4],32
C****************************************************************************
C   723:                                      Soll_IBF->Profilflag   =
C +        1;  
C****************************************************************************
   CODE32:000EC1   26 C7 01 01 00           MOV   ES:DWORD PTR [ECX],1
                   00 00                                                      
                                  L38:
C****************************************************************************

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 83

     Interleaved Listing

C   724:                                   }// end if(uk >=0) 
C   725:                                 
C   726:                                }//end if(Axialkraft!=NULL)  
C   727:                                 
C   728:                                 
C   729:                                if(Axialkraft == NULL) //wird
C +       durchlaufen, wenn ohne Kraftsteuerung angefahren wird 
C   730:                                {  
C****************************************************************************
   CODE32:000EC8   D9 EE                    FLDZ                              
   CODE32:000ECA   D8 5D F0                 FCOMP DWORD PTR [EBP-16]
   CODE32:000ECD   DF E0                    FNSTSW AX                         
   CODE32:000ECF   9E                       SAHF                              
   CODE32:000ED0   0F 85 C0 05 00           JNE   NEAR PTR   L8
                   00                                                         
C****************************************************************************
C   731:                                   Soll_IBF->Soll_ASO_Pos = Is
C +       t_IBF->Start_Ringhoehe; 
C****************************************************************************
   CODE32:000ED6   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000EDA   64 D9 43 5F              FLD   FS:DWORD PTR [EBX+95]
   CODE32:000EDE   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000EE1   26 D9 59 26              FSTP  ES:DWORD PTR [ECX+38]
C****************************************************************************
C   732:                                   if (Ist_IBF->ASO_Pos <= (So
C +       ll_IBF->Soll_ASO_Pos + eps) || Ist_IBF->ASO_Pos <= (Soll_IBF
C +       ->Soll_ASO_Pos - eps) )  
C   733:                                   {Soll_IBF->InitAchse = ' ';
C +        Soll_IBF->Profilflag = 1; break;} // Hier IBF_Allgemein.IBF
C +       _Allgemein.IBF_Allgemein.Profilflag bestimmen wie es weiter
C +       geht  
C****************************************************************************
   CODE32:000EE5   D9 45 F4                 FLD   DWORD PTR [EBP-12]
   CODE32:000EE8   26 D8 41 26              FADD  ES:DWORD PTR [ECX+38]
   CODE32:000EEC   64 D8 5B 17              FCOMP FS:DWORD PTR [EBX+23]
   CODE32:000EF0   DF E0                    FNSTSW AX                         
   CODE32:000EF2   9E                       SAHF                              
   CODE32:000EF3   73 14                    JAE   NEAR PTR   L20016
   CODE32:000EF5   D9 45 F4                 FLD   DWORD PTR [EBP-12]
   CODE32:000EF8   26 D8 69 26              FSUBR ES:DWORD PTR [ECX+38]
   CODE32:000EFC   64 D8 5B 17              FCOMP FS:DWORD PTR [EBX+23]
   CODE32:000F00   DF E0                    FNSTSW AX                         
   CODE32:000F02   9E                       SAHF                              
   CODE32:000F03   0F 82 8D 05 00           JB    NEAR PTR   L8
                   00                                                         
                                  L20016:
   CODE32:000F09   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000F0C   26 C6 41 04 20           MOV   ES:BYTE PTR [ECX+4],32
   CODE32:000F11   26 C7 01 01 00           MOV   ES:DWORD PTR [ECX],1
                   00 00                                                      
   CODE32:000F18   E9 79 05 00 00           JMP   NEAR PTR   L8
C****************************************************************************
C   734:                                } 
C   735:  
C +       		 

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 84

     Interleaved Listing

C   736:                                break;//break 
C   737:                                                   
C   738:                    default:     
C   739:                                #ifdef MRAW 
C   740:                                   _settextposition(9,1); 
C   741:                                   printf(" InitAchse: %d - Wa
C +       rum default ?!? ", Ist_IBF->InitAchse); 
C   742:                                #endif    
C   743:                                break; 
C   744:                                 
C   745:                    } //	Klammer zu: switch (InitAchse) von ca
C +       se0  
C   746:                    break; 
C   747:      
C   748:      
C   749:           case 1:     //Vergleich der eingegebenen Wandstärke
C +        und der, per Kraftsteuerung angefahrenen Wandstärke 
C   750:                       // Routine, ob Schalter gesetzt ist ode
C +       r nicht -> Schalter (0,1,2) 
C   751:                        
C   752:                       s_ist = Afpos_dw - ((186.9F + Ist_IBF->
C +       Werkzeugdurchmesser)/2.0F); 
C****************************************************************************
                                  L43:
   CODE32:000F1D   2E D9 05 00 00           FLD   CS:DWORD PTR L20020
                   00 00R                                                     
   CODE32:000F24   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:000F27   26 D8 41 63              FADD  ES:DWORD PTR [ECX+99]
   CODE32:000F2B   2E D9 05 00 00           FLD   CS:DWORD PTR L20005
                   00 00R                                                     
   CODE32:000F32   DE F9                    FDIVR                             
   CODE32:000F34   D8 6D D0                 FSUBR DWORD PTR [EBP-48]
   CODE32:000F37   D9 5D A8                 FSTP  DWORD PTR [EBP-88]
C****************************************************************************
C   753:                       Soll_IBF->Soll_ASO_Pos_alt = Ist_IBF->A
C +       SO_Pos;      
C****************************************************************************
   CODE32:000F3A   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000F3E   64 D9 43 17              FLD   FS:DWORD PTR [EBX+23]
   CODE32:000F42   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000F45   26 D9 59 2A              FSTP  ES:DWORD PTR [ECX+42]
C****************************************************************************
C   754:                       s_f_alt = Ist_IBF->s_f; // dem Wert s_f
C +       _alt wird hier bereits der erste Wert vorgegeben, damit in c
C +       ase 11/12 keine Division durch NULL stattfindet....  
C****************************************************************************
   CODE32:000F49   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:000F4C   26 D9 41 47              FLD   ES:DWORD PTR [ECX+71]
   CODE32:000F50   D9 5D F8                 FSTP  DWORD PTR [EBP-8]
C****************************************************************************
C   755:                       #ifdef MRAW 
C   756:                          _settextposition(6,10); 
C   757:                          printf("s_ist %8.1f  s_gemessen %8.1
C +       f", s_ist, Ist_IBF->Wandstaerke_Null); 
C   758:                       #endif 

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 85

     Interleaved Listing

C   759:                        
C   760:                       if(Ist_IBF->Schalter_Kont_DisKo == 0)
C +       // kontinuierlicher Vorschub 
C   761:                       {Soll_IBF->Profilflag = 11; s_ist = 0;
C +       break;} 
C****************************************************************************
   CODE32:000F53   D9 EE                    FLDZ                              
   CODE32:000F55   26 D8 59 67              FCOMP ES:DWORD PTR [ECX+103]
   CODE32:000F59   DF E0                    FNSTSW AX                         
   CODE32:000F5B   9E                       SAHF                              
   CODE32:000F5C   75 17                    JNE   NEAR PTR   L44
   CODE32:000F5E   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000F61   26 C7 01 0B 00           MOV   ES:DWORD PTR [ECX],11
                   00 00                                                      
   CODE32:000F68   B8 00 00 00 00           MOV   EAX,0
   CODE32:000F6D   89 45 A8                 MOV   DWORD PTR [EBP-88],EAX
   CODE32:000F70   E9 21 05 00 00           JMP   NEAR PTR   L8
                                  L44:
C****************************************************************************
C   762:                        
C   763:                       if (Ist_IBF->Schalter_Kont_DisKo == 1)
C +       //diskontinuierlicher Vorschub (eps über Weg) 
C   764:                       {Soll_IBF->Profilflag = 12; Soll_IBF->S
C +       oll_RS_Pos = Ist_IBF->RS_Pos - 0.5f; break;} 
C****************************************************************************
   CODE32:000F75   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:000F78   2E D9 05 00 00           FLD   CS:DWORD PTR L20004
                   00 00R                                                     
   CODE32:000F7F   26 D8 59 67              FCOMP ES:DWORD PTR [ECX+103]
   CODE32:000F83   DF E0                    FNSTSW AX                         
   CODE32:000F85   9E                       SAHF                              
   CODE32:000F86   75 22                    JNE   NEAR PTR   L46
   CODE32:000F88   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000F8B   26 C7 01 0C 00           MOV   ES:DWORD PTR [ECX],12
                   00 00                                                      
   CODE32:000F92   2E D9 05 00 00           FLD   CS:DWORD PTR L20003
                   00 00R                                                     
   CODE32:000F99   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000F9D   64 D8 6B 0F              FSUBR FS:DWORD PTR [EBX+15]
   CODE32:000FA1   26 D9 59 0A              FSTP  ES:DWORD PTR [ECX+10]
   CODE32:000FA5   E9 EC 04 00 00           JMP   NEAR PTR   L8
                                  L46:
C****************************************************************************
C   765:                        
C   766:                       if (Ist_IBF->Schalter_Kont_DisKo == 2)
C +       //diskontinuierlicher Vorschub (eps über Geschwindigkeit) 
C   767:                       { 
C****************************************************************************
   CODE32:000FAA   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:000FAD   2E D9 05 00 00           FLD   CS:DWORD PTR L20005
                   00 00R                                                     
   CODE32:000FB4   26 D8 59 67              FCOMP ES:DWORD PTR [ECX+103]
   CODE32:000FB8   DF E0                    FNSTSW AX                         
   CODE32:000FBA   9E                       SAHF                              
   CODE32:000FBB   0F 85 D5 04 00           JNE   NEAR PTR   L8

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 86

     Interleaved Listing

                   00                                                         
C****************************************************************************
C   768:                          Soll_IBF->Profilflag =13;  
C****************************************************************************
   CODE32:000FC1   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000FC4   26 C7 01 0D 00           MOV   ES:DWORD PTR [ECX],13
                   00 00                                                      
C****************************************************************************
C   769:                          t_dis_h = 10*(Ist_IBF->D_Null/(diam_
C +       hw*f_H)); //Zeit für x Umdrehungen bei denen der Dorn in den
C +        Ring vorfährt bis Schnabel-Formel greift 
C****************************************************************************
   CODE32:000FCB   D9 45 E4                 FLD   DWORD PTR [EBP-28]
   CODE32:000FCE   C4 8D 34 03 00           LES   ECX,PWORD PTR [EBP+820]
                   00                                                         
   CODE32:000FD4   26 D8 09                 FMUL  ES:DWORD PTR [ECX]
   CODE32:000FD7   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000FDB   64 D8 7B 57              FDIVR FS:DWORD PTR [EBX+87]
   CODE32:000FDF   2E D9 05 00 00           FLD   CS:DWORD PTR L20014
                   00 00R                                                     
   CODE32:000FE6   DE C9                    FMUL                              
C****************************************************************************
C   770:                          break; 
C****************************************************************************
   CODE32:000FE8   D9 5D E0                 FSTP  DWORD PTR [EBP-32]
   CODE32:000FEB   E9 A6 04 00 00           JMP   NEAR PTR   L8
C****************************************************************************
C   771:                       } 
C   772:                        
C   773:                       else 
C   774:                       { 
C   775:                          #ifdef MRAW 
C   776:                             _settextposition(10,15); 
C   777:                             printf("Fehler in Schalterstellun
C +       g"); 
C   778:                          #endif 
C   779:                       } 
C   780:                       break; 
C   781:                       
C   782:          
C   783:         case 11:      //Kontinuierlcher Walzungsroutine 
C   784:                       Soll_Inter->kwo_n = kw_ia/hw_ir * (diam
C +       _hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AGR + Ist_IBF->
C +       Pos_auf_Mantel)*sin_kw_winkel_halbe); 
C****************************************************************************
                                  L49:
   CODE32:000FF0   D9 85 8C 00 00           FLD   DWORD PTR [EBP+140]
                   00                                                         
   CODE32:000FF6   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:000FFD   64 D8 0B                 FMUL  FS:DWORD PTR [EBX]
   CODE32:001000   2E D9 05 00 00           FLD   CS:DWORD PTR L20005
                   00 00R                                                     
   CODE32:001007   DE F9                    FDIVR                             
   CODE32:001009   64 D9 43 08              FLD   FS:DWORD PTR [EBX+8]

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 87

     Interleaved Listing

   CODE32:00100D   0F B5 95 34 03           LGS   EDX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:001014   65 D8 7A 0C              FDIVR GS:DWORD PTR [EDX+12]
   CODE32:001018   DE C9                    FMUL                              
   CODE32:00101A   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:00101E   64 D9 43 53              FLD   FS:DWORD PTR [EBX+83]
   CODE32:001022   0F B5 55 18              LGS   EDX,PWORD PTR [EBP+24]
   CODE32:001026   65 D8 42 4F              FADD  GS:DWORD PTR [EDX+79]
   CODE32:00102A   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:001031   64 D9 43 10              FLD   FS:DWORD PTR [EBX+16]
   CODE32:001035   DE C9                    FMUL                              
   CODE32:001037   DE F9                    FDIVR                             
   CODE32:001039   C4 4D 10                 LES   ECX,PWORD PTR [EBP+16]
   CODE32:00103C   26 D9 59 34              FSTP  ES:DWORD PTR [ECX+52]
C****************************************************************************
C   785:                       Soll_Inter->kwu_n = kw_ia/hw_ir * (diam
C +       _hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AGR + Ist_IBF->
C +       Pos_auf_Mantel)*sin_kw_winkel_halbe);
C +       	 
C****************************************************************************
   CODE32:001040   D9 85 8C 00 00           FLD   DWORD PTR [EBP+140]
                   00                                                         
   CODE32:001046   64 D8 0B                 FMUL  FS:DWORD PTR [EBX]
   CODE32:001049   2E D9 05 00 00           FLD   CS:DWORD PTR L20005
                   00 00R                                                     
   CODE32:001050   DE F9                    FDIVR                             
   CODE32:001052   64 D9 43 08              FLD   FS:DWORD PTR [EBX+8]
   CODE32:001056   0F B5 95 34 03           LGS   EDX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:00105D   65 D8 7A 0C              FDIVR GS:DWORD PTR [EDX+12]
   CODE32:001061   DE C9                    FMUL                              
   CODE32:001063   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:001067   64 D9 43 53              FLD   FS:DWORD PTR [EBX+83]
   CODE32:00106B   0F B5 55 18              LGS   EDX,PWORD PTR [EBP+24]
   CODE32:00106F   65 D8 42 4F              FADD  GS:DWORD PTR [EDX+79]
   CODE32:001073   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:00107A   64 D9 43 10              FLD   FS:DWORD PTR [EBX+16]
   CODE32:00107E   DE C9                    FMUL                              
   CODE32:001080   DE F9                    FDIVR                             
   CODE32:001082   26 D9 59 38              FSTP  ES:DWORD PTR [ECX+56]
C****************************************************************************
C   786:                        
C   787:                       Soll_IBF->Soll_RS_V  = Soll_IBF->Vorsch
C +       ubgeschw_Dw;    // Dorn, Radialschlitten    
C****************************************************************************
   CODE32:001086   0F B4 5D 08              LFS   EBX,PWORD PTR [EBP+8]
   CODE32:00108A   64 D9 43 6E              FLD   FS:DWORD PTR [EBX+110]
   CODE32:00108E   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:001091   26 D9 59 12              FSTP  ES:DWORD PTR [ECX+18]
C****************************************************************************
C   788:                       Soll_IBF->Soll_ASO_V = 100.0F; 
C****************************************************************************
   CODE32:001095   B8 00 00 C8 42           MOV   EAX,1120403456

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 88

     Interleaved Listing

   CODE32:00109A   26 89 41 2E              MOV   ES:DWORD PTR [ECX+46],EAX
C****************************************************************************
C   789:                       Soll_Inter->rs_v = Soll_IBF->Soll_RS_V;
C +                
C****************************************************************************
   CODE32:00109E   64 D9 43 12              FLD   FS:DWORD PTR [EBX+18]
   CODE32:0010A2   C4 4D 10                 LES   ECX,PWORD PTR [EBP+16]
   CODE32:0010A5   26 D9 19                 FSTP  ES:DWORD PTR [ECX]
C****************************************************************************
C   790:                       Soll_Inter->ag_v = Soll_IBF->Soll_ASO_V
C +       ; 
C****************************************************************************
   CODE32:0010A8   64 D9 43 2E              FLD   FS:DWORD PTR [EBX+46]
   CODE32:0010AC   26 D9 59 0C              FSTP  ES:DWORD PTR [ECX+12]
C****************************************************************************
C   791:                       Soll_Inter->aso_pos = 143.0F; 
C****************************************************************************
   CODE32:0010B0   B8 00 00 0F 43           MOV   EAX,1125056512
   CODE32:0010B5   26 89 41 1C              MOV   ES:DWORD PTR [ECX+28],EAX
C****************************************************************************
C   792:                       if(Soll_IBF->Steg != 0)   // Abfrage ob
C +        Stegstärke angegeben 
C   793:                       { 
C****************************************************************************
   CODE32:0010B9   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:0010BC   D9 EE                    FLDZ                              
   CODE32:0010BE   26 D8 59 72              FCOMP ES:DWORD PTR [ECX+114]
   CODE32:0010C2   DF E0                    FNSTSW AX                         
   CODE32:0010C4   9E                       SAHF                              
   CODE32:0010C5   74 2B                    JE    NEAR PTR   L50
C****************************************************************************
C   794:                       Soll_IBF->Soll_RS_Pos = (diam_hw + Ist_
C +       IBF->Werkzeugdurchmesser)/2 + Soll_IBF->Steg; 
C****************************************************************************
   CODE32:0010C7   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:0010CB   64 D9 43 63              FLD   FS:DWORD PTR [EBX+99]
   CODE32:0010CF   0F B5 95 34 03           LGS   EDX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:0010D6   65 D8 02                 FADD  GS:DWORD PTR [EDX]
   CODE32:0010D9   2E D9 05 00 00           FLD   CS:DWORD PTR L20005
                   00 00R                                                     
   CODE32:0010E0   DE F9                    FDIVR                             
   CODE32:0010E2   0F B5 55 08              LGS   EDX,PWORD PTR [EBP+8]
   CODE32:0010E6   65 D9 42 72              FLD   GS:DWORD PTR [EDX+114]
   CODE32:0010EA   DE C1                    FADD                              
C****************************************************************************
C   795:                       
C   796:                       } 
C   797:                       else Soll_IBF->Soll_RS_Pos = Afpos_dw -
C +        Soll_IBF->delta_s;  //Afpos_dw wird in case 0 -> case 'a' g
C +       esetzt..... 
C****************************************************************************
   CODE32:0010EC   26 D9 59 0A              FSTP  ES:DWORD PTR [ECX+10]
   CODE32:0010F0   EB 12                    JMP   NEAR PTR   L51
                                  L50:

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 89

     Interleaved Listing

   CODE32:0010F2   0F B4 5D 08              LFS   EBX,PWORD PTR [EBP+8]
   CODE32:0010F6   64 D9 43 6A              FLD   FS:DWORD PTR [EBX+106]
   CODE32:0010FA   D8 6D D0                 FSUBR DWORD PTR [EBP-48]
   CODE32:0010FD   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:001100   26 D9 59 0A              FSTP  ES:DWORD PTR [ECX+10]
                                  L51:
C****************************************************************************
C   798:                        
C   799:                       Soll_IBF->Soll_RS_Pos = Ist_IBF->RS_Pos
C +       ; 
C****************************************************************************
   CODE32:001104   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:001108   64 D9 43 0F              FLD   FS:DWORD PTR [EBX+15]
   CODE32:00110C   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:00110F   26 D9 59 0A              FSTP  ES:DWORD PTR [ECX+10]
C****************************************************************************
C   800:                       
C   801:                       if(Ist_IBF->RS_Pos <= Soll_IBF->Soll_RS
C +       _Pos || Ist_IBF->RS_Pos <= (Soll_IBF->Soll_RS_Pos + eps) ||
C +       Ist_IBF->RS_Pos <= (Soll_IBF->Soll_RS_Pos - eps)) 
C   802:                       {	 
C****************************************************************************
   CODE32:001113   26 D9 41 0A              FLD   ES:DWORD PTR [ECX+10]
   CODE32:001117   64 D8 5B 0F              FCOMP FS:DWORD PTR [EBX+15]
   CODE32:00111B   DF E0                    FNSTSW AX                         
   CODE32:00111D   9E                       SAHF                              
   CODE32:00111E   73 20                    JAE   NEAR PTR   L20021
   CODE32:001120   D9 45 F4                 FLD   DWORD PTR [EBP-12]
   CODE32:001123   26 D8 41 0A              FADD  ES:DWORD PTR [ECX+10]
   CODE32:001127   64 D8 5B 0F              FCOMP FS:DWORD PTR [EBX+15]
   CODE32:00112B   DF E0                    FNSTSW AX                         
   CODE32:00112D   9E                       SAHF                              
   CODE32:00112E   73 10                    JAE   NEAR PTR   L20021
   CODE32:001130   D9 45 F4                 FLD   DWORD PTR [EBP-12]
   CODE32:001133   26 D8 69 0A              FSUBR ES:DWORD PTR [ECX+10]
   CODE32:001137   64 D8 5B 0F              FCOMP FS:DWORD PTR [EBX+15]
   CODE32:00113B   DF E0                    FNSTSW AX                         
   CODE32:00113D   9E                       SAHF                              
   CODE32:00113E   72 3B                    JB    NEAR PTR   L52
                                  L20021:
C****************************************************************************
C   803:                          t_Halte= Soll_IBF->Umdrehungen*10*(I
C +       st_IBF->D_Null/(diam_hw*f_H)); 
C****************************************************************************
   CODE32:001140   D9 45 E4                 FLD   DWORD PTR [EBP-28]
   CODE32:001143   C4 8D 34 03 00           LES   ECX,PWORD PTR [EBP+820]
                   00                                                         
   CODE32:001149   26 D8 09                 FMUL  ES:DWORD PTR [ECX]
   CODE32:00114C   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:001150   64 D8 7B 57              FDIVR FS:DWORD PTR [EBX+87]
   CODE32:001154   2E D9 05 00 00           FLD   CS:DWORD PTR L20014
                   00 00R                                                     
   CODE32:00115B   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:00115E   26 D8 49 66              FMUL  ES:DWORD PTR [ECX+102]
   CODE32:001162   DE C9                    FMUL                              

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 90

     Interleaved Listing

   CODE32:001164   D9 5D FC                 FSTP  DWORD PTR [EBP-4]
C****************************************************************************
C   804:                          //t_Halte=Umdrehungen*10*diam_f/(dia
C +       m_hw*f_H); // n Umdrehungen, 10 * "100" ms Aufrufzyklus = 10
C +       00 ms = 1s;   
C   805:                           
C   806:                          Soll_IBF->Profilflag = 2;  
C****************************************************************************
   CODE32:001167   26 C7 01 02 00           MOV   ES:DWORD PTR [ECX],2
                   00 00                                                      
C****************************************************************************
C   807:                          Soll_IBF->Soll_ASO_Pos = Ist_IBF->AS
C +       O_Pos; // damit kein Durck ausgeübt wird wenn Walzprozeß bee
C +       ndet ist muss hier noch eine Konstante eingefügt werden (z.B
C +       . 5) 
C****************************************************************************
   CODE32:00116E   64 D9 43 17              FLD   FS:DWORD PTR [EBX+23]
C****************************************************************************
C   808:                          break; 
C****************************************************************************
   CODE32:001172   26 D9 59 26              FSTP  ES:DWORD PTR [ECX+38]
   CODE32:001176   E9 1B 03 00 00           JMP   NEAR PTR   L8
                                  L52:
C****************************************************************************
C   809:                          }                   
C   810:                        
C   811:                       //-------------------------------------
C +       ------------------------------------------------------------
C +       ----- 
C   812:                      //--------------------------Kraftsteueru
C +       ng des oberen Axialschlittens ------------------------------
C +       ---- 
C   813:                      //--------------------------------------
C +       ------------------------------------------------------------
C +       ---- 
C   814:                          
C   815:                      if(Axialkraft != NULL) 
C   816:                      { 
C****************************************************************************
   CODE32:00117B   D9 EE                    FLDZ                              
   CODE32:00117D   D8 5D F0                 FCOMP DWORD PTR [EBP-16]
   CODE32:001180   DF E0                    FNSTSW AX                         
   CODE32:001182   9E                       SAHF                              
   CODE32:001183   74 3A                    JE    NEAR PTR   L53
C****************************************************************************
C   817:                                            
C   818:                        uk1_ASO = uk_ASO; 
C****************************************************************************
   CODE32:001185   D9 45 E8                 FLD   DWORD PTR [EBP-24]
   CODE32:001188   D9 5D C4                 FSTP  DWORD PTR [EBP-60]
C****************************************************************************
C   819:                        uk_ASO = (Ist_IBF->FA_f - Axialkraft);
C +                        // gemittelte Axialkraft aus Interfac. 
C****************************************************************************
   CODE32:00118B   D9 45 F0                 FLD   DWORD PTR [EBP-16]

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 91

     Interleaved Listing

   CODE32:00118E   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:001191   26 D8 69 43              FSUBR ES:DWORD PTR [ECX+67]
   CODE32:001195   D9 5D E8                 FSTP  DWORD PTR [EBP-24]
C****************************************************************************
C   820:                         
C   821:                        Del_ASO_Pos = KP*(uk_ASO - uk1_ASO) +
C +       1.0F*uk_ASO;    // PI-Regler nach Böhmer, jedoch mit KP=Böhm
C +       er;KI=1.0F hier noch Einstellen!!!! 
C****************************************************************************
   CODE32:001198   D9 45 C4                 FLD   DWORD PTR [EBP-60]
   CODE32:00119B   D8 6D E8                 FSUBR DWORD PTR [EBP-24]
   CODE32:00119E   D8 4D 94                 FMUL  DWORD PTR [EBP-108]
   CODE32:0011A1   2E D9 05 00 00           FLD   CS:DWORD PTR L20004
                   00 00R                                                     
   CODE32:0011A8   D8 4D E8                 FMUL  DWORD PTR [EBP-24]
   CODE32:0011AB   DE C1                    FADD                              
   CODE32:0011AD   D9 5D 80                 FSTP  DWORD PTR [EBP-128]
C****************************************************************************
C   822:                                               
C   823:                        Soll_IBF->Soll_ASO_Pos = Ist_IBF->ASO_
C +       Pos; 
C****************************************************************************
   CODE32:0011B0   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:0011B4   64 D9 43 17              FLD   FS:DWORD PTR [EBX+23]
   CODE32:0011B8   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:0011BB   26 D9 59 26              FSTP  ES:DWORD PTR [ECX+38]
                                  L53:
C****************************************************************************
C   824:                          
C   825:                      } 
C   826:                       
C   827:                          
C   828:                          //----------------------------------
C +       ------------------------------------------------------------
C +       -------- 
C   829:                          //----------------------- Positionss
C +       teuerung des oberen Axialschlittens ------------------------
C +       -------- 
C   830:                          //----------------------------------
C +       ------------------------------------------------------------
C +       -------- 
C   831:                           
C   832:                          if(t_dis_h <=0) 
C   833:                          { 
C****************************************************************************
   CODE32:0011BF   D9 EE                    FLDZ                              
   CODE32:0011C1   D8 5D E0                 FCOMP DWORD PTR [EBP-32]
   CODE32:0011C4   DF E0                    FNSTSW AX                         
   CODE32:0011C6   9E                       SAHF                              
   CODE32:0011C7   0F 82 83 00 00           JB    NEAR PTR   L54
                   00                                                         
C****************************************************************************
C   834:                              
C   835:                             delta_h = 10*(diam_f*(s_f_alt - I
C +       st_IBF->s_f)-(s_f_alt*s_f_alt) + (Ist_IBF->s_f*Ist_IBF->s_f)

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 92

     Interleaved Listing

C +       )/(diam_f * s_f_alt - (s_f_alt*s_f_alt));  
C****************************************************************************
   CODE32:0011CD   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:0011D0   26 D9 41 47              FLD   ES:DWORD PTR [ECX+71]
   CODE32:0011D4   D8 6D F8                 FSUBR DWORD PTR [EBP-8]
   CODE32:0011D7   D8 4D EC                 FMUL  DWORD PTR [EBP-20]
   CODE32:0011DA   D9 45 F8                 FLD   DWORD PTR [EBP-8]
   CODE32:0011DD   D8 4D F8                 FMUL  DWORD PTR [EBP-8]
   CODE32:0011E0   DE E9                    FSUBR                             
   CODE32:0011E2   26 D9 41 47              FLD   ES:DWORD PTR [ECX+71]
   CODE32:0011E6   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:0011EA   64 D8 4B 47              FMUL  FS:DWORD PTR [EBX+71]
   CODE32:0011EE   DE C1                    FADD                              
   CODE32:0011F0   2E D9 05 00 00           FLD   CS:DWORD PTR L20014
                   00 00R                                                     
   CODE32:0011F7   DE C9                    FMUL                              
   CODE32:0011F9   D9 45 F8                 FLD   DWORD PTR [EBP-8]
   CODE32:0011FC   D8 4D EC                 FMUL  DWORD PTR [EBP-20]
   CODE32:0011FF   D9 45 F8                 FLD   DWORD PTR [EBP-8]
   CODE32:001202   D8 4D F8                 FMUL  DWORD PTR [EBP-8]
   CODE32:001205   DE E9                    FSUBR                             
   CODE32:001207   DE F9                    FDIVR                             
   CODE32:001209   D9 5D AC                 FSTP  DWORD PTR [EBP-84]
C****************************************************************************
C   836:                             // Delta_h = 10 mm Werkzeugbreite
C +        *gef.Wanddicke (diam_f)*(Wanddicke[n]^2-Wanddicke[n-1]^2)+W
C +       anddicke[n-1]^2-Wanddike[n]^2/(Klammerausdruck) 
C   837:                              
C   838:                             Soll_IBF->Soll_ASO_Pos = Soll_IBF
C +       ->Soll_ASO_Pos_alt + delta_h; 
C****************************************************************************
   CODE32:00120C   D9 45 AC                 FLD   DWORD PTR [EBP-84]
   CODE32:00120F   0F B4 5D 08              LFS   EBX,PWORD PTR [EBP+8]
   CODE32:001213   64 D8 43 2A              FADD  FS:DWORD PTR [EBX+42]
   CODE32:001217   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:00121A   26 D9 59 26              FSTP  ES:DWORD PTR [ECX+38]
C****************************************************************************
C   839:                              
C   840:                             Soll_IBF->Soll_ASO_Pos_alt = Soll
C +       _IBF->Soll_ASO_Pos;   
C****************************************************************************
   CODE32:00121E   64 D9 43 26              FLD   FS:DWORD PTR [EBX+38]
   CODE32:001222   26 D9 59 2A              FSTP  ES:DWORD PTR [ECX+42]
C****************************************************************************
C   841:                             s_f_alt = Ist_IBF->s_f;    
C****************************************************************************
   CODE32:001226   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:001229   26 D9 41 47              FLD   ES:DWORD PTR [ECX+71]
   CODE32:00122D   D9 5D F8                 FSTP  DWORD PTR [EBP-8]
C****************************************************************************
C   842:                             t_dis_h = 10*(Ist_IBF->D_Null/(di
C +       am_hw*f_H)); // 1 Umdrehungen (kein Wert vor der 10), 10*100
C +        ms = 1000 ms = 1s 
C****************************************************************************
   CODE32:001230   D9 45 E4                 FLD   DWORD PTR [EBP-28]

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 93

     Interleaved Listing

   CODE32:001233   C4 8D 34 03 00           LES   ECX,PWORD PTR [EBP+820]
                   00                                                         
   CODE32:001239   26 D8 09                 FMUL  ES:DWORD PTR [ECX]
   CODE32:00123C   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:001240   64 D8 7B 57              FDIVR FS:DWORD PTR [EBX+87]
   CODE32:001244   2E D9 05 00 00           FLD   CS:DWORD PTR L20014
                   00 00R                                                     
   CODE32:00124B   DE C9                    FMUL                              
   CODE32:00124D   D9 5D E0                 FSTP  DWORD PTR [EBP-32]
                                  L54:
C****************************************************************************
C   843:                          }         
C   844:                           
C   845:                          t_dis_h--; 
C****************************************************************************
   CODE32:001250   2E D9 05 00 00           FLD   CS:DWORD PTR L20004
                   00 00R                                                     
   CODE32:001257   D8 6D E0                 FSUBR DWORD PTR [EBP-32]
C****************************************************************************
C   846:                           
C   847:                          break; 
C****************************************************************************
   CODE32:00125A   D9 5D E0                 FSTP  DWORD PTR [EBP-32]
   CODE32:00125D   E9 34 02 00 00           JMP   NEAR PTR   L8
C****************************************************************************
C   848:                        
C   849:                        
C   850:          case 2:   //----------------------------------------
C +       ----------------------------------------- 
C   851:                    //------- 2 Umdrehungen abwarten für gleic
C +       hmäßiges Profil über Umfang ------------- 
C   852:                    //----------------------------------------
C +       ----------------------------------------- 
C   853:                     
C   854:                    Soll_Inter->kwo_n = kw_ia/hw_ir * (diam_hw
C +        * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AGR + Ist_IBF->Pos
C +       _auf_Mantel)*sin_kw_winkel_halbe); 
C****************************************************************************
                                  L55:
   CODE32:001262   D9 85 8C 00 00           FLD   DWORD PTR [EBP+140]
                   00                                                         
   CODE32:001268   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:00126F   64 D8 0B                 FMUL  FS:DWORD PTR [EBX]
   CODE32:001272   2E D9 05 00 00           FLD   CS:DWORD PTR L20005
                   00 00R                                                     
   CODE32:001279   DE F9                    FDIVR                             
   CODE32:00127B   64 D9 43 08              FLD   FS:DWORD PTR [EBX+8]
   CODE32:00127F   0F B5 95 34 03           LGS   EDX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:001286   65 D8 7A 0C              FDIVR GS:DWORD PTR [EDX+12]
   CODE32:00128A   DE C9                    FMUL                              
   CODE32:00128C   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:001290   64 D9 43 53              FLD   FS:DWORD PTR [EBX+83]
   CODE32:001294   0F B5 55 18              LGS   EDX,PWORD PTR [EBP+24]

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 94

     Interleaved Listing

   CODE32:001298   65 D8 42 4F              FADD  GS:DWORD PTR [EDX+79]
   CODE32:00129C   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:0012A3   64 D9 43 10              FLD   FS:DWORD PTR [EBX+16]
   CODE32:0012A7   DE C9                    FMUL                              
   CODE32:0012A9   DE F9                    FDIVR                             
   CODE32:0012AB   C4 4D 10                 LES   ECX,PWORD PTR [EBP+16]
   CODE32:0012AE   26 D9 59 34              FSTP  ES:DWORD PTR [ECX+52]
C****************************************************************************
C   855:                    Soll_Inter->kwu_n = kw_ia/hw_ir * (diam_hw
C +        * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AGR + Ist_IBF->Pos
C +       _auf_Mantel)*sin_kw_winkel_halbe);
C +       	 
C****************************************************************************
   CODE32:0012B2   D9 85 8C 00 00           FLD   DWORD PTR [EBP+140]
                   00                                                         
   CODE32:0012B8   64 D8 0B                 FMUL  FS:DWORD PTR [EBX]
   CODE32:0012BB   2E D9 05 00 00           FLD   CS:DWORD PTR L20005
                   00 00R                                                     
   CODE32:0012C2   DE F9                    FDIVR                             
   CODE32:0012C4   64 D9 43 08              FLD   FS:DWORD PTR [EBX+8]
   CODE32:0012C8   0F B5 95 34 03           LGS   EDX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:0012CF   65 D8 7A 0C              FDIVR GS:DWORD PTR [EDX+12]
   CODE32:0012D3   DE C9                    FMUL                              
   CODE32:0012D5   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:0012D9   64 D9 43 53              FLD   FS:DWORD PTR [EBX+83]
   CODE32:0012DD   0F B5 55 18              LGS   EDX,PWORD PTR [EBP+24]
   CODE32:0012E1   65 D8 42 4F              FADD  GS:DWORD PTR [EDX+79]
   CODE32:0012E5   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:0012EC   64 D9 43 10              FLD   FS:DWORD PTR [EBX+16]
   CODE32:0012F0   DE C9                    FMUL                              
   CODE32:0012F2   DE F9                    FDIVR                             
   CODE32:0012F4   26 D9 59 38              FSTP  ES:DWORD PTR [ECX+56]
C****************************************************************************
C   856:                     
C   857:                    Soll_IBF->Soll_ASO_V = 5.0F; 
C****************************************************************************
   CODE32:0012F8   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:0012FB   B8 00 00 A0 40           MOV   EAX,1084227584
   CODE32:001300   26 89 41 2E              MOV   ES:DWORD PTR [ECX+46],EAX
C****************************************************************************
C   858:                    Soll_Inter->ag_v = Soll_IBF->Soll_ASO_V; 
C****************************************************************************
   CODE32:001304   0F B4 5D 08              LFS   EBX,PWORD PTR [EBP+8]
   CODE32:001308   64 D9 43 2E              FLD   FS:DWORD PTR [EBX+46]
   CODE32:00130C   C4 4D 10                 LES   ECX,PWORD PTR [EBP+16]
   CODE32:00130F   26 D9 59 0C              FSTP  ES:DWORD PTR [ECX+12]
C****************************************************************************
C   859:                                    
C   860:                       
C   861:                    t_Halte--; 
C****************************************************************************
   CODE32:001313   2E D9 05 00 00           FLD   CS:DWORD PTR L20004

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 95

     Interleaved Listing

                   00 00R                                                     
   CODE32:00131A   D8 6D FC                 FSUBR DWORD PTR [EBP-4]
   CODE32:00131D   D9 5D FC                 FSTP  DWORD PTR [EBP-4]
C****************************************************************************
C   862:                    t_warte_flag=0; //zurücksetzen der Bedingu
C +       ng (Diskonti...) 
C****************************************************************************
   CODE32:001320   B8 00 00 00 00           MOV   EAX,0
   CODE32:001325   89 45 9C                 MOV   DWORD PTR [EBP-100],EAX
C****************************************************************************
C   863:                     
C   864:                                       
C   865:                    if (t_Halte <= 0)  
C   866:                    {   
C****************************************************************************
   CODE32:001328   D9 EE                    FLDZ                              
   CODE32:00132A   D8 5D FC                 FCOMP DWORD PTR [EBP-4]
   CODE32:00132D   DF E0                    FNSTSW AX                         
   CODE32:00132F   9E                       SAHF                              
   CODE32:001330   0F 82 60 01 00           JB    NEAR PTR   L8
                   00                                                         
C****************************************************************************
C   867:                        Soll_IBF->ExitAchse ='a';Soll_IBF->Pro
C +       filflag = 3; break;   //hier befehle reinschreiben, wenn ein
C +        weiterer Schritt abgearbeitet werden soll..... 
C****************************************************************************
   CODE32:001336   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:001339   26 C6 41 05 61           MOV   ES:BYTE PTR [ECX+5],97
   CODE32:00133E   26 C7 01 03 00           MOV   ES:DWORD PTR [ECX],3
                   00 00                                                      
   CODE32:001345   E9 4C 01 00 00           JMP   NEAR PTR   L8
C****************************************************************************
C   868:                    } 
C   869:                    break;              
C   870:                     
C   871:         
C   872:         case 3:    //Memoryflag= Ist_IBF->Profilflag; 
C   873:                    // RS und AS auffahren; danach manuell Ent
C +       ladeposition anfahren (Koppers 'e')      
C   874:                    switch (Ist_IBF->ExitAchse)  
C****************************************************************************
                                  L57:
   CODE32:00134A   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:00134D   26 0F BE 41 0E           MOVSX EAX,ES:BYTE PTR [ECX+14]
   CODE32:001352   3D 61 00 00 00           CMP   EAX,97
   CODE32:001357   74 0C                    JE    NEAR PTR   L59
   CODE32:001359   3D 62 00 00 00           CMP   EAX,98
   CODE32:00135E   74 54                    JE    NEAR PTR   L61
   CODE32:001360   E9 31 01 00 00           JMP   NEAR PTR   L8
C****************************************************************************
C   875:                    {                          
C   876:                     
C   877:                       Steuerbyte_Lese.freigabe = 191;	// wa
C +       r 95 
C   878:                       //Freigabe_MRAW_Senden(); 

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 96

     Interleaved Listing

C   879:                                    
C   880:                          case 'a': 	 
C   881:                                Soll_IBF->Soll_RS_Pos=Ist_IBF-
C +       >RS_Pos_Start+10.0F; //michl 
C****************************************************************************
                                  L59:
   CODE32:001365   2E D9 05 00 00           FLD   CS:DWORD PTR L20014
                   00 00R                                                     
   CODE32:00136C   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:001370   64 D8 43 33              FADD  FS:DWORD PTR [EBX+51]
   CODE32:001374   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:001377   26 D9 59 0A              FSTP  ES:DWORD PTR [ECX+10]
C****************************************************************************
C   882:                                Soll_IBF->Soll_RS_V = 5.0F; 
C****************************************************************************
   CODE32:00137B   B8 00 00 A0 40           MOV   EAX,1084227584
   CODE32:001380   26 89 41 12              MOV   ES:DWORD PTR [ECX+18],EAX
C****************************************************************************
C   883:                                Soll_Inter->rs_v = Soll_IBF->S
C +       oll_RS_V;       
C****************************************************************************
   CODE32:001384   0F B4 5D 08              LFS   EBX,PWORD PTR [EBP+8]
   CODE32:001388   64 D9 43 12              FLD   FS:DWORD PTR [EBX+18]
   CODE32:00138C   C4 4D 10                 LES   ECX,PWORD PTR [EBP+16]
   CODE32:00138F   26 D9 19                 FSTP  ES:DWORD PTR [ECX]
C****************************************************************************
C   884:                                if (Ist_IBF->RS_Pos >= Soll_IB
C +       F->Soll_RS_Pos) Soll_IBF->ExitAchse = 'b'; 
C****************************************************************************
   CODE32:001392   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:001396   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:001399   26 D9 41 0A              FLD   ES:DWORD PTR [ECX+10]
   CODE32:00139D   64 D8 5B 0F              FCOMP FS:DWORD PTR [EBX+15]
   CODE32:0013A1   DF E0                    FNSTSW AX                         
   CODE32:0013A3   9E                       SAHF                              
   CODE32:0013A4   0F 87 EC 00 00           JA    NEAR PTR   L8
                   00                                                         
   CODE32:0013AA   26 C6 41 05 62           MOV   ES:BYTE PTR [ECX+5],98
C****************************************************************************
C   885:                                break; 
C****************************************************************************
   CODE32:0013AF   E9 E2 00 00 00           JMP   NEAR PTR   L8
C****************************************************************************
C   886:    
C   887:                          case 'b': 
C   888:                      
C   889:                                Soll_IBF->Soll_AG_Pos = Ist_IB
C +       F->AG_Pos_Null  + 50;  
C****************************************************************************
                                  L61:
   CODE32:0013B4   2E D9 05 00 00           FLD   CS:DWORD PTR L20023
                   00 00R                                                     
   CODE32:0013BB   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:0013BF   64 D8 43 2F              FADD  FS:DWORD PTR [EBX+47]
   CODE32:0013C3   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 97

     Interleaved Listing

   CODE32:0013C6   26 D9 59 4A              FSTP  ES:DWORD PTR [ECX+74]
C****************************************************************************
C   890:                                Soll_IBF->Soll_ASO_Pos= Ist_IB
C +       F->ASO_Pos_Null + 15; //michl 
C****************************************************************************
   CODE32:0013CA   2E D9 05 00 00           FLD   CS:DWORD PTR L20008
                   00 00R                                                     
   CODE32:0013D1   64 D8 43 2B              FADD  FS:DWORD PTR [EBX+43]
   CODE32:0013D5   26 D9 59 26              FSTP  ES:DWORD PTR [ECX+38]
C****************************************************************************
C   891:                                 
C   892:                                Soll_IBF->Soll_ASO_V = 15.0F;
C +        
C****************************************************************************
   CODE32:0013D9   B8 00 00 70 41           MOV   EAX,1097859072
   CODE32:0013DE   26 89 41 2E              MOV   ES:DWORD PTR [ECX+46],EAX
C****************************************************************************
C   893:                                Soll_Inter->aso_v = Soll_IBF->
C +       Soll_ASO_V; 
C****************************************************************************
   CODE32:0013E2   0F B4 5D 08              LFS   EBX,PWORD PTR [EBP+8]
   CODE32:0013E6   64 D9 43 2E              FLD   FS:DWORD PTR [EBX+46]
   CODE32:0013EA   C4 4D 10                 LES   ECX,PWORD PTR [EBP+16]
   CODE32:0013ED   26 D9 59 04              FSTP  ES:DWORD PTR [ECX+4]
C****************************************************************************
C   894:                                 
C   895:                                Soll_IBF->Soll_AG_V = 8.0F; 
C****************************************************************************
   CODE32:0013F1   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:0013F4   B8 00 00 00 41           MOV   EAX,1090519040
   CODE32:0013F9   26 89 41 4E              MOV   ES:DWORD PTR [ECX+78],EAX
C****************************************************************************
C   896:                                Soll_Inter->ag_v = Soll_IBF->S
C +       oll_AG_V; 
C****************************************************************************
   CODE32:0013FD   64 D9 43 4E              FLD   FS:DWORD PTR [EBX+78]
   CODE32:001401   C4 4D 10                 LES   ECX,PWORD PTR [EBP+16]
   CODE32:001404   26 D9 59 0C              FSTP  ES:DWORD PTR [ECX+12]
C****************************************************************************
C   897:  
C +        
C   898:                                Soll_Inter->zal_v=0.0F ; // mi
C +       chl: festsetzen der Zentrierarme 
C****************************************************************************
   CODE32:001408   B8 00 00 00 00           MOV   EAX,0
   CODE32:00140D   26 89 41 10              MOV   ES:DWORD PTR [ECX+16],EAX
C****************************************************************************
C   899:                                Soll_Inter->zar_v=0.0F ; // mi
C +       chl: festsetzen der Zentrierarme     
C****************************************************************************
   CODE32:001411   B8 00 00 00 00           MOV   EAX,0
   CODE32:001416   26 89 41 14              MOV   ES:DWORD PTR [ECX+20],EAX
C****************************************************************************
C   900:                                if (Ist_IBF->AG_Pos >= Soll_IB
C +       F->Soll_AG_Pos)  

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 98

     Interleaved Listing

C   901:                                { 
C****************************************************************************
   CODE32:00141A   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:00141E   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:001421   26 D9 41 4A              FLD   ES:DWORD PTR [ECX+74]
   CODE32:001425   64 D8 5B 13              FCOMP FS:DWORD PTR [EBX+19]
   CODE32:001429   DF E0                    FNSTSW AX                         
   CODE32:00142B   9E                       SAHF                              
   CODE32:00142C   77 08                    JA    NEAR PTR   L62
C****************************************************************************
C   902:                                   Soll_IBF->ExitAchse = ' ';
C +        
C****************************************************************************
   CODE32:00142E   26 C6 41 05 20           MOV   ES:BYTE PTR [ECX+5],32
C****************************************************************************
C   903:                                   Soll_IBF->Profilflag++; 
C****************************************************************************
   CODE32:001433   26 FF 01                 INC   ES:DWORD PTR [ECX]
                                  L62:
C****************************************************************************
C   904:                                } 
C   905:                                 
C   906:                                if (     (Ist_IBF->RS_Pos  >=
C +       Soll_IBF->Soll_RS_Pos) 
C   907:                                      && (Ist_IBF->ASO_Pos >=
C +       Soll_IBF->Soll_ASO_Pos) 
C   908:                                      #ifdef MRAW 
C   909:                                         && (Ist_IBF->ASU_Pos
C +       >= Soll_IBF->Soll_ASU_Pos) 
C   910:                                      #endif 
C   911:                                   ) 
C   912:                                { 
C****************************************************************************
   CODE32:001436   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:00143A   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:00143D   26 D9 41 0A              FLD   ES:DWORD PTR [ECX+10]
   CODE32:001441   64 D8 5B 0F              FCOMP FS:DWORD PTR [EBX+15]
   CODE32:001445   DF E0                    FNSTSW AX                         
   CODE32:001447   9E                       SAHF                              
   CODE32:001448   77 17                    JA    NEAR PTR   L63
   CODE32:00144A   26 D9 41 26              FLD   ES:DWORD PTR [ECX+38]
   CODE32:00144E   64 D8 5B 17              FCOMP FS:DWORD PTR [EBX+23]
   CODE32:001452   DF E0                    FNSTSW AX                         
   CODE32:001454   9E                       SAHF                              
   CODE32:001455   77 0A                    JA    NEAR PTR   L63
C****************************************************************************
C   913:                                   Soll_IBF->ExitAchse = ' ';
C +        
C****************************************************************************
   CODE32:001457   26 C6 41 05 20           MOV   ES:BYTE PTR [ECX+5],32
C****************************************************************************
C   914:                                   Soll_IBF->Profilflag++; 
C   915:                                   break; 
C****************************************************************************
   CODE32:00145C   26 FF 01                 INC   ES:DWORD PTR [ECX]

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 99

     Interleaved Listing

   CODE32:00145F   EB 35                    JMP   NEAR PTR   L8
                                  L63:
C****************************************************************************
C   916:                                } 
C   917:                                //----------------------------
C +       ------------------------------------------------------------
C +       ------------ 
C   918:                                //------------------- Damit di
C +       e Variabelwerte, die während einer vorgehenden Walzung------
C +       ------------ 
C   919:                                //--------------------nicht im
C +        Speicher verbleiben, müssen diese zurückgesetzt werden-----
C +       ------------ 
C   920:                                //----------------------------
C +       ------------------------------------------------------------
C +       ------------ 
C   921:                                    
C   922:                                   Ist_IBF->FR_f = 0; Ist_IBF-
C +       >FA_f = 0; 
C****************************************************************************
   CODE32:001461   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:001464   B8 00 00 00 00           MOV   EAX,0
   CODE32:001469   26 89 41 3F              MOV   ES:DWORD PTR [ECX+63],EAX
   CODE32:00146D   B8 00 00 00 00           MOV   EAX,0
   CODE32:001472   26 89 41 43              MOV   ES:DWORD PTR [ECX+67],EAX
C****************************************************************************
C   923:                                  	zaehler=0;	uk=0;
C +        uk1=0;   uk_ASO=0; 
C****************************************************************************
   CODE32:001476   B8 00 00 00 00           MOV   EAX,0
   CODE32:00147B   89 45 D4                 MOV   DWORD PTR [EBP-44],EAX
   CODE32:00147E   89 45 8C                 MOV   DWORD PTR [EBP-116],EAX
   CODE32:001481   89 45 90                 MOV   DWORD PTR [EBP-112],EAX
   CODE32:001484   89 45 E8                 MOV   DWORD PTR [EBP-24],EAX
C****************************************************************************
C   924:                                   uk1_ASO=0;	diam_f=0;   d
C +       iam_f_alt=0;     t_Halte = 0;   t_warte = 0;	 
C****************************************************************************
   CODE32:001487   89 45 C4                 MOV   DWORD PTR [EBP-60],EAX
   CODE32:00148A   89 45 EC                 MOV   DWORD PTR [EBP-20],EAX
   CODE32:00148D   89 45 C8                 MOV   DWORD PTR [EBP-56],EAX
   CODE32:001490   89 45 FC                 MOV   DWORD PTR [EBP-4],EAX
C****************************************************************************
C   925:                                    
C   926:                                break;
C +        
C****************************************************************************
   CODE32:001493   89 45 98                 MOV   DWORD PTR [EBP-104],EAX
C****************************************************************************
C   927:                                 
C   928:                    default: 	break; 
C   929:                    } // Klammer zu: switch(ExitAchse)
C +                  
C   930:                    break;	 
C   931:                    

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 100

     Interleaved Listing

C   932:      case 40:      //Routine die zur Pause gehört 
C   933:                    break; 
C   934:   
C   935:  /*----------------------------------------------------------
C +       -----------------------*/	 
C   936:  /*--------------------------------------ENDE ENDE ENDE -----
C +       -----------------------*/		       
C   937:  /*----------------------------------------------------------
C +       -----------------------*/ 
C   938:      
C   939:  }; // Klammer zu: switch (IBF_Allgemein.IBF_Allgemein.Profil
C +       flag)  
C****************************************************************************
                                  L8:
C****************************************************************************
C   940:          
C   941:  }; // Klammer zu: Ende von if !Auto else  
C   942:    
C   943:  //########## Ende Hand- bzw. Automatiksteuerung ########## 
C   944:   
C   945:   
C   946:  /*----------------------------------------------------------
C +       --------------------------*/ 
C   947:  /*------------------------------- Anfang Kollisionscheck ---
C +       --------------------------*/ 
C   948:  /*----------------------------------------------------------
C +       --------------------------*/ 
C   949:   
C   950:        RS_HW = 1; 
C****************************************************************************
   CODE32:001496   C7 45 D8 01 00           MOV   DWORD PTR [EBP-40],1
                   00 00                                                      
C****************************************************************************
C   951:        RS_AG = 1; 
C****************************************************************************
   CODE32:00149D   C7 45 B8 01 00           MOV   DWORD PTR [EBP-72],1
                   00 00                                                      
C****************************************************************************
C   952:        AG_RS = 1; 
C****************************************************************************
   CODE32:0014A4   C7 45 BC 01 00           MOV   DWORD PTR [EBP-68],1
                   00 00                                                      
C****************************************************************************
C   953:        AS_AS = 1; 
C****************************************************************************
   CODE32:0014AB   C7 45 C0 01 00           MOV   DWORD PTR [EBP-64],1
                   00 00                                                      
C****************************************************************************
C   954:         
C   955:        if ((RS_HW != 0) && (RS_AG != 0)) 
C   956:        {   
C****************************************************************************
   CODE32:0014B2   83 7D D8 00              CMP   DWORD PTR [EBP-40],0
   CODE32:0014B6   74 22                    JE    NEAR PTR   L67
   CODE32:0014B8   83 7D B8 00              CMP   DWORD PTR [EBP-72],0

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 101

     Interleaved Listing

   CODE32:0014BC   74 1C                    JE    NEAR PTR   L67
C****************************************************************************
C   957:           Soll_Inter->rs_pos = Soll_IBF->Soll_RS_Pos + offset
C +       _rs; 
C****************************************************************************
   CODE32:0014BE   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:0014C5   64 D9 43 14              FLD   FS:DWORD PTR [EBX+20]
   CODE32:0014C9   0F B5 55 08              LGS   EDX,PWORD PTR [EBP+8]
   CODE32:0014CD   65 D8 42 0A              FADD  GS:DWORD PTR [EDX+10]
   CODE32:0014D1   C4 4D 10                 LES   ECX,PWORD PTR [EBP+16]
C****************************************************************************
C   958:           #ifdef MRAW 
C   959:              _settextposition(7,1); 
C   960:              printf("                                     ");
C +        
C   961:           #endif 
C   962:        } 
C   963:        else 
C   964:        {  if (RS_HW == 0) 
C****************************************************************************
   CODE32:0014D4   26 D9 59 18              FSTP  ES:DWORD PTR [ECX+24]
   CODE32:0014D8   EB 04                    JMP   NEAR PTR   L68
                                  L67:
C****************************************************************************
C   965:           { 
C****************************************************************************
   CODE32:0014DA   83 7D D8 00              CMP   DWORD PTR [EBP-40],0
C****************************************************************************
C   966:              #ifdef MRAW 
C   967:                 _settextposition(7,1); 
C   968:                 printf("    KOLLISIONSGEFAHR RS - HW   %i
C +         ", RS_HW); 
C   969:              #endif 
C   970:           } 
C   971:           else 
C   972:           { 
C****************************************************************************
                                  L68:
C****************************************************************************
C   973:              #ifdef MRAW 
C   974:                 _settextposition(7,1); 
C   975:                 printf("    KOLLISIONSGEFAHR RS - AG   %i
C +         ", RS_AG); 
C   976:              #endif 
C   977:           } 
C   978:        } 
C   979:         
C   980:        if (AG_RS != 0) 
C   981:        {   
C****************************************************************************
   CODE32:0014DE   83 7D BC 00              CMP   DWORD PTR [EBP-68],0
   CODE32:0014E2   74 1A                    JE    NEAR PTR   L72
C****************************************************************************
C   982:           Soll_Inter->ag_pos = Soll_IBF->Soll_AG_Pos + offset

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 102

     Interleaved Listing

C +       _agr; 
C****************************************************************************
   CODE32:0014E4   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:0014EB   64 D9 43 18              FLD   FS:DWORD PTR [EBX+24]
   CODE32:0014EF   0F B5 55 08              LGS   EDX,PWORD PTR [EBP+8]
   CODE32:0014F3   65 D8 42 4A              FADD  GS:DWORD PTR [EDX+74]
   CODE32:0014F7   C4 4D 10                 LES   ECX,PWORD PTR [EBP+16]
C****************************************************************************
C   983:           #ifdef MRAW 
C   984:              _settextposition(7,1); 
C   985:              printf("                                     ");
C +        
C   986:           #endif 
C   987:        } 
C   988:        else 
C   989:        { 
C****************************************************************************
   CODE32:0014FA   26 D9 59 24              FSTP  ES:DWORD PTR [ECX+36]
                                  L72:
C****************************************************************************
C   990:           #ifdef MRAW 
C   991:              _settextposition(7,1); 
C   992:              printf("    KOLLISIONSGEFAHR AG - RS   %i      "
C +       , AG_RS); 
C   993:           #endif 
C   994:        } 
C   995:         
C   996:        if (AS_AS != 0) 
C   997:        {   
C****************************************************************************
   CODE32:0014FE   83 7D C0 00              CMP   DWORD PTR [EBP-64],0
   CODE32:001502   74 1A                    JE    NEAR PTR   L74
C****************************************************************************
C   998:           Soll_Inter->aso_pos = Soll_IBF->Soll_ASO_Pos + offs
C +       et_aso; 
C****************************************************************************
   CODE32:001504   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:00150B   64 D9 43 1C              FLD   FS:DWORD PTR [EBX+28]
   CODE32:00150F   0F B5 55 08              LGS   EDX,PWORD PTR [EBP+8]
   CODE32:001513   65 D8 42 26              FADD  GS:DWORD PTR [EDX+38]
   CODE32:001517   C4 4D 10                 LES   ECX,PWORD PTR [EBP+16]
C****************************************************************************
C   999:           #ifdef MRAW 
C  1000:              Soll_Inter->asu_pos = Soll_IBF->Soll_ASU_Pos + o
C +       ffset_asu;  //michl rausgenommen 
C  1001:              _settextposition(7,1); 
C  1002:              printf("                                     ");
C +        
C  1003:           #endif 
C  1004:        } 
C  1005:        else 
C  1006:        {   
C****************************************************************************

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 103

     Interleaved Listing

   CODE32:00151A   26 D9 59 1C              FSTP  ES:DWORD PTR [ECX+28]
                                  L74:
C****************************************************************************
C  1007:           #ifdef MRAW 
C  1008:              _settextposition(7,1); 
C  1009:              printf("    KOLLISIONSGEFAHR oberer AS - AS   %i
C +             ", AS_AS); 
C  1010:           #endif 
C  1011:        } 
C  1012:         
C  1013:  // ------------ Ende Kollisionscheck ----------- 
C  1014:   
C  1015:      return TRUE; 
C****************************************************************************
   CODE32:00151E   B8 FF FF FF FF           MOV   EAX,-1
   CODE32:001523   C9                       LEAVE   
   CODE32:001524   C2 34 03                 RET   820
                                  Main__3RPWF13Def_Ist_InterPfP21Def_IBF_Allgemein_ISTP14Def_Soll_InterP22Def_IBF_Allgemein_SOLL  ENDP

                                            EXTRN  __dl__FPv:BYTE
                                            EXTRN  __cxxtls:BYTE
                                            EXTRN  __nw__FUi:BYTE


                                            END

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 104

     Offsets of Pseudo Segments

     Name                Offset              Size
     CONST                        0        0H          0        0H 
     STRINGS                      0        0H          0        0H 
     LINK                         0        0H         52       34H 
     CODE32                      52       34H       5415     1527H 
     CODE32                    5468     155CH        346      15AH 
     CODE32                    5816     16B8H          0        0H 
     DATA                         0        0H         24       18H 
     FAR_DATA                    24       18H          0        0H 
     DATA                        24       18H          0        0H 
     BSS                         24       18H          0        0H 

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 105

     Segment Sizes


     Code Size: 		000016b8H  5816 (decimal) 
     Data Size: 		00000018H  24 (decimal) 
     Const Size:		00000000H  0 (decimal) 

CAD-UL CXX386 Version: V401Z 07/15/2006 10:55:46 Page 106

     Symbols

Function Name
               Start Address    End   Address    Start Line       End Line
Main_RAW__3RPWFi12Def_Ein_Puff14Def_Lokal_Puff12Def_Aus_Puff12Def_Ein_Onli12Def_Aus_OnliPfP13Def_Ist_InterP14Def_Soll_InterP22Def_IBF_Allgemein_SOLLP21Def_IBF_Allgemein_IST
                      000034           0000E8            23             75
Istwerte_RAW__3RPWF12Def_Ein_Puff14Def_Lokal_Puff12Def_Aus_PuffP13Def_Ist_Inter
                      00011F           0003A5            81            135
Main__3RPWF13Def_Ist_InterPfP21Def_IBF_Allgemein_ISTP14Def_Soll_InterP22Def_IBF_Allgemein_SOLL
                      0003DC           001524           141           1015
__ct__3RPWFv
                      00155C           000157             6             18
