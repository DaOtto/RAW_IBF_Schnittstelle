
CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 1

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\source\rpw.cpp

Line  Level
    1             #include "rpw.hpp"
    2             
    3             
    4             //----------------------------------------------------------
     +            -----------------
    5             // Methode RWP::RPW
    6             //----------------------------------------------------------
     +            -----------------

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 2

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\source\rpw.cpp

Line  Level
    1+            #include "rpw.hpp"
    2+            
    3+            
    4+            //----------------------------------------------------------
     +            -----------------
    5             // Methode RWP::RPW
    6             //----------------------------------------------------------
     +            -----------------
    7             RPW::RPW(void)
    8             {
    9             
   10                 hw_ir                = 0.0F; // Getriebeuntersetzung Hau
     +            ptwalzenmotor
   11                 kw_ia                = 0.0F; // Getriebeuntersetzung Keg
     +            elwalzenmotor
   12                 sin_kw_winkel_halbe  = 0.0F; // Sinus halber Kegelwalzen
     +            winkel
   13             
   14                 offset_rs            = 0.0F; 
   15                 offset_agr           = 0.0F;
   16                 offset_aso           = 0.0F;
   17                 offset_asu           = 0.0F;
   18                 offset_tr            = 0.0F;	
   19             }
   20             
   21             //----------------------------------------------------------
     +            -----------------
   22             // Methode RWP::Main_RAW
   23             //----------------------------------------------------------
     +            -----------------
   24             int RPW::Main_RAW(int    iter,
   25                               struct Def_Ein_Puff            Ein_Puff,
   26                               struct Def_Lokal_Puff          Lokal_Puff,
     +            
   27                               struct Def_Aus_Puff            Aus_Puff,
   28                               struct Def_Ein_Onli            Ein_Onli,
   29                               struct Def_Aus_Onli            Aus_Onli,
   30                               float  IBF_PARA[IBF_PARA_MAX],
   31                               struct Def_Ist_Inter           *Ist_Inter,
     +            
   32                               struct Def_Soll_Inter          *Soll_Inter
     +            ,
   33                               struct Def_IBF_Allgemein_SOLL  *Soll_IBF,
   34                               struct Def_IBF_Allgemein_IST   *Ist_IBF
     +            )
   35             {
   36                // Defintion der lokalen Variabeln
   37                // struct Def_IBF_Allgemein *IBF_Allgemein;
   38                // Los gehts
   39             
   40                // Initilisieren
   41              /*
   42                if (Ein_Puff.walzenstart_flag)
   43                {
   44             		Soll_Inter->rs_v = 0.0F;	

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 3

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\source\rpw.cpp

Line  Level
   45                }
   46                else
   47                {
   48                   if (Ein_Onli.rwg_poti_wert > 0.05F)
   49                   {
   50             	     Soll_Inter->rs_v = 2.0F * Ein_Onli.rwg_poti_wert
     +            ;
   51              	   }
   52                   else
   53                   {
   54                     Soll_Inter->rs_v = 0.0F; 
   55                   }
   56             
   57                   Soll_Inter->aso_v = 0.0F;
   58                }
   59             */	
   60                // Istwerte aufbereiten
   61                Istwerte_RAW(  Ein_Puff,
   62                               Lokal_Puff,
   63                               Aus_Puff,
   64                               &*Ist_Inter);
   65             
   66                Soll_Inter->rs_v  = Aus_Onli.ds_dh_sp_hp.s_punkt;
   67                Soll_Inter->aso_v = Aus_Onli.ds_dh_sp_hp.h_punkt;
   68             
   69                // Hauptprogrammteil des IBF-Tasks
   70                Main(*Ist_Inter,
   71                     IBF_PARA,
   72                     &*Ist_IBF,
   73                     &*Soll_Inter,
   74                     &*Soll_IBF);
   75             
   76                return TRUE;
   77             }
   78             
   79             //----------------------------------------------------------
     +            -----------------
   80             // Methode RWP::Istwerte_RAW
   81             //----------------------------------------------------------
     +            -----------------
   82             int RPW::Istwerte_RAW(  struct Def_Ein_Puff    Ein_Puff,
   83                                     struct Def_Lokal_Puff  Lokal_Puff,
   84                                     struct Def_Aus_Puff    Aus_Puff,
   85                                     struct Def_Ist_Inter   *Ist_Inter)
   86             {
   87               /* Ist_Inter->rs_pos    =    Ein_Puff.form_mess_of.dis_hw_
     +            dw 
   88                                        + Ein_Puff.hw_geometrie.r_nenn
   89                                        + Ein_Puff.dw_geometrie.r_nenn; *
     +            /
   90                
   91                 Ist_Inter->rs_pos    =    Ein_Puff.form_mess_of.dis_hw_d
     +            w;
   92             
   93                 Ist_Inter->ag_pos    =   Ein_Puff.form_mess_of.da

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 4

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\source\rpw.cpp

Line  Level
   94                                        - Ein_Puff.pos_laser_u_of
   95                                        - Ein_Puff.awu_geometrie.l_fehlen
     +            de_spitze
   96                                        + Ein_Puff.hw_geometrie.r_nenn;
   97                 Ist_Inter->aso_pos   =   Ein_Puff.form_mess_of.dis_aw;
   98                 Ist_Inter->asu_pos   =   0.0F;
   99                 Ist_Inter->tr_pos    =   Ein_Puff.pos_laser_u_of
  100                                        + Ein_Puff.awu_geometrie.l_fehlen
     +            de_spitze;
  101                 Ist_Inter->rs_f      =   Ein_Puff.fr_of; 
  102                 Ist_Inter->as_f      =   Ein_Puff.fa_of;	
  103             
  104                 Ist_Inter->hw_n      =   Ein_Puff.n_hw_motor_ist / MIN_F
     +            AK;
  105             
  106                 diam_hw              =   Ein_Puff.hw_geometrie.d_nenn;
  107                 diam_dw              =   Ein_Puff.dw_geometrie.d_nenn; 
  108             
  109                 hw_ir                =   Ein_Puff.hw1_motor.getriebe_unt
     +            ersetzung;              /* Getriebeuntersetzung Hauptwalzenm
     +            otor */
  110                 kw_ia                =   Ein_Puff.awu_motor.getriebe_unt
     +            ersetzung;              /* Getriebeuntersetzung Kegelwalzenm
     +            otor */
  111                 sin_kw_winkel_halbe  =   (float) sin(Ein_Puff.awu_geomet
     +            rie.winkel_bo * 0.5F);  /* Sinus halber Kegelwalzenwinkel */
     +            
  112             
  113                 Ist_Inter->da              = Aus_Puff.form_ring.da;
     +             					/* Aeusserer Durchmes
     +            ser        [mm]    */
  114             	Ist_Inter->da_of           = Ein_Puff.form_mess_of.da
     +            ;
  115               	Ist_Inter->di              = Aus_Puff.form_ring.di;
     +                					/* Innerer   Durchmes
     +            ser        [mm]    */
  116               	Ist_Inter->di_of           = Ein_Puff.form_mess_of.di
     +            ;
  117               	Ist_Inter->dm              = Aus_Puff.form_ring.dm;
     +                					/* Mittlerer Durchmes
     +            ser        [mm]    */
  118               	Ist_Inter->dm_of           = Ein_Puff.form_mess_of.dm
     +            ;    
  119               	Ist_Inter->fertig_ho_soll  = Aus_Puff.ist_walzform.hm
     +            ;
  120               	Ist_Inter->fertig_wd_soll  = Aus_Puff.ist_walzform.sm
     +            ;
  121               	Ist_Inter->h0a             = Aus_Puff.h0a;
     +            			/* Ringhoehe axial  einlaufend  [mm]
     +               */  		
  122               	Ist_Inter->h0r             = Aus_Puff.h0r;
     +            			/* Ringhoehe radial einlaufend  [mm]
     +               */
  123               	Ist_Inter->h1r             = Aus_Puff.h1r;
     +            			/* Ringhoehe radial auslaufend  [mm]

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 5

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\source\rpw.cpp

Line  Level
     +               */
  124               	Ist_Inter->h1a             = Aus_Puff.h1a;
     +            			/* Ringhoehe axial  auslaufend  [mm]
     +               */
  125               	Ist_Inter->h1a_of          = Ein_Puff.form_mess_of.di
     +            s_aw;
  126               	Ist_Inter->s0a             = Aus_Puff.s0a;
     +            			/* Wanddicke axial  einlaufend  [mm]
     +               */
  127               	Ist_Inter->s0r             = Aus_Puff.s0r;
     +            			/* Wanddicke radial einlaufend  [mm]
     +               */
  128               	Ist_Inter->s1a             = Aus_Puff.s1a;
     +            			/* Wanddicke axial  auslaufend  [mm]
     +               */
  129               	Ist_Inter->s1r             = Aus_Puff.s1r;
     +            			/* Wanddicke radial auslaufend  [mm]
     +               */
  130               	Ist_Inter->s1r_of          = Ein_Puff.form_mess_of.di
     +            s_hw_dw;
  131             	Ist_Inter->sfh             = Aus_Puff.s_ekv;
     +            			/* Wanddicke bei Fertighoehe    [mm]
     +               */
  132               	Ist_Inter->skw             = 0.0F;
     +             
  133               	Ist_Inter->skw_of          = 0.0F;
     +               		
  134               	Ist_Inter->wa_dvol         = Aus_Puff.dvol_ring_proz;
     +                  /* Berechnete Volumendifferenz [%]       */
  135                 Ist_Inter->Vorform.sm      = Ein_Puff.vorform.sm;
     +               /* Wandstärke Vorform aus Carwin            [mm] */
  136                 Ist_Inter->Vorform.da      = Ein_Puff.vorform.da;
     +               /* Durchmesser Vorform  aus Carwin          [mm] */
  137                 Ist_Inter->Vorform.hm      = Ein_Puff.vorform.hm;
     +               /* Rohlingshöhe Vorform aus Carwin          [mm] */
  138             
  139                 Ist_Inter->rs_f            = Aus_Puff.fr_mf;
     +               /* Radiale Kraft gefiltert                [N] */
  140                 Ist_Inter->as_f            = Aus_Puff.fa_mf;
     +               /* Axiale Kraft gefiltert                 [N] */
  141                 // Ist_Inter->ag_f = ? ;
     +               /* Axialgerüst                            [N] */        
  142                               
  143                   
  144               
  145             
  146                 return TRUE;
  147             }
  148             
  149             
  150             //----------------------------------------------------------
     +            -----------------
  151             // Methode RWP::MAIN
  152             //----------------------------------------------------------
     +            -----------------

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 6

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\source\rpw.cpp

Line  Level
  153             int RPW::Main( struct Def_Ist_Inter          Ist_Inter,
  154                            float  IBF_PARA[IBF_PARA_MAX],
  155                            struct Def_IBF_Allgemein_IST  *Ist_IBF, 
  156                            struct Def_Soll_Inter         *Soll_Inter,
  157                            struct Def_IBF_Allgemein_SOLL *Soll_IBF)
  158     1       {
  159     1       
  160     1          // Zuweisung Def_IBF_Allgemein_SOLL 
  161     1       
  162     1          // Übergeben der Parameter aus Soll_IBF/Ist_IBF Struktur
  163     1             
  164     1          Ist_IBF->Profilflag = Soll_IBF->Profilflag;
  165     1          Ist_IBF->InitAchse  = Soll_IBF->InitAchse;
  166     1          Ist_IBF->ExitAchse  = Soll_IBF->ExitAchse;
  167     1         
  168     1          Ist_IBF->RS_Pos_Null  = Soll_IBF->RS_Pos_Null; // bla_Nul
     +            l -> Initialisierung nach manueller Anfahrt / vor Profiliere
     +            n 
  169     1          Ist_IBF->ASO_Pos_Null = Soll_IBF->ASO_Pos_Null;
  170     1          Ist_IBF->AG_Pos_Null  = Soll_IBF->AG_Pos_Null;
     +            
  171     1       
  172     1          Ist_IBF->RS_Pos_Start = Soll_IBF->RS_Pos_Start; 	// Po
     +            sitionen in 'Walzen' vor Profilieren 
  173     1          Ist_IBF->AG_Pos_Start = Soll_IBF->AG_Pos_Start; 	
  174     1          Ist_IBF->ASO_Pos_Start= Soll_IBF->ASO_Pos_Start;
     +              
  175     1          
  176     1          Ist_IBF->Vorring.Wandstaerke_Null    = Ist_Inter.Vorform.
     +            sm;  /* Übergabe der Rohlingswanddicke an IBF-Struktur */  
  177     1          Ist_IBF->Werkzeugdurchmesser = diam_dw;               /*
     +            Übergabe der Rohlingshöhe an IBF-Struktur | diam_dw in class
     +             rpw definiert */
  178     1          Ist_IBF->Vorring.D_Null      = Ist_Inter.Vorform.da;  /*
     +            Übergabe der Rohlingswanddicke an IBF-Struktur */ 
  179     1          Ist_IBF->Vorring.Start_Ringhoehe     = Ist_Inter.Vorform.
     +            hm;  /* Übergabe der Rohlingshöhe an IBF-Struktur */   
  180     1          
  181     1          Ist_IBF->FR                  = Ist_Inter.rs_f;        /*
     +            Übergabe der aktuellen RS-Kraft an IBF-Struktur */ 
  182     1          Ist_IBF->FA                  = Ist_Inter.as_f;        /*
     +            Übergabe der aktuellen AS-Kraft an IBF-Struktur */
     +             
  183     1       
  184     1       #if(MRAW)
  185     1          Ist_IBF->FA_f       = 0.1F;
  186     1          Ist_IBF->FR_f       = 0.1F;  // im Interfac gefilterte Kr
     +            aft
  187     1          Ist_IBF->s_f        = 0.1F;
  188     1          
  189     1       #else 
  190     1          Ist_IBF->FA_f       = 1.0F; //Aus_Puff.fa_mf; 
  191     1          Ist_IBF->FR_f       = 1.0F; //Aus_Puff.fr_mf;
  192     1          Ist_IBF->s_f        = 1.0F; //Aus_Puff.s1r;
  193     1       

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 7

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\source\rpw.cpp

Line  Level
  194     1       #endif
  195     1       //----------------------------------------------------------
     +            -----------------
  196     1       // Beginn AXPRO.H
  197     1       //----------------------------------------------------------
     +            -----------------
  198     1         
  199     1          
  200     1          //-------------------------------------------------------
     +            ----------------------------------
  201     1          //-----------------------Definition für Kraftregler/Filte
     +            rwerte u.ä.-----------------------
  202     1          //-------------------------------------------------------
     +            ----------------------------------
  203     1          
  204     1          
  205     1          float s_f_alt = 0.0F; // 	gefilterte Wanddicke zum Zeit
     +            punkt t-1 für Positionierung der oberen Kegelwalze
  206     1                     
  207     1          
  208     1          
  209     1          float KP = 0.00191F;        //Radialkraft Prop
  210     1          
  211     1          	
  212     1          float uk_ASO = 0;   			//Hilfsvariab
     +            le für Axialkraftregelung   MIC 040416
  213     1          float uk1_ASO = 0;          //Hilfsvariable für Axialkraf
     +            tregelung  MIC 040416
  214     1          
  215     1          
  216     1          // Filter für Ringdurchmesser     
  217     1          float	 diam_f = 0;			// gefilterte
     +            r Ringdurchmesser 
  218     1          float	 diam_f_alt = 0;	// letzter Wert Ringd
     +            urchmesser für Filter 
  219     1          
  220     1          
  221     1          
  222     1          float RS_Koll = 1.0F;      // Sicherheitsabstand RS-HW
     +             (1 mm)
  223     1          float AG_Koll =  5.0F;     // Sicherheitsabstand AS-RS
     +              (5 mm)
  224     1       
     +                   
  225     1          float eps = 0.1F;          // Positioniergenauigkeit mich
     +            l:-> war 0.1F
  226     1          
  227     1          float t_Halte = 50;        // Haltezeit in Vielfachen von
     +             100ms               
  228     1          float t_warte = 0;         // Wartezeit in Vielfaches von
     +             100ms   
  229     1          float t_warte_flag = 0;    // WarteFlag, damit t_warte be
     +            i der ersten Initialisierung gesetzt wird
  230     1                             
  231     1          //-------------------------------------------------------

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 8

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\source\rpw.cpp

Line  Level
     +            ---------------------------------------
  232     1          //--------------------------Variablen aus IBFPARA3.c-----
     +            ---------------------------------------
  233     1          //-------------------------------------------------------
     +            ---------------------------------------
  234     1          float Axialkraft;
  235     1          float Radialkraft;
  236     1          //-------------------------------------------------------
     +            ----------------------------------------
  237     1          //------------------------------sonstige Hilfsvariablen--
     +            ----------------------------------------
  238     1          //-------------------------------------------------------
     +            ---------------------------------------- 
  239     1             
  240     1              
  241     1           
  242     1          //-------------------------------------------------------
     +            ----------------------------------------- 
  243     1          float zaehler=0.01F;   
  244     1          float n = 0.0f;    
  245     1          float s_ist =0.0f;         
  246     1          
  247     1          //-------------------------------------------------------
     +            ----------------------------------------
  248     1          //------------------------- Variablen für die diskontinui
     +            erliche Funktion -----------------------
  249     1          //-------------------------------------------------------
     +            ----------------------------------------
  250     1          
  251     1          
  252     1          float t_dis_h = 0; // Haltezeit für 1.5 Umdrehungen, bei
     +            denen der Dorn stehen bleiben soll (Diskontinuierliche Abwal
     +            zung)
  253     1          
  254     1          float delta_h = 0.0F;
  255     1       
  256     1       //----------------------------------------------------------
     +            -----------------
  257     1       // Ende AXPRO.H
  258     1       //----------------------------------------------------------
     +            -----------------
  259     1       
  260     1          // Ring: Höhe und Wanddicke; Außendurchmesser 'diam' exte
     +            rn von interfac
  261     1          float h_a1;             // Ringhöhe nach Axialwalzspalt b
     +            zw. Entfernung Kr-K
  262     1          float s_r1;             // Wanddicke nach Radialwalzspalt
     +             bzw. Entfernung DW-HW
  263     1          float diam;             // Ringdurchmesser
  264     1       
  265     1          float Ta  = 0.1F;       // Filter 
  266     1          float Kpf = 1;
  267     1          float T1f = 1;     
  268     1       
  269     1          

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 9

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\source\rpw.cpp

Line  Level
  270     1          float Del_ASO_Pos;      // KORREKTUR ASO für axiale Walzk
     +            raftregelung MIC 040406
  271     1       
  272     1          float f_H;              // Drehfrequenz der HW in 1/s (_n
     +            icht_ 1/min!)
  273     1          
  274     1          float t_U;              // Zeit für eine Ringumdrehung
     +            
  275     1       
  276     1          int RS_HW = 1;    // Kollisionsgefahr RS-HW
  277     1          int RS_AG = 1;    // Kollisionsgefahr RS_AG
  278     1          int AG_RS = 1;    // Kollisionsgefahr AG-RS
  279     1          int AS_AS = 1;    // Kollisionsgefahr oKrw-uKw 
  280     1       
  281     1          // Pi 
  282     1          #ifndef  PI
  283     1          #define  PI 3.14159265
  284     1          #endif 
  285     1       
  286     1          /* Daten von Oberflaeche an Task */
     +            
  287     1          struct Def_Steuerbyte Steuerbyte_Lese; // far Steuerbyte_
     +            Lese; 
  288     1       
  289     1       //++++++++++ Zyklische Initialisierung und Aktualisierung de
     +            r Messgrößen ++++++++++
  290     1       
  291     1          // schritt_nr = Soll_Inter->schritt_nr;	// lese aktue
     +            llen Programmstatus (Koppers) 
  292     1          
  293     1          // aktuelle Positionen im Walzwerk auslesen und berechnen
     +            :
  294     1          Ist_IBF->RS_Pos   = Ist_Inter.rs_pos;
  295     1       //   Ist_IBF->RS_Pos   = Ist_Inter.rs_pos  - offset_rs;
     +             // aktuelle Dornposition
  296     1          Ist_IBF->AG_Pos   = Ist_Inter.ag_pos  - offset_agr;     /
     +            / aktuelle Axialgerüstposition
  297     1          Ist_IBF->ASO_Pos  = Ist_Inter.aso_pos - offset_aso;     /
     +            / aktuelle Axialschlittenposition oben
  298     1       #ifdef MRAW
  299     1          Ist_IBF->ASU_Pos  = Ist_Inter.asu_pos - offset_asu;     /
     +            / aktuelle Axialschlittenposition unten
  300     1       #endif
  301     1          Ist_IBF->TR_Pos   = Ist_Inter.tr_pos  - offset_tr;      /
     +            / aktuelle Tastrollenposition
  302     1          Ist_IBF->FR       = Ist_Inter.rs_f;                     /
     +            / aktuelle rad. Walzkraft     
  303     1          Ist_IBF->FA       = Ist_Inter.as_f;                     /
     +            / aktuelle axiale Walzkraft    
  304     1          
  305     1          // Sollgeschwindigkeiten im Walzwerk (alle 0 wg. aut init
     +             startpos):
  306     1          Soll_IBF->RS_V = Soll_IBF->ASO_V = Soll_IBF->AG_V = 1.0F;
     +                  //  !!!
  307     1            

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 10

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\source\rpw.cpp

Line  Level
  308     1          
  309     1          // aktuelle Ringgeometrie
  310     1          h_a1 = Ist_IBF->ASO_Pos;                               //
     +             Ringhöhe
  311     1          s_r1 = Ist_IBF->RS_Pos - ((diam_hw + diam_dw) / 2.0F); //
     +             Wanddicke; Problem wegen Breitung!?!?
  312     1          diam = Ist_IBF->TR_Pos + Ist_IBF->AG_Pos - (diam_hw / 2.0
     +            F);   // momentaner Ringdurchmesser
  313     1                                
  314     1          // Filter für Ringdurchmesser, Bö, 020528
  315     1          diam_f     = (Kpf * diam + ((T1f / Ta) * diam_f_alt)) / (
     +            (T1f / Ta) + 1);
  316     1          diam_f_alt = diam_f;         
  317     1                    
  318     1          // Sonstige Größen, Hilfsgrößen etc.
  319     1          f_H = Ist_Inter.hw_n/(hw_ir*60.0F);
  320     1          
  321     1          t_U = diam_f/(diam_hw*f_H); // Zeit für eine Ringumdrehun
     +            g gemessen in s
  322     1       
  323     1       //----------------------------------------------------------
     +            -----------------------------------------
  324     1       //------------------ Übergabe der Zahlenwerte aus IBFPARA-Fe
     +            nster -----------------------------------
  325     1       //----------------------------------------------------------
     +            -----------------------------------------
  326     1         
  327     1          Axialkraft                    = 0.0F;   // Keine Vorgabe
     +            der Sollkraft  = zahl10;   //*!!!* 
  328     1          Radialkraft                   = 0.0F;   // Keine Vorgabe
     +            der Sollkraft  = zahl11;   //*!!!* 
  329     1          Ist_IBF->Del_Kr_AGR           = 1.0F;
  330     1          Ist_IBF->Pos_auf_Mantel       = 1.0F;   // 	
  331     2          
  332     2       //----------------------------------------------------------
     +            ------------------------------------------	
  333     2       
  334     2       
  335     2       //++++++++++ Ende Initialisierung ++++++++++
  336     2       
  337     2       //########## Hand- bzw. Automatiksteuerung ausgehend von Kop
     +            pers Position bei Walzenstart ##########
  338     2       
  339     2          // Geschwindigkeiten sind in axpro.h vorbelegt
  340     2          // Startposition für jeweilige Ringgeometrie in axpro.h e
     +            intragen?
  341     2       
  342     2          if (! Ist_IBF->AUTO)		// AUTO = 0 heißt man
     +            uelle Steuerung
  343     2          {
  344     3       #ifdef MRAW
  345     3       
  346     3             if (Ist_IBF->StartPos == 1)
  347     3             {
  348     3                // Bei manuell braucht keine Startposition eingenom

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 11

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\source\rpw.cpp

Line  Level
     +            men werden !?!
  349     3                // Sollposition auf Istposition zu Beginn:
  350     3                Soll_IBF->RS_Pos  = Ist_IBF->RS_Pos;
  351     3                Soll_IBF->ASO_Pos = Ist_IBF->ASO_Pos;
  352     3                Soll_IBF->AG_Pos  = Ist_IBF->AG_Pos;
  353     3                
  354     3                // Sollgeschwindigkeiten im Walzwerk:
  355     3                Soll_IBF->RS_V = 100000.0F;
  356     3                Soll_IBF->ASO_V = 1.0F;
  357     3                Soll_IBF->AG_V = 1.0F;
  358     3                
  359     3                
  360     3                Ist_IBF->StartPos = 0;
  361     3             };
     +                   
  362     3             
  363     3             _settextposition(6,1);
  364     3             printf("Manuelle Steuerung: Beenden mit klein 'l': ");
     +              
  365     3             printf("TEST fuer Pause die Taste 'p' druecken");
  366     3       
  367     3             if (kbhit()) Ist_IBF->ManAuswahl = getch();
  368     3       
  369     3             switch (Ist_IBF->ManAuswahl)
  370     3             {
  371     3       
  372     3                case 't': Soll_IBF->RS_Pos = Soll_IBF->RS_Pos - 0.2
     +            F;	break;	// Radialschlitten
  373     3                //case 'w': Soll_RS_Pos = Soll_RS_Pos - 0.1F;	break
     +            ;
  374     3                case 'z': Soll_IBF->RS_Pos = Ist_IBF->RS_Pos; break
     +            ;
  375     3                //case 'r': Soll_RS_Pos = Soll_RS_Pos + 0.1F;	break
     +            ;
  376     3                case 'u': Soll_IBF->RS_Pos = Soll_IBF->RS_Pos + 0.2
     +            F; 	break;
  377     3                
  378     3                case 'd': Soll_IBF->AG_Pos = Soll_IBF->AG_Pos - 0.2
     +            F;	break;	//	Axialgerüst
  379     3                //case 's': Soll_AG_Pos = Soll_AG_Pos - 0.1F;	break
     +            ;
  380     3                case 'f': Soll_IBF->AG_Pos = Ist_IBF->AG_Pos; break
     +            ;
  381     3                //case 'f': Soll_AG_Pos = Soll_AG_Pos + 0.1F;	break
     +            ;
  382     3                case 'g': Soll_IBF->AG_Pos = Soll_IBF->AG_Pos + 0.2
     +            F;	break;
  383     3                
  384     3                case 'y': Soll_IBF->ASO_Pos = Soll_IBF->ASO_Pos - 0
     +            .2F;	break;	//	Axialschlitten
  385     3                //case 'x': Soll_AS_Pos = Soll_AS_Pos - 0.1F;	break
     +            ;
  386     3                case 'x': Soll_IBF->ASO_Pos = Ist_IBF->ASO_Pos; bre
     +            ak;
  387     3                //case 'v': Soll_AS_Pos = Soll_AS_Pos + 0.1F;	break

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 12

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\source\rpw.cpp

Line  Level
     +            ;
  388     3                case 'c': Soll_IBF->ASO_Pos = Soll_IBF->ASO_Pos + 0
     +            .2F;	break;
  389     3                
  390     3                default: break;
  391     3              }  // Klammer zu: switch (ManAuswahl) 
  392     3       #endif         
  393     3          } // Klammer zu: if !AUTO then
  394     3       
  395     3          else  // von if !AUTO
  396     3          {     // automatische Steuerung:
  397     5       
  398     5                // Da Messwerte von Anlage und Mess-Schieber differ
     +            ieren (...), vor Beginn 
  399     5                // des Profilierens Aussenkontur (radial/axial) des
     +             Ringes von Hand anfahren ??
  400     5                // -> von Hand angefahrene Positionen beschreiben d
     +            en Ausgangszustand ??
  401     5       
  402     5             switch (Ist_IBF->Profilflag)      // IBF_Allgemein.IBF
     +            _Allgemein.Profilflag in axpro.h definiert, bei Step 6 in in
     +            terfac auf -1 gesetzt! 
  403     5             {
  404     5             
  405     5             case -1:    // ---------------------------------------
     +            -----------
  406     5                         //----- Startpositionen lesen, Sollwertvor
     +            gabe ------
  407     5                         //----------------------------------------
     +            -----------						
  408     5                         //   Memoryflag=IBF_Allgemein.IBF_Allgemei
     +            n.Profilflag;   //für Pausenfunktion
  409     5       
  410     5                         /* Geschwindigkeiten  */
  411     5                         Soll_IBF->RS_V  = 0.0F;
  412     5                         Soll_IBF->ASO_V = 0.0F; 
  413     5                         Soll_IBF->Soll_ASU_V = 0.0F;
  414     5                         Soll_IBF->AG_V  = 0.0F;
  415     5                         Soll_IBF->Soll_ZAL_V = 0.0F;
  416     5                         Soll_IBF->Soll_ZAR_V = 0.0F;
  417     5       
  418     5                         /* Kräfte */
  419     5                         Soll_IBF->RS_Kraft = Ist_IBF->Flag.rs_kraf
     +            tregler_aktiv ? Ist_IBF->RS_Kraft_Vorgabe : 100000.0F ; 
  420     5                         Soll_IBF->AS_Kraft = Ist_IBF->Flag.as_kraf
     +            tregler_aktiv ? Ist_IBF->AS_Kraft_Vorgabe :  80000.0F ; 
  421     5                         Soll_IBF->AG_Kraft = Ist_IBF->Flag.ag_kraf
     +            tregler_aktiv ? Ist_IBF->AG_Kraft_Vorgabe :  10000.0F ; 
  422     5                         //Soll_IBF->ZAR_Kraft = Ist_IBF.Flag.zal_k
     +            raftregler_aktiv ? Ist_IBF->ZAL_Kraft_Vorgabe :  10000.0F ;
     +            
  423     5                         //Soll_IBF->ZAL_Kraft = Ist_IBF.Flag.zar_k
     +            raftregler_aktiv ? Ist_IBF->ZAR_Kraft_Vorgabe :  10000.0F ;
     +            
  424     5                     

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 13

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\source\rpw.cpp

Line  Level
  425     5                       
  426     5                         /* Drehzahl */
  427     5                         Soll_Inter->kwo_n    = kw_ia/hw_ir * (diam
     +            _hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AGR + Ist_IBF->
     +            Pos_auf_Mantel)*sin_kw_winkel_halbe);
  428     5                         Soll_Inter->kwu_n    = kw_ia/hw_ir * (diam
     +            _hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AGR + Ist_IBF->
     +            Pos_auf_Mantel)*sin_kw_winkel_halbe);
     +            	
  429     5                        
  430     5                         /* Position */
  431     5                         Soll_IBF->RS_Pos_Start = Ist_IBF->RS_Pos;
     +                  // wird in case '3' -> hier Auffahren benötigt
  432     5                         
  433     5                         Soll_IBF->AG_Pos  = Soll_IBF->AG_Pos_Start
     +             = Ist_IBF->AG_Pos; // AG_Pos == auslesen der Werte aus PA-K
     +            arte inkl. Offset
     +            
  434     5                         
  435     5                         
  436     5                         //----------------------------------------
     +            -----------------------------------------
  437     5                         //------------Vorgabe für Startposition de
     +            s Radialschlitten------------------------
  438     5                         //----------------------------------------
     +            -----------------------------------------
  439     5                         
  440     5                         
  441     5                         //Soll_IBF->RS_Pos_Null = (diam_hw + Ist_I
     +            BF->Werkzeugdurchmesser)/2 + Ist_IBF->Wandstaerke_Null;  //
     +            Nullpunkt des Radialschlittens als Abstand zwischen Hauptwal
     +            zedurchmesser, Wandstärke und Dornwalzendurchmesser 
  442     5                         Soll_IBF->RS_Pos_Null = Ist_IBF->Vorring.W
     +            andstaerke_Null;          /* Nullpkt. Radialschlitten entspr
     +            echend vorgegeber Wandstärke   [mm] */
  443     5       
  444     5                         Soll_IBF->RS_Pos = Soll_IBF->RS_Pos_Null;
     +            // definiert für RS_Pos in case 'a'  
  445     5                         
  446     5                         //----------------------------------------
     +            -----------------------------------------
  447     5                         //------------Vorgabe für Startposition de
     +            r Axialschlitten ------------------------
  448     5                         //----------------------------------------
     +            -----------------------------------------
  449     5                         
  450     5                         Soll_IBF->AG_Pos_Null = Ist_IBF->AG_Pos; 
  451     5                         
  452     5       
     +              
  453     5                         //----------------------------------------
     +            ----------------------------------------
  454     5                         //------------Vorgaben für oberen Axialsch
     +            litten----------------------------------
  455     5                         //----------------------------------------

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 14

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\source\rpw.cpp

Line  Level
     +            ----------------------------------------
  456     5                         
  457     5                         
  458     5                         Soll_IBF->ASO_Pos_Null = Ist_IBF->Vorring.
     +            Start_Ringhoehe + 15.0F; 	/* Vorgabe der Ringhöhe, die
     +            in CARWIN vorgegeben wird */
  459     5                         Soll_IBF->ASO_Pos_Start = Soll_IBF->ASO_Po
     +            s_Null;						
  460     5                         
  461     5       
  462     5                         #if (FALSE)
  463     5                         _settextposition(28,1);
  464     5                         printf("case -1");
  465     5                         #endif   
  466     5                         t_Halte= 50; //t_Halte = 10*2*diam_f/(diam
     +            _hw*f_H); // Haltezeit entspricht 1 Ringumdrehung, nötig als
     +             Kriterium bei Kraftanfahrposition 
  467     5                         Soll_IBF->Profilflag = 0;
  468     5                      
  469     5                         break; //case -1
  470     5          
  471     5          
  472     5          case 0:     //-------------------------------------------
     +            ---------------------
  473     7                      //----------------Routine für Startposition--
     +            ---------------------
  474     7                      //-------------------------------------------
     +            ---------------------
  475     7                      //Memoryflag=IBF_Allgemein.IBF_Allgemein.Prof
     +            ilflag;						//für
     +             Pausefunktion
  476     7                 
  477     7                      switch (Ist_IBF->InitAchse) 
  478     7                         {
  479     7                         
  480     7                           // Programmexample for IFM 2006
  481     7                           //Spezieller Programmcode zur Verifikati
     +            on einer Dornbewegung
  482     7                           // Ausgangswandicke entspricht der Carwi
     +            nwanddicke, Diese soll um 100 mm reduziert werden mit v=2.0
     +            mm/s und anschließend wieder zurücke auf Ausgangswanddicke
     +                          
  483     7       
  484     7                           //!!!ACHTUNG!!! in Datei rwth_task.cpp m
     +            uss die Initialisierung wieder geändert werden, wenn richtig
     +             gewalzt werden soll
  485     7       
  486     7                       case 'v':
  487     7                                    Soll_IBF->RS_V = 2.0F;
  488     7                                    Soll_IBF->AG_V  = 0.0F;
  489     7                                    Soll_IBF->ASO_V = 2.0F; 
  490     7                                    Soll_IBF->Soll_ASU_V = 0.0F;
  491     8                                       
  492     8                                    
  493     8                                                              

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 15

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\source\rpw.cpp

Line  Level
  494     8                                    //Überprüfen, ob Dornposition e
     +            rreicht ist Soll_IBF->RS_Pos_Null
  495     8                                   if(Ist_IBF->RS_Pos <= Soll_IBF->
     +            RS_Pos + 1.0F) // Ab hier wird Radialschlitten positionieren
     +            
  496     9                                      {
  497     9                                         Soll_IBF->RS_Pos = Ist_IBF
     +            ->RS_Pos - 100.0f;                                 
  498     9                                         Soll_IBF->ASO_Pos = Soll_I
     +            BF->ASO_Pos_Null - 40.0F;                                  
  499     9                                         Soll_IBF->InitAchse = 'w';
     +            
  500     7                                         break;
  501     7                                      }
  502     7                                   break;
  503     7       
  504     7             
  505     7                         case 'w': 
  506     7                                    Soll_IBF->RS_V         = 0.95F;
     +            
  507     7                                    Soll_IBF->AG_V         = 0.0F;
  508     7                                    Soll_IBF->ASO_V        = 0.75F;
     +             
  509     7                                    Soll_IBF->Soll_ASU_V   = 0.0F;
  510     7                                       
  511     7                                    // test: Werte befinden sich je
     +            tz in den if-Anweisungen Soll_Inter->rs_v = Soll_RS_V;
     +              
  512     7                                  
  513     7                                                          
  514     7                                    Soll_Inter->kwo_n = 0.5F*kw_ia/
     +            hw_ir * (diam_hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AG
     +            R + Ist_IBF->Pos_auf_Mantel)*sin_kw_winkel_halbe);
  515     7                                    Soll_Inter->kwu_n = 0.5F*kw_ia/
     +            hw_ir * (diam_hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AG
     +            R + Ist_IBF->Pos_auf_Mantel)*sin_kw_winkel_halbe);
     +                 			
  516     8                                   
  517     8                                    if(Ist_IBF->RS_Pos <= Soll_IBF-
     +            >RS_Pos) // Ab hier wird Radialschlitten positionieren
  518     9                                      {
  519     9                                         Soll_IBF->RS_Pos = Soll_IB
     +            F->RS_Pos_Null;
  520     7                                        //Soll_IBF->Soll_RS_V = 0.5
     +            F;
  521     7                                        //     Soll_IBF->InitAchse
     +            = 'b1';
  522     7                                         break;
  523     7                                      }
  524     7                                                           
  525     7         
  526     7       
  527     7                                    break;
  528     7       
  529     7       

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 16

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\source\rpw.cpp

Line  Level
  530     7       
  531     7                           case 'a':  /* Positionieren des Radialsc
     +            hlittens */	
  532     8                                     
  533     8                                    if(FALSE)
  534     7                                    {
  535     7                                    #ifdef MRAW
  536     7                                        _settextposition(10,1); pri
     +            ntf("MAPW: RS_Pos %8.1f  Soll_RS_Pos %8.1f RS_Pos_Null%8.1f,
     +             gefilterter %8.1f", Ist_IBF->RS_Pos, Soll_IBF->RS_Pos, Ist_
     +            IBF->RS_Pos_Null, diam_f);
     +            					
  537     7                                        _settextposition(13,1); pri
     +            ntf("Dorn%8.1f, Hauptwalze%8.1f, t_Halte%8.1f",diam_dw, diam
     +            _hw, t_Halte);
  538     7                                    #endif
  539     7                                    }
  540     7                    
  541     7                                   
  542     7                                   /* Geschwindigkeiten  */
  543     7                                    //Soll_IBF->RS_V       = s. Kla
     +            mmer
  544     7                                    Soll_IBF->ASO_V        = 5.0F;
     +            
  545     7                                    Soll_IBF->Soll_ASU_V   = 0.0F;
  546     7                                    Soll_IBF->AG_V         = 0.0F;
  547     7                                    Soll_IBF->Soll_ZAL_V   = 0.0F;
  548     7                                    Soll_IBF->Soll_ZAR_V   = 0.0F;
  549     7       
  550     7                                    /* Kräfte */
  551     7                                    //Soll_IBF->RS_Kraft = Ist_IBF-
     +            >Flag.rs_kraftregler_aktiv ? Ist_IBF->RS_Kraft_Vorgabe : 100
     +            000.0F ; 
  552     7                                    Soll_IBF->AS_Kraft = Ist_IBF->F
     +            lag.as_kraftregler_aktiv ? Ist_IBF->AS_Kraft_Vorgabe :  8000
     +            0.0F ; 
  553     7                                    Soll_IBF->AG_Kraft = Ist_IBF->F
     +            lag.ag_kraftregler_aktiv ? Ist_IBF->AG_Kraft_Vorgabe :  1000
     +            0.0F ; 
  554     7                                    //Soll_IBF->ZAR_Kraft = Ist_IBF
     +            .Flag.zal_kraftregler_aktiv ? Ist_IBF->ZAL_Kraft_Vorgabe :
     +            10000.0F ; 
  555     7                                    //Soll_IBF->ZAL_Kraft = Ist_IBF
     +            .Flag.zar_kraftregler_aktiv ? Ist_IBF->ZAR_Kraft_Vorgabe :
     +            10000.0F ;
  556     7                                       
  557     7                                    /* Drehzahl */
  558     7                                    Soll_Inter->kwo_n = 0.5F*kw_ia/
     +            hw_ir * (diam_hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AG
     +            R + Ist_IBF->Pos_auf_Mantel)*sin_kw_winkel_halbe);
  559     7                                    Soll_Inter->kwu_n = 0.5F*kw_ia/
     +            hw_ir * (diam_hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AG
     +            R + Ist_IBF->Pos_auf_Mantel)*sin_kw_winkel_halbe);
     +                 			
  560     8                                 

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 17

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\source\rpw.cpp

Line  Level
  561     8                                     
  562     8                                    //-----------------------------
     +            --------------------------------------------
  563     8                                    //---------Anfahrroutine Dorn p
     +            er Kraftregelung---------------------------- 
  564     8                                    //-----------------------------
     +            --------------------------------------------
  565     8                                   
  566     8                              if(Ist_IBF->Flag.rs_kraftanfahren_akt
     +            iv != 0) //Radialkraft!= 0.0F)	//aus IBF-Para(Radv01) vorgeg
     +            eben               	  
  567     9                               {  	
  568     9                                       /* Vorgaben: Kraft*/
  569     9       
  570     9                                       Ist_IBF->Flag.rs_kraftregler
     +            _aktiv = Ist_IBF->Flag.rs_kraftanfahren_aktiv; /* Schalter:
     +            Walzen mit Kraftsteuerung 'AN' */
  571     9                                       Soll_IBF->RS_Kraft = Ist_IBF
     +            ->Flag.rs_kraftregler_aktiv ? Ist_IBF->RS_Kraft_Anfahren : 1
     +            00000.0F ; 
  572     9                                       
  573     9                                       /* Vorgabe: Geschwindigkeit*
     +            /
  574     9                                       Soll_IBF->RS_V  = 7.0F;
     +                           /* Dorn, Radialschlitten */
  575     9                                                              
  576     9                                       /* Vorgabe: Position */
  577     9                                       //Soll_IBF->RS_Pos = aus cas
     +            e -1 
  578     9                                       Soll_IBF->ASO_Pos = Ist_IBF-
     +            >Vorring.Start_Ringhoehe + 1.5F; //da Ring gerne klettert, w
     +            ird bereits hier ASO zugestellt
  579    10       
     +            				
  580    10                                       
  581    10                                     //----------------------------
     +            -----------------------------------------------------
  582    10                                     //   Routine um Radialschlitte
     +            n auf Kraft anzufahren      
  583    10                                     //----------------------------
     +            -----------------------------------------------------
  584    10                               
  585    10                                       if ((Ist_IBF->FR) == (Ist_IB
     +            F->RS_Kraft_Vorgabe))
  586    11                                       {
  587    11                                          Soll_IBF->RS_Pos = Ist_IB
     +            F->RS_Pos;
  588    11                                          Soll_IBF->InitAchse = 'b'
     +            ;
  589    11                                          zaehler=0.5F;
  590    10                                          t_Halte=100.0F;   //Zaehl
     +            er für Kraftanfahrt des Axialschlittens
  591     7                                       }
  592     7       
  593     7              

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 18

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\source\rpw.cpp

Line  Level
  594     7       
  595     7                               #ifdef MRAW
  596     7                                      
  597     7                                      if (Ist_IBF->RS_Pos <= (Ist_I
     +            BF->RS_Pos_Null + eps) && t_Halte >= 30)
  598     7                                       { 
  599     7                                          Soll_IBF->RS_Pos = Ist_IB
     +            F->RS_Pos_Null - n;
  600     7                                          n= n + 0.01F;
  601     7                                       }
  602     7       
  603     7                                      if ((Ist_IBF->FR_f >= Radialk
     +            raft) && (Ist_IBF->RS_Pos <= Ist_IBF->RS_Pos_Null)) 
  604     7                                      { 
  605     7                                            t_Halte--;
  606     7                                            if (t_Halte == 0)
  607     7                                            {
  608     7                                              Soll_IBF->RS_Pos = Is
     +            t_IBF->RS_Pos; // erreicht
  609     7                                              Soll_IBF->RS_V= 2.0F;
     +            
  610     7                                
  611     7                                              Soll_IBF->InitAchse =
     +             'b';
  612     7                                              zaehler=0.5F;
  613     7                                              t_Halte=100.0F;   //z
     +            aehler für Kraftanfahrt des Axialschlittens
  614     7                                            } 
  615     7                                            else break;
  616     7                                      } // end if(FR_f >=...)
  617     7                               #endif       
  618     7                                      
  619     7                                   else   break;   	
  620     8                                       
  621     8                                 }//end if(Radialkraft != NULL)
  622     8                                             
  623     8                                                
  624     8                                if(Ist_IBF->Flag.rs_kraftanfahren_a
     +            ktiv == 0)	
  625     9                                  { 		
  626     9                                   
  627     9                                   /*Vorgabe: Kraft*/    
  628     9                                   Soll_IBF->RS_Kraft = Ist_IBF->Fl
     +            ag.rs_kraftregler_aktiv ? Ist_IBF->RS_Kraft_Vorgabe : 100000
     +            .0F ;        
  629     9                                   Soll_IBF->RS_V  = 8.0F;
     +               // Dorn, Radialschlitten
  630     9                                                     
  631     9                                         Soll_IBF->RS_Pos = Soll_IB
     +            F->RS_Pos_Null;
  632     9                                         Soll_IBF->AG_Pos = Ist_IBF
     +            ->Vorring.Start_Ringhoehe + 1.5F; //da Ring gerne klettert,
     +            wird bereits hier ASO zugestellt..
  633    10        
  634    10                                      if(Ist_IBF->RS_Pos <= Soll_IB

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 19

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\source\rpw.cpp

Line  Level
     +            F->RS_Pos) // Ab hier wird Radialschlitten positionieren
  635    11                                      {
  636    11                                         Soll_IBF->InitAchse = 'b';
     +            
  637     9                                         zaehler = 0.5F;
     +                 //zaehler für Kraftsteuerung des Axialschlitten
  638     7                                      }
  639     7       
  640     7                                  break;   
  641     7                                 }// end if(Radial== NULL)  
  642     7       
  643     7        
  644     7                                           
  645     7                                
  646     7                             
  647     7                               break; // zu case 'a'
  648     7       
  649     7           
  650     7                         case 'b':   /*Positionsvorgabe:  Axialgerü
     +            st*/               				
  651     7                                     
  652     7                                    /* Geschwindigkeiten  */
  653     7                                    Soll_IBF->RS_V         = 0.0F;
  654     7                                    Soll_IBF->ASO_V        = 5.0F;
     +            
  655     7                                    //Soll_IBF->Soll_ASU_V   = 0.0F
     +            ;
  656     7                                    //Soll_IBF->AG_V         = 10.0
     +            F;
  657     7                                    //Soll_IBF->Soll_ZAL_V   = 0.0F
     +            ;
  658     7                                    //Soll_IBF->Soll_ZAR_V   = 0.0F
     +            ;
  659     7       
  660     7                                    /* Kräfte */
  661     7                                    //Soll_IBF->RS_Kraft = Ist_IBF-
     +            >Flag.rs_kraftregler_aktiv ? Ist_IBF->RS_Kraft_Vorgabe : 100
     +            000.0F ; 
  662     7                                    Soll_IBF->AS_Kraft = Ist_IBF->F
     +            lag.as_kraftregler_aktiv ? Ist_IBF->AS_Kraft_Vorgabe :  8000
     +            0.0F ; 
  663     7                                    Soll_IBF->AG_Kraft = Ist_IBF->F
     +            lag.ag_kraftregler_aktiv ? Ist_IBF->AG_Kraft_Vorgabe :  1000
     +            0.0F ; 
  664     7                                    //Soll_IBF->ZAR_Kraft = Ist_IBF
     +            .Flag.zal_kraftregler_aktiv ? Ist_IBF->ZAL_Kraft_Vorgabe :
     +            10000.0F ; 
  665     7                                    //Soll_IBF->ZAL_Kraft = Ist_IBF
     +            .Flag.zar_kraftregler_aktiv ? Ist_IBF->ZAR_Kraft_Vorgabe :
     +            10000.0F ;
  666     7                                       
  667     7                                    /* Drehzahl */
  668     7                                    Soll_Inter->kwo_n = 0.5F*kw_ia/
     +            hw_ir * (diam_hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AG
     +            R + Ist_IBF->Pos_auf_Mantel)*sin_kw_winkel_halbe);

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 20

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\source\rpw.cpp

Line  Level
  669     7                                    Soll_Inter->kwu_n = 0.5F*kw_ia/
     +            hw_ir * (diam_hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AG
     +            R + Ist_IBF->Pos_auf_Mantel)*sin_kw_winkel_halbe);
     +                 			
  670     7                                 
  671     7                                     /*Position*/
     +            
  672     7                                     Soll_IBF->AG_Pos = Ist_IBF->Vo
     +            rring.D_Null + diam_hw/2 - Ist_IBF->Pos_auf_Mantel - Ist_IBF
     +            ->Del_Kr_AGR ;     // 10 steht für die Variable Pos_auf_Mant
     +            el
  673     7                                     
  674     7                                     
  675     7                                     /*Zähler - Merker*/
  676     7                                     n=0.1f;
  677     7                                     Soll_IBF->InitAchse ='c';
  678     7                                     
  679     7                                     break; // zu case 'b'
  680     7       
  681     7                         case 'c':   /*Position Axialgerüst*/
  682     7                                    
  683     7                                     /* Geschwindigkeiten  */
  684     7                                     Soll_IBF->RS_V         = 0.0F;
     +            
  685     7                                     Soll_IBF->ASO_V        = 5.0F;
     +             
  686     7                                     //Soll_IBF->Soll_ASU_V   = 0.0
     +            F;
  687     7                                     //Soll_IBF->AG_V         = 10.
     +            0F;
  688     7                                     //Soll_IBF->Soll_ZAL_V   = 0.0
     +            F;
  689     7                                     //Soll_IBF->Soll_ZAR_V   = 0.0
     +            F;
  690     7       
  691     7                                     /* Kräfte */
  692     7                                     //Soll_IBF->RS_Kraft = Ist_IBF
     +            ->Flag.rs_kraftregler_aktiv ? Ist_IBF->RS_Kraft_Vorgabe : 10
     +            0000.0F ; 
  693     7                                     Soll_IBF->AS_Kraft = Ist_IBF->
     +            Flag.as_kraftregler_aktiv ? Ist_IBF->AS_Kraft_Vorgabe :  800
     +            00.0F ; 
  694     7                                     Soll_IBF->AG_Kraft = Ist_IBF->
     +            Flag.ag_kraftregler_aktiv ? Ist_IBF->AG_Kraft_Vorgabe :  100
     +            00.0F ; 
  695     7                                     //Soll_IBF->ZAR_Kraft = Ist_IB
     +            F.Flag.zal_kraftregler_aktiv ? Ist_IBF->ZAL_Kraft_Vorgabe :
     +             10000.0F ; 
  696     7                                     //Soll_IBF->ZAL_Kraft = Ist_IB
     +            F.Flag.zar_kraftregler_aktiv ? Ist_IBF->ZAR_Kraft_Vorgabe :
     +             10000.0F ;
  697     7                                       
  698     7                                     /* Drehzahl */
  699     7                                     Soll_Inter->kwo_n = 0.5F*kw_ia
     +            /hw_ir * (diam_hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_A

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 21

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\source\rpw.cpp

Line  Level
     +            GR + Ist_IBF->Pos_auf_Mantel)*sin_kw_winkel_halbe);
  700     7                                     Soll_Inter->kwu_n = 0.5F*kw_ia
     +            /hw_ir * (diam_hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_A
     +            GR + Ist_IBF->Pos_auf_Mantel)*sin_kw_winkel_halbe);
     +                  			
  701     7                                 
  702     7                                     /*Position*/  
  703     7         
  704     7                                     /*Zähler - Merker*/
  705     7                                     t_Halte=500; // 200 ms = 2 sec
     +             abwarten
  706     7                                     
  707     7                                     #ifdef MRAW
  708     7                                     if (Soll_IBF->AG_Pos < (Ist_IB
     +            F->AG_Pos_Start))
  709     7                                     {
  710     7                                        if (Ist_IBF->AG_Pos <= (Sol
     +            l_IBF->AG_Pos + eps)) 
  711     7                                        {
  712     7                                           Soll_IBF->InitAchse = 'd
     +            ';
  713     7                                           break;
  714     7                                        }
  715     7                                        else 
  716     7                                        {
  717     7                                           #ifdef MRAW
  718     7                                              _settextposition(9,1)
     +            ;
  719     7                                              printf(" AG_Pos mit P
     +            LUS eps ");
  720     7                                           #endif
  721     7                                        }//end if
  722     7                                     }//end if
  723     7                                     else
     +                                 
  724     7                                     {
  725     7                                        if (Ist_IBF->AG_Pos >= (Sol
     +            l_IBF->AG_Pos - eps)) 
  726     7                                        {
  727     7                                           Soll_IBF->InitAchse = 'd
     +            ';
  728     7                                           break;
  729     7                                        }
  730     7                                        else 
  731     7                                        {
  732     7                                           #ifdef MRAW   
  733     7                                              _settextposition(9,1)
     +            ;
  734     7                                              printf(" AG_Pos mit M
     +            INUS eps");
  735     7                                           #endif
  736     7                                        }
  737     7                                     }//end else
  738     7                                     #endif
  739     7                                     

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 22

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\source\rpw.cpp

Line  Level
  740     7                                     Soll_IBF->InitAchse = 'd'; //
     +            AG wird noch nicht positioniert, deshalb direkt weiterleiten
     +             an nächste case-Anweisung                               bre
     +            ak; // zu case 'c'
  741     7                         
  742     7                         case 'd':   /*Position Axialschlitten*/
  743     7                                     
  744     7                                     /* Geschwindigkeiten  */
  745     7                                     Soll_IBF->RS_V         = 0.0F;
     +            
  746     7                                     Soll_IBF->ASO_V        = 5.0F;
     +             
  747     7                                     //Soll_IBF->Soll_ASU_V   = 0.0
     +            F;
  748     7                                     //Soll_IBF->AG_V         = 10.
     +            0F;
  749     7                                     //Soll_IBF->Soll_ZAL_V   = 0.0
     +            F;
  750     7                                     //Soll_IBF->Soll_ZAR_V   = 0.0
     +            F;
  751     7       
  752     7                                     /* Kräfte */
  753     7                                     //Soll_IBF->RS_Kraft = Ist_IBF
     +            ->Flag.rs_kraftregler_aktiv ? Ist_IBF->RS_Kraft_Vorgabe : 10
     +            0000.0F ; 
  754     7                                     Soll_IBF->AS_Kraft = Ist_IBF->
     +            Flag.as_kraftregler_aktiv ? Ist_IBF->AS_Kraft_Vorgabe :  800
     +            00.0F ; 
  755     7                                     Soll_IBF->AG_Kraft = Ist_IBF->
     +            Flag.ag_kraftregler_aktiv ? Ist_IBF->AG_Kraft_Vorgabe :  100
     +            00.0F ; 
  756     7                                     //Soll_IBF->ZAR_Kraft = Ist_IB
     +            F.Flag.zal_kraftregler_aktiv ? Ist_IBF->ZAL_Kraft_Vorgabe :
     +             10000.0F ; 
  757     7                                     //Soll_IBF->ZAL_Kraft = Ist_IB
     +            F.Flag.zar_kraftregler_aktiv ? Ist_IBF->ZAR_Kraft_Vorgabe :
     +             10000.0F ;
  758     7                                       
  759     7                                     /* Drehzahl */
  760     7                                     Soll_Inter->kwo_n = 0.5F*kw_ia
     +            /hw_ir * (diam_hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_A
     +            GR + Ist_IBF->Pos_auf_Mantel)*sin_kw_winkel_halbe);
  761     7                                     Soll_Inter->kwu_n = 0.5F*kw_ia
     +            /hw_ir * (diam_hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_A
     +            GR + Ist_IBF->Pos_auf_Mantel)*sin_kw_winkel_halbe);
     +                  			
  762     7                                 
  763     7                                     /*Position*/  
  764     7                                     Soll_IBF->Soll_ASU_Pos = 0.0F;
     +             
  765     7       
  766     7                                     /*Zähler - Merker*/
  767     7                                     Ist_IBF->Afpos_dw = Ist_IBF->R
     +            S_Pos;     // Variable in der aktuelle Dornposition definier
     +            t ist nachdem Dorn positioniert worden ist

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 23

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\source\rpw.cpp

Line  Level
  768     8       
  769     8                                    
  770     8                                     //----------------------------
     +            ----------------------------------------------------------
  771     8                                     //----------------Anfahren des
     +             Axialschlittens auf Kraft--------------------------------
  772     8                                     //----------------------------
     +            ---------------------------------------------------------- 
  773     8                                     
  774     8                                     if(Ist_IBF->Flag.as_kraftanfah
     +            ren_aktiv != 0)  //wird nur durchlaufen, wenn Kraft angegebe
     +            n
  775     9                                     {
  776     9                                       
  777     9                                       /* Vorgaben: Kraft*/
  778     9       
  779     9                                       Ist_IBF->Flag.as_kraftregler
     +            _aktiv = Ist_IBF->Flag.as_kraftanfahren_aktiv; /* Schalter:
     +            Walzen mit Kraftsteuerung 'AN' */
  780     9                                       Soll_IBF->AS_Kraft = Ist_IBF
     +            ->Flag.as_kraftregler_aktiv ? Ist_IBF->AS_Kraft_Anfahren : 1
     +            00000.0F ; 
  781     9                                       
  782     9                                       /* Vorgabe: Geschwindigkeit*
     +            /
  783     9                                       
  784     9                                       /* Vorgabe: Position */
  785     9                                       //Soll_IBF->RS_Pos = aus cas
     +            e -1 
  786     9                                       Soll_IBF->ASO_Pos = Ist_IBF-
     +            >Vorring.Start_Ringhoehe - 1.5F; //da Ring gerne klettert, w
     +            ird bereits hier ASO zugestellt
  787    10       
     +            				
  788    10                                       
  789    10                                     //----------------------------
     +            -----------------------------------------------------
  790    10                                     //   Routine um Radialschlitte
     +            n auf Kraft anzufahren      
  791    10                                     //----------------------------
     +            -----------------------------------------------------
  792    10                               
  793    10                                       if ((Ist_IBF->FR) == (Ist_IB
     +            F->RS_Kraft_Vorgabe))
  794    11                                       {
  795    11                                          Soll_IBF->RS_Pos = Ist_IB
     +            F->RS_Pos;
  796    11                                          Soll_IBF->InitAchse = 'b'
     +            ;
  797    11                                          zaehler=0.5F;
  798     7                                          t_Halte=100.0F;   //Zaehl
     +            er für Kraftanfahrt des Axialschlittens
  799     8                                       }
  800     8                                     
  801     8                                     

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 24

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\source\rpw.cpp

Line  Level
  802     8                                       #ifdef MRAW
  803     8                                           _settextposition(2,10);
  804     8                                           printf("ASO anhand Kraft
     +            ");
  805     8                                        
  806     8                                        Soll_IBF->ASO_Pos = Ist_IBF
     +            ->Vorring.Start_Ringhoehe - 10.0F;    //!!statt Zaehler wurd
     +            e als Wert 10 (mm) eingesetzt;;;zaehler wurde in case'a' auf
     +             den Wert 0.5F gesetzt
  807     8                                        
  808     8                                        if (Ist_IBF->FA_f >= Axialk
     +            raft  || Ist_IBF->FA_f == Axialkraft /*|| t_Halte == 0*/) //
     +            JETZT MIT TEST TEST TEST....wirkende Axialkraft1 ist gemitte
     +            lte AG-Kraft durch Eigengewicht !!
  809     8                                        {
  810     8                                           #ifdef MRAW
  811     8                                       	 _settextposition(2,1
     +            0);
  812     8                                            printf("ASO hat Positio
     +            n durch Kraft erreicht FA: %8.1f-eingabe-: %8.1f", Ist_IBF->
     +            FA, Axialkraft);
  813     8                                           #endif
  814     8                                           Soll_IBF->ASO_Pos = Ist_
     +            IBF->ASO_Pos;
  815     8                                     
  816     8                                           Soll_IBF->ASO_V   = 1.0F
     +            ;
  817     8                                           
  818     8                                           Soll_IBF->InitAchse    =
     +             ' ';
  819     8                                           Soll_IBF->Profilflag   =
     +             1; 
  820     8                                        }// end if
  821     8                                       #endif
  822     8                                     }//end if(Axialkraft!=NULL) 
  823     8                                     
  824     8                                     
  825     8                                     if(Ist_IBF->Flag.as_kraftanfah
     +            ren_aktiv == 0) //wird durchlaufen, wenn ohne Kraftsteuerung
     +             angefahren wird
  826     9                                     { 
  827     9                                        Soll_IBF->ASO_Pos = Ist_IBF
     +            ->Vorring.Start_Ringhoehe;
  828    10                                        if (Ist_IBF->ASO_Pos <= (So
     +            ll_IBF->ASO_Pos + eps) || Ist_IBF->ASO_Pos <= (Soll_IBF->ASO
     +            _Pos - eps) ) 
  829     7                                        {Soll_IBF->InitAchse = ' ';
     +             Soll_IBF->Profilflag = 1; break;} // Hier IBF_Allgemein.IBF
     +            _Allgemein.IBF_Allgemein.Profilflag bestimmen wie es weiter
     +            geht 
  830     7                                     }
  831     7       
     +            		
  832     7                                     break;//break
  833     7       

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 25

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\source\rpw.cpp

Line  Level
  834     7                         case 'z':   // 2 Umdrehungen abwarten für
     +            gleichmäßiges Profil über Umfang 
  835     7                                     t_Halte--;
  836     7                                     if (t_Halte <= 0) {Soll_IBF->I
     +            nitAchse = 'b';};
  837     7                                     break;  // zu case 'z'
  838     7                                                       
  839     7                         default:    
  840     5                                     #ifdef MRAW
  841     5                                        _settextposition(9,1);
  842     5                                        printf(" InitAchse: %d - Wa
     +            rum default ?!? ", Ist_IBF->InitAchse);
  843     5                                     #endif   
  844     5                                     break;
  845     5                                     
  846     5                         } //	Klammer zu: switch (InitAchse) von ca
     +            se0 
  847     5                         break;
  848     5          
  849     5          
  850     5                case 1:     //Vergleich der eingegebenen Wandstärke
     +             und der, per Kraftsteuerung angefahrenen Wandstärke
  851     5                            // Routine, ob Schalter gesetzt ist ode
     +            r nicht -> Schalter (0,1,2)
  852     5                            
  853     5                            s_ist = Ist_IBF->Afpos_dw - ((186.9F +
     +            Ist_IBF->Werkzeugdurchmesser)/2.0F);
  854     5                            Soll_IBF->Soll_ASO_Pos_alt = Ist_IBF->A
     +            SO_Pos;     
  855     5                            s_f_alt = Ist_IBF->s_f; // dem Wert s_f
     +            _alt wird hier bereits der erste Wert vorgegeben, damit in c
     +            ase 11/12 keine Division durch NULL stattfindet.... 
  856     6                            #ifdef MRAW
  857     6                               _settextposition(6,10);
  858     6                               printf("s_ist %8.1f  s_gemessen %8.1
     +            f", s_ist, Ist_IBF->Wandstaerke_Null);
  859     6                            #endif
  860     6                            
  861     6                            if(Ist_IBF->Schalter_Kont_DisKo == 0)
     +            // kontinuierlicher Vorschub
  862     5                            {Soll_IBF->Profilflag = 11; s_ist = 0;
     +            break;}
  863     6                            
  864     6                            if (Ist_IBF->Schalter_Kont_DisKo == 1)
     +            //diskontinuierlicher Vorschub (eps über Weg)
  865     5                            {Soll_IBF->Profilflag = 12; Soll_IBF->R
     +            S_Pos = Ist_IBF->RS_Pos - 0.5f; break;}
  866     6                            
  867     6                            if (Ist_IBF->Schalter_Kont_DisKo == 2)
     +            //diskontinuierlicher Vorschub (eps über Geschwindigkeit)
  868     7                            {
  869     7                               Soll_IBF->Profilflag =13; 
  870     7                               t_dis_h = 10*(Ist_IBF->Vorring.D_Nul
     +            l/(diam_hw*f_H)); //Zeit für x Umdrehungen bei denen der Dor
     +            n in den Ring vorfährt bis Schnabel-Formel greift

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 26

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\source\rpw.cpp

Line  Level
  871     6                               break;
  872     5                            }
  873     5                            
  874     5                            else
  875     5                            {
  876     5                               #ifdef MRAW
  877     5                                  _settextposition(10,15);
  878     5                                  printf("Fehler in Schalterstellun
     +            g");
  879     5                               #endif
  880     5                            }
  881     5                            break;
  882     5                           
  883     5              
  884     5              case 11:      //Kontinuierlcher Walzungsroutine
  885     5                            Soll_Inter->kwo_n = kw_ia/hw_ir * (diam
     +            _hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AGR + Ist_IBF->
     +            Pos_auf_Mantel)*sin_kw_winkel_halbe);
  886     5                            Soll_Inter->kwu_n = kw_ia/hw_ir * (diam
     +            _hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AGR + Ist_IBF->
     +            Pos_auf_Mantel)*sin_kw_winkel_halbe);
     +            	
  887     5                            
  888     5                            Soll_IBF->RS_V  = Soll_IBF->Vorschubges
     +            chw_Dw;    // Dorn, Radialschlitten   
  889     5                            Soll_IBF->ASO_V = 100.0F;
  890     5                           
  891     5                            Soll_IBF->ASO_Pos = 143.0F;
  892     6       
  893     6                            if(Soll_IBF->Steg != 0)   // Abfrage ob
     +             Stegstärke angegeben
  894     7                            {
  895     6                            Soll_IBF->RS_Pos = (diam_hw + Ist_IBF->
     +            Werkzeugdurchmesser)/2 + Soll_IBF->Steg;
  896     5                           
  897     5                            }
  898     5                            else Soll_IBF->RS_Pos = Ist_IBF->Afpos_
     +            dw - Soll_IBF->delta_s;  //Afpos_dw wird in case 0 -> case '
     +            a' gesetzt.....
  899     5                            
  900     5                            Soll_IBF->RS_Pos = Ist_IBF->RS_Pos;
  901     6                           
  902     6                            if(Ist_IBF->RS_Pos <= Soll_IBF->RS_Pos
     +            || Ist_IBF->RS_Pos <= (Soll_IBF->RS_Pos + eps) || Ist_IBF->R
     +            S_Pos <= (Soll_IBF->RS_Pos - eps))
  903     7                            {	
  904     7                               t_Halte= Soll_IBF->Umdrehungen*10*(I
     +            st_IBF->Vorring.D_Null/(diam_hw*f_H));
  905     7                               //t_Halte=Umdrehungen*10*diam_f/(dia
     +            m_hw*f_H); // n Umdrehungen, 10 * "100" ms Aufrufzyklus = 10
     +            00 ms = 1s;  
  906     7                               
  907     7                               Soll_IBF->Profilflag = 2; 
  908     7                               Soll_IBF->ASO_Pos = Ist_IBF->ASO_Pos
     +            ; // damit kein Durck ausgeübt wird wenn Walzprozeß beendet

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 27

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\source\rpw.cpp

Line  Level
     +            ist muss hier noch eine Konstante eingefügt werden (z.B. 5)
  909     5                               break;
  910     6                               }                  
  911     6                            
  912     6                            //-------------------------------------
     +            ------------------------------------------------------------
     +            -----
  913     6                           //--------------------------Kraftsteueru
     +            ng des oberen Axialschlittens ------------------------------
     +            ----
  914     6                           //--------------------------------------
     +            ------------------------------------------------------------
     +            ----
  915     6                              
  916     6                           if(Axialkraft != NULL)
  917     7                           {
  918     7                                                
  919     7                             uk1_ASO = uk_ASO;
  920     7                             uk_ASO = (Ist_IBF->FA_f - Axialkraft);
     +                             // gemittelte Axialkraft aus Interfac.
  921     7                             
  922     7                             Del_ASO_Pos = KP*(uk_ASO - uk1_ASO) +
     +            1.0F*uk_ASO;    // PI-Regler nach Böhmer, jedoch mit KP=Böhm
     +            er;KI=1.0F hier noch Einstellen!!!!
  923     5                                                   
  924     5                             Soll_IBF->ASO_Pos = Ist_IBF->ASO_Pos;
  925     6                              
  926     6                           }
  927     6                           
  928     6                              
  929     6                               //----------------------------------
     +            ------------------------------------------------------------
     +            --------
  930     6                               //----------------------- Positionss
     +            teuerung des oberen Axialschlittens ------------------------
     +            --------
  931     6                               //----------------------------------
     +            ------------------------------------------------------------
     +            --------
  932     6                               
  933     6                               if(t_dis_h <=0)
  934     7                               {
  935     8                                  
  936     8                                  delta_h = 10*(diam_f*(s_f_alt - I
     +            st_IBF->s_f)-(s_f_alt*s_f_alt) + (Ist_IBF->s_f*Ist_IBF->s_f)
     +            )/(diam_f * s_f_alt - (s_f_alt*s_f_alt)); 
  937     7                                  // Delta_h = 10 mm Werkzeugbreite
     +             *gef.Wanddicke (diam_f)*(Wanddicke[n]^2-Wanddicke[n-1]^2)+W
     +            anddicke[n-1]^2-Wanddike[n]^2/(Klammerausdruck)
  938     7                                  
  939     7                                  Soll_IBF->ASO_Pos = Soll_IBF->Sol
     +            l_ASO_Pos_alt + delta_h;
  940     7                                  
  941     7                                  Soll_IBF->Soll_ASO_Pos_alt = Soll
     +            _IBF->ASO_Pos;  

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 28

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\source\rpw.cpp

Line  Level
  942     7                                  s_f_alt = Ist_IBF->s_f;   
  943     5                                  t_dis_h = 10*(Ist_IBF->Vorring.D_
     +            Null/(diam_hw*f_H)); // 1 Umdrehungen (kein Wert vor der 10)
     +            , 10*100 ms = 1000 ms = 1s
  944     5                               }        
  945     5                               
  946     5                               t_dis_h--;
  947     5                               
  948     5                               break;
  949     5                            
  950     5                            
  951     5               case 2:   //----------------------------------------
     +            -----------------------------------------
  952     5                         //------- 2 Umdrehungen abwarten für gleic
     +            hmäßiges Profil über Umfang -------------
  953     5                         //----------------------------------------
     +            -----------------------------------------
  954     5                         
  955     5                         Soll_Inter->kwo_n = kw_ia/hw_ir * (diam_hw
     +             * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AGR + Ist_IBF->Pos
     +            _auf_Mantel)*sin_kw_winkel_halbe);
  956     5                         Soll_Inter->kwu_n = kw_ia/hw_ir * (diam_hw
     +             * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AGR + Ist_IBF->Pos
     +            _auf_Mantel)*sin_kw_winkel_halbe);
     +            	
  957     5                         
  958     5                         Soll_IBF->ASO_V = 5.0F;
  959     5                                        
  960     5                           
  961     5                         t_Halte--;
  962     5                         t_warte_flag=0; //zurücksetzen der Bedingu
     +            ng (Diskonti...)
  963     6                         
  964     6                                           
  965     6                         if (t_Halte <= 0) 
  966     7                         {  
  967     5                             Soll_IBF->ExitAchse ='a';Soll_IBF->Pro
     +            filflag = 3; break;   //hier befehle reinschreiben, wenn ein
     +             weiterer Schritt abgearbeitet werden soll.....
  968     5                         }
  969     5                         break;             
  970     5                         
  971     5             
  972     5              case 3:    //Memoryflag= Ist_IBF->Profilflag;
  973     7                         // RS und AS auffahren; danach manuell Ent
     +            ladeposition anfahren (Koppers 'e')     
  974     7                         switch (Ist_IBF->ExitAchse) 
  975     7                         {                         
  976     7                         
  977     7                            Steuerbyte_Lese.freigabe = 191;	// wa
     +            r 95
  978     7                            //Freigabe_MRAW_Senden();
  979     7                                        
  980     7                               case 'a': 	
  981     7                                     Soll_IBF->RS_Pos=Ist_IBF->RS_P

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 29

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\source\rpw.cpp

Line  Level
     +            os_Start+10.0F; //michl
  982     7                                     Soll_IBF->RS_V = 5.0F;
  983     7                          
  984     7                                     if (Ist_IBF->RS_Pos >= Soll_IB
     +            F->RS_Pos) Soll_IBF->ExitAchse = 'b';
  985     7                                     break;
  986     7        
  987     7                               case 'b':
  988     7                          
  989     7                                     Soll_IBF->AG_Pos = Ist_IBF->AG
     +            _Pos_Null  + 50; 
  990     7                                     Soll_IBF->ASO_Pos= Ist_IBF->AS
     +            O_Pos_Null + 15; //michl
  991     7                                     
  992     7                                     Soll_IBF->ASO_V = 15.0F; 
  993     7                              
  994     7                                     
  995     7                                     Soll_IBF->AG_V = 8.0F;
  996     7                                     Soll_IBF->Soll_ZAR_V = 0.0F;
     +                             	
  997     7                                     Soll_IBF->Soll_ZAL_V = 0.0F;
     +                             	
  998     8       
  999     8                                     if (Ist_IBF->AG_Pos >= Soll_IB
     +            F->AG_Pos) 
 1000     9                                     {
 1001     9                                        Soll_IBF->ExitAchse = ' ';
     +            
 1002     7                                        Soll_IBF->Profilflag++;
 1003     8                                     }
 1004     8                                     
 1005     8                                     if (     (Ist_IBF->RS_Pos  >=
     +            Soll_IBF->RS_Pos)
 1006     9                                           && (Ist_IBF->ASO_Pos >=
     +            Soll_IBF->ASO_Pos)
 1007     9                                           #ifdef MRAW
 1008     9                                              && (Ist_IBF->ASU_Pos
     +            >= Soll_IBF->Soll_ASU_Pos)
 1009     9                                           #endif
 1010     9                                        )
 1011     9                                     {
 1012     9                                        Soll_IBF->ExitAchse = ' ';
     +            
 1013     9                                        Soll_IBF->Profilflag++;
 1014     7                                        break;
 1015     7                                     }
 1016     7                                     //----------------------------
     +            ------------------------------------------------------------
     +            ------------
 1017     7                                     //------------------- Damit di
     +            e Variabelwerte, die während einer vorgehenden Walzung------
     +            ------------
 1018     7                                     //--------------------nicht im
     +             Speicher verbleiben, müssen diese zurückgesetzt werden-----
     +            ------------

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 30

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\source\rpw.cpp

Line  Level
 1019     7                                     //----------------------------
     +            ------------------------------------------------------------
     +            ------------
 1020     7                                        
 1021     7                                        Ist_IBF->FR_f = 0; Ist_IBF-
     +            >FA_f = 0;
 1022     7                                       	zaehler=0;  uk_ASO=0;
     +            
 1023     8                                        uk1_ASO=0;	diam_f=0;   d
     +            iam_f_alt=0;     t_Halte = 0;   t_warte = 0;	
 1024     7                                        
 1025     7                                     break;
     +            
 1026     5                                     
 1027     5                         default: 	break;
 1028     5                         } // Klammer zu: switch(ExitAchse)
     +                      
 1029     5                         break;	
 1030     5                        
 1031     5           case 40:      //Routine die zur Pause gehört
 1032     3                         break;
 1033     1       
 1034     1       /*----------------------------------------------------------
     +            -----------------------*/	
 1035     1       /*--------------------------------------ENDE ENDE ENDE -----
     +            -----------------------*/		      
 1036     1       /*----------------------------------------------------------
     +            -----------------------*/
 1037     1          
 1038     1       }; // Klammer zu: switch (IBF_Allgemein.IBF_Allgemein.Profil
     +            flag) 
 1039     1              
 1040     1       }; // Klammer zu: Ende von if !Auto else 
 1041     1        
 1042     1       //########## Ende Hand- bzw. Automatiksteuerung ##########
 1043     1       
 1044     1       
 1045     1           /* -----------------------------------------------------
     +            ------------------- */
 1046     1           /*
     +                                */
 1047     1           /*  Übergabe der Sollwerte aus der IBF-Struktur an die '
     +            Ist_Inter' Struktur */
 1048     1           /*
     +                                */
 1049     1           /* -----------------------------------------------------
     +            ------------------- */
 1050     1           
 1051     1                      /* Kraft [N]*/
 1052     1                         Soll_Inter->rs_kraft  = Soll_IBF->RS_Kraft
     +            ;
 1053     1                         Soll_Inter->aso_kraft = Soll_IBF->AS_Kraft
     +            ;
 1054     1                         Soll_Inter->ag_kraft  = Soll_IBF->AG_Kraft
     +            ;

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 31

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\source\rpw.cpp

Line  Level
 1055     1                        //Soll_Inter->asu_kraft;
 1056     1                        //Soll_Inter->ag_kraft;
 1057     1                        //Soll_Inter->zal_kraft;
 1058     1                        //Soll_Inter->zar_kraft;
 1059     1       
 1060     1                      /* Flags für Kraftsteuerung */
 1061     1                         Soll_Inter->rs_kraftregler_aktiv  =  Ist_I
     +            BF->Flag.rs_kraftregler_aktiv;   /* [0-1] */
 1062     1                         Soll_Inter->aso_kraftregler_aktiv =  Ist_I
     +            BF->Flag.as_kraftregler_aktiv;
 1063     1                          //Soll_Inter->asu_kraftregler_aktiv;   /*
     +             keine Kraftmessung des unter Axialschlittens an Banning*/
 1064     1                          //Soll_Inter->ag_kraftregler_aktiv;
 1065     1                          //Soll_Inter->zal_kraftregler_aktiv;
 1066     1                          //Soll_Inter->ar_kraftregler_aktiv;
 1067     1       
 1068     1                      /* Geschwindigkeit [mm/s] */
 1069     1                         Soll_Inter->rs_v     = Soll_IBF->RS_V;
     +                 /* Übergebe Gechwindigkeit an Tabelle */
 1070     1                         Soll_Inter->aso_v    = Soll_IBF->ASO_V;
 1071     1                         Soll_Inter->asu_v    = Soll_IBF->Soll_ASU_
     +            V;
 1072     1                         Soll_Inter->ag_v     = Soll_IBF->AG_V;
     +               
 1073     1                         Soll_Inter->zal_v    = Soll_IBF->Soll_ZAL_
     +            V;       
 1074     1                         Soll_Inter->zar_v    = Soll_IBF->Soll_ZAR_
     +            V;
 1075     1       
 1076     1                     /* Positionen [mm]*/
 1077     1                         Soll_Inter->rs_pos = Soll_IBF->RS_Pos;
 1078     1                         Soll_Inter->aso_pos = Soll_IBF->ASO_Pos;
 1079                               //Soll_Inter->ag_pos = Soll_IBF->AG_Pos;
 1080                               //Soll_Inter->zal_pos = Soll_IBF->ZAL_Pos;
     +            
 1081                               //Soll_Inter->zar_pos = Soll_IBF->ZAR_Pos;
     +            
 1082             
 1083                      
 1084                     
 1085             /*----------------------------------------------------------
     +            --------------------------*/
 1086             /*------------- Anfang Kollisionscheck Modellringwalzwerk --
     +            --------------------------*/
 1087             /*----------------------------------------------------------
     +            --------------------------*/
 1088             
 1089             #ifdef MRAW
 1090                   RS_HW = 1;
 1091                   RS_AG = 1;
 1092                   AG_RS = 1;
 1093                   AS_AS = 1;
 1094                   
 1095                   if ((RS_HW != 0) && (RS_AG != 0))
 1096                   {  

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 32

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\source\rpw.cpp

Line  Level
 1097                     /* Soll_Inter->rs_pos = Soll_IBF->Soll_RS_Pos + offs
     +            et_rs;*/
 1098                      #ifdef MRAW
 1099                         _settextposition(7,1);
 1100                         printf("                                     ");
     +            
 1101                      #endif
 1102                   }
 1103                   else
 1104                   {  if (RS_HW == 0)
 1105                      {
 1106                         #ifdef MRAW
 1107                            _settextposition(7,1);
 1108                            printf("    KOLLISIONSGEFAHR RS - HW   %i
     +              ", RS_HW);
 1109                         #endif
 1110                      }
 1111                      else
 1112                      {
 1113                         #ifdef MRAW
 1114                            _settextposition(7,1);
 1115                            printf("    KOLLISIONSGEFAHR RS - AG   %i
     +              ", RS_AG);
 1116                         #endif
 1117                      }
 1118                   }
 1119                   
 1120                   if (AG_RS != 0)
 1121                   {  
 1122                      Soll_Inter->ag_pos = Soll_IBF->AG_Pos + offset_agr;
     +            
 1123                      #ifdef MRAW
 1124                         _settextposition(7,1);
 1125                         printf("                                     ");
     +            
 1126                      #endif
 1127                   }
 1128                   else
 1129                   {
 1130                      #ifdef MRAW
 1131                         _settextposition(7,1);
 1132                         printf("    KOLLISIONSGEFAHR AG - RS   %i      "
     +            , AG_RS);
 1133                      #endif
 1134                   }
 1135                   
 1136                   if (AS_AS != 0)
 1137                   {  
 1138                      Soll_Inter->aso_pos = Soll_IBF->ASO_Pos + offset_as
     +            o;
 1139                      #ifdef MRAW
 1140                         Soll_Inter->asu_pos = Soll_IBF->Soll_ASU_Pos + o
     +            ffset_asu;  //michl rausgenommen
 1141                         _settextposition(7,1);
 1142                         printf("                                     ");

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 33

     Source Listing - File: C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\source\rpw.cpp

Line  Level
     +            
 1143                      #endif
 1144                   }
 1145                   else
 1146                   {  
 1147                      #ifdef MRAW
 1148                         _settextposition(7,1);
 1149                         printf("    KOLLISIONSGEFAHR oberer AS - AS   %i
     +                  ", AS_AS);
 1150                      #endif
 1151                   }
 1152             #endif
 1153                   
 1154             // ------------ Ende Kollisionscheck -----------
 1155             
 1156                 return TRUE;
 1157             }
 1158             
 1159             
 1160             
No errors have been detected

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 34

     Used Files


       0 c:\rm3dev\inc\setjmp.h
       1 c:\rm3dev\inc\stdio.h
       2 c:\rm3dev\inc\math.h
       3 c:\rm3dev\inc\stdlib.h
       4 c:\rm3dev\inc\malloc.h
       5 C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\inc\uftcncs.hpp
       6 C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\inc\raw_t_cnc_s.hpp
       7 C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\inc\apwcncs.hpp
       8 C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\inc\puff_cnc_s.hpp
       9 C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\inc\onli_cnc_s.hpp
      10 C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\inc\IBF_struct.hpp
      11 C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\inc\rpw.hpp
      12 C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\source\rpw.cpp

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 35

     Used Options


     
        -DSMP16 -D_ARCHITECTURE=386 -VCOMPACT -VSUBSYS=libc.sub
        -VSUBSYS=libx.sub -VNDP -VFIXEDPARAMS -VCPU=PENTIUM -VNEARFAR
        -VNOALIGN -VBUILTIN -o -VLISTING -VROM -VSYMUPPER -VFARCRT
        -IC:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\inc
        -Ic:\rm3dev\inc -Ic:\rm3dev\incplus
        -VCXX=exceptions,rtti,instantiate=used,cxxdbg
        C:\rm3dev\wagner\raw\RWTH_SMP\RWTH_V101\RWTH_SMP.bd\source\rpw.cpp
        -VDP

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 36

     Interleaved Listing

C****************************************************************************
C     7:  RPW::RPW(void) 
C     8:  { 
C****************************************************************************
                                  L2  LABEL BYTE
   DATA  :000000   00 00 00 00R             DP    __dl__FPv
                   00 00                                                      
   DATA  :000006   01 00                    DW    1
   DATA  :000008   FF FF                    DW    65535
   DATA  :00000A   06                       DB    6
                                            DB    1 DUP(?)
   DATA  :00000C   00 00 00 00 00           DP    0
                   00                                                         
   DATA  :000012   00 00                    DW    0
   DATA  :000014   FF FF                    DW    65535
   DATA  :000016   00                       DB    0
                                            DB    1 DUP(?)

                                            PUBLIC   __ct__3RPWFv
                                  __ct__3RPWFv    PROC FAR
                                            ASSUME DS:DATA
   CODE32:000000   1E                       PUSH  DS
   CODE32:000001   66 B9 00 00              MOV   CX,DATA
   CODE32:000005   8E D9                    MOV   DS,CX
   CODE32:000007   55                       PUSH  EBP
   CODE32:000008   8B EC                    MOV   EBP,ESP
   CODE32:00000A   81 EC C8 00 00           SUB   ESP,200
                   00                                                         
   CODE32:000010   C4 35 00 00 00           LES   ESI,PWORD PTR __cxxtls
                   00R                                                        
   CODE32:000016   66 26 8B 56 10           MOV   DX,ES:WORD PTR [ESI+16]
   CODE32:00001B   26 8B 46 0C              MOV   EAX,ES:DWORD PTR [ESI+12]
   CODE32:00001F   66 89 95 3C FF           MOV   WORD PTR [EBP-196],DX
                   FF FF                                                      
   CODE32:000026   89 85 38 FF FF           MOV   DWORD PTR [EBP-200],EAX
                   FF                                                         
   CODE32:00002C   8D 85 38 FF FF           LEA   EAX,DWORD PTR [EBP-200]
                   FF                                                         
   CODE32:000032   8C D2                    MOV   DX,SS
   CODE32:000034   66 26 89 56 10           MOV   ES:WORD PTR [ESI+16],DX
   CODE32:000039   26 89 46 0C              MOV   ES:DWORD PTR [ESI+12],EAX
   CODE32:00003D   C6 85 3E FF FF           MOV   BYTE PTR [EBP-194],1
                   FF 01                                                      
   CODE32:000044   C7 85 40 FF FF           MOV   DWORD PTR [EBP-192],
                   FF 00 00 00 00R                OFFSET  L2
   CODE32:00004E   8C 9D 44 FF FF           MOV   WORD PTR [EBP-188],DS
                   FF                                                         
   CODE32:000054   8D 45 F4                 LEA   EAX,DWORD PTR [EBP-12]
   CODE32:000057   8C D2                    MOV   DX,SS
   CODE32:000059   66 89 95 4C FF           MOV   WORD PTR [EBP-180],DX
                   FF FF                                                      
   CODE32:000060   89 85 48 FF FF           MOV   DWORD PTR [EBP-184],EAX
                   FF                                                         
   CODE32:000066   C4 35 00 00 00           LES   ESI,PWORD PTR __cxxtls
                   00R                                                        

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 37

     Interleaved Listing

   CODE32:00006C   26 8B 46 04              MOV   EAX,ES:DWORD PTR [ESI+4]
   CODE32:000070   66 89 85 56 FF           MOV   WORD PTR [EBP-170],AX
                   FF FF                                                      
   CODE32:000077   26 C7 46 04 FF           MOV   ES:DWORD PTR [ESI+4],65535
                   FF 00 00                                                   
   CODE32:00007F   8D 45 F0                 LEA   EAX,DWORD PTR [EBP-16]
   CODE32:000082   8C D2                    MOV   DX,SS
   CODE32:000084   66 89 55 F8              MOV   WORD PTR [EBP-8],DX
   CODE32:000088   89 45 F4                 MOV   DWORD PTR [EBP-12],EAX
   CODE32:00008B   C7 45 F0 00 00           MOV   DWORD PTR [EBP-16],0
                   00 00                                                      
   CODE32:000092   66 8B 45 14              MOV   AX,WORD PTR [EBP+20]
   CODE32:000096   98                       CWDE                              
   CODE32:000097   0B 45 10                 OR    EAX,DWORD PTR [EBP+16]
   CODE32:00009A   75 3A                    JNE   NEAR PTR   L20001
   CODE32:00009C   6A 28                    PUSH  40
   CODE32:00009E   9A 00 00 00 00R          CALL FAR PTR         __nw__FUi
                   00 00                                                      
   CODE32:0000A5   66 89 55 14              MOV   WORD PTR [EBP+20],DX
   CODE32:0000A9   89 45 10                 MOV   DWORD PTR [EBP+16],EAX
   CODE32:0000AC   C7 45 F0 01 00           MOV   DWORD PTR [EBP-16],1
                   00 00                                                      
   CODE32:0000B3   66 8B 55 14              MOV   DX,WORD PTR [EBP+20]
   CODE32:0000B7   66 89 55 FE              MOV   WORD PTR [EBP-2],DX
   CODE32:0000BB   89 45 FA                 MOV   DWORD PTR [EBP-6],EAX
   CODE32:0000BE   C4 35 00 00 00           LES   ESI,PWORD PTR __cxxtls
                   00R                                                        
   CODE32:0000C4   26 C7 46 04 00           MOV   ES:DWORD PTR [ESI+4],0
                   00 00 00                                                   
   CODE32:0000CC   66 8B 45 14              MOV   AX,WORD PTR [EBP+20]
   CODE32:0000D0   98                       CWDE                              
   CODE32:0000D1   0B 45 10                 OR    EAX,DWORD PTR [EBP+16]
   CODE32:0000D4   74 4B                    JE    NEAR PTR   L3
                                  L20001:
C****************************************************************************
C     9:   
C    10:      hw_ir                = 0.0F; // Getriebeuntersetzung Hau
C +       ptwalzenmotor 
C****************************************************************************
   CODE32:0000D6   C4 75 10                 LES   ESI,PWORD PTR [EBP+16]
   CODE32:0000D9   B8 00 00 00 00           MOV   EAX,0
   CODE32:0000DE   26 89 46 08              MOV   ES:DWORD PTR [ESI+8],EAX
C****************************************************************************
C    11:      kw_ia                = 0.0F; // Getriebeuntersetzung Keg
C +       elwalzenmotor 
C****************************************************************************
   CODE32:0000E2   B8 00 00 00 00           MOV   EAX,0
   CODE32:0000E7   26 89 46 0C              MOV   ES:DWORD PTR [ESI+12],EAX
C****************************************************************************
C    12:      sin_kw_winkel_halbe  = 0.0F; // Sinus halber Kegelwalzen
C +       winkel 
C****************************************************************************
   CODE32:0000EB   B8 00 00 00 00           MOV   EAX,0
   CODE32:0000F0   26 89 46 10              MOV   ES:DWORD PTR [ESI+16],EAX
C****************************************************************************

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 38

     Interleaved Listing

C    13:   
C    14:      offset_rs            = 0.0F;  
C****************************************************************************
   CODE32:0000F4   B8 00 00 00 00           MOV   EAX,0
   CODE32:0000F9   26 89 46 14              MOV   ES:DWORD PTR [ESI+20],EAX
C****************************************************************************
C    15:      offset_agr           = 0.0F; 
C****************************************************************************
   CODE32:0000FD   B8 00 00 00 00           MOV   EAX,0
   CODE32:000102   26 89 46 18              MOV   ES:DWORD PTR [ESI+24],EAX
C****************************************************************************
C    16:      offset_aso           = 0.0F; 
C****************************************************************************
   CODE32:000106   B8 00 00 00 00           MOV   EAX,0
   CODE32:00010B   26 89 46 1C              MOV   ES:DWORD PTR [ESI+28],EAX
C****************************************************************************
C    17:      offset_asu           = 0.0F; 
C****************************************************************************
   CODE32:00010F   B8 00 00 00 00           MOV   EAX,0
   CODE32:000114   26 89 46 20              MOV   ES:DWORD PTR [ESI+32],EAX
C****************************************************************************
C    18:      offset_tr            = 0.0F;	 
C****************************************************************************
   CODE32:000118   B8 00 00 00 00           MOV   EAX,0
   CODE32:00011D   26 89 46 24              MOV   ES:DWORD PTR [ESI+36],EAX
                                  L3:
   CODE32:000121   0F B7 85 56 FF           MOVZX EAX,WORD PTR [EBP-170]
                   FF FF                                                      
   CODE32:000128   C4 35 00 00 00           LES   ESI,PWORD PTR __cxxtls
                   00R                                                        
   CODE32:00012E   26 89 46 04              MOV   ES:DWORD PTR [ESI+4],EAX
   CODE32:000132   66 8B 95 3C FF           MOV   DX,WORD PTR [EBP-196]
                   FF FF                                                      
   CODE32:000139   8B 85 38 FF FF           MOV   EAX,DWORD PTR [EBP-200]
                   FF                                                         
   CODE32:00013F   C4 35 00 00 00           LES   ESI,PWORD PTR __cxxtls
                   00R                                                        
   CODE32:000145   66 26 89 56 10           MOV   ES:WORD PTR [ESI+16],DX
   CODE32:00014A   26 89 46 0C              MOV   ES:DWORD PTR [ESI+12],EAX
C****************************************************************************
C    19:  } 
C****************************************************************************
   CODE32:00014E   66 8B 55 14              MOV   DX,WORD PTR [EBP+20]
   CODE32:000152   8B 45 10                 MOV   EAX,DWORD PTR [EBP+16]
   CODE32:000155   C9                       LEAVE   
   CODE32:000156   1F                       POP   DS
   CODE32:000157   CA 08 00                 RET   8
                                  __ct__3RPWFv  ENDP

C****************************************************************************
C    24:  int RPW::Main_RAW(int    iter, 
C    25:                    struct Def_Ein_Puff            Ein_Puff, 
C    26:                    struct Def_Lokal_Puff          Lokal_Puff,
C +        
C    27:                    struct Def_Aus_Puff            Aus_Puff, 
C    28:                    struct Def_Ein_Onli            Ein_Onli, 

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 39

     Interleaved Listing

C    29:                    struct Def_Aus_Onli            Aus_Onli, 
C    30:                    float  IBF_PARA[IBF_PARA_MAX], 
C    31:                    struct Def_Ist_Inter           *Ist_Inter,
C +        
C    32:                    struct Def_Soll_Inter          *Soll_Inter
C +       , 
C    33:                    struct Def_IBF_Allgemein_SOLL  *Soll_IBF, 
C    34:                    struct Def_IBF_Allgemein_IST   *Ist_IBF
C +       ) 
C    35:  { 

C****************************************************************************
                                            PUBLIC   Main_RAW__3RPWFi12Def_Ein_Puff14Def_Lokal_Puff12Def_Aus_Puff12Def_Ein_Onli12Def_Aus_OnliPfP13Def_Ist_InterP14Def_Soll_InterP22Def_IBF_Allgemein_SOLLP21Def_IBF_Allgemein_IST
                                  Main_RAW__3RPWFi12Def_Ein_Puff14Def_Lokal_Puff12Def_Aus_Puff12Def_Ein_Onli12Def_Aus_OnliPfP13Def_Ist_InterP14Def_Soll_InterP22Def_IBF_Allgemein_SOLLP21Def_IBF_AllgemeASSUME DS:DATA
rP22Def_IBF_Allgemein_SOLLP21Def_IBF_AllgemeASSUME DS:DATA
   CODE32:000000   55                       PUSH  EBP
   CODE32:000001   8B EC                    MOV   EBP,ESP
C****************************************************************************
C    36:     // Defintion der lokalen Variabeln 
C    37:     // struct Def_IBF_Allgemein *IBF_Allgemein; 
C    38:     // Los gehts 
C    39:   
C    40:     // Initilisieren 
C    41:   /* 
C    42:     if (Ein_Puff.walzenstart_flag) 
C    43:     { 
C    44:  		Soll_Inter->rs_v = 0.0F;	 
C    45:     } 
C    46:     else 
C    47:     { 
C    48:        if (Ein_Onli.rwg_poti_wert > 0.05F) 
C    49:        { 
C    50:  	     Soll_Inter->rs_v = 2.0F * Ein_Onli.rwg_poti_wert
C +       ; 
C    51:   	   } 
C    52:        else 
C    53:        { 
C    54:          Soll_Inter->rs_v = 0.0F;  
C    55:        } 
C    56:   
C    57:        Soll_Inter->aso_v = 0.0F; 
C    58:     } 
C    59:  */	 
C    60:     // Istwerte aufbereiten 
C    61:     Istwerte_RAW(  Ein_Puff, 
C****************************************************************************
   CODE32:000003   66 8B 95 98 2A           MOV   DX,WORD PTR [EBP+10904]
                   00 00                                                      
   CODE32:00000A   52                       PUSH  EDX
   CODE32:00000B   FF B5 94 2A 00           PUSH  DWORD PTR [EBP+10900]
                   00                                                         
   CODE32:000011   81 EC 28 0D 00           SUB   ESP,3368
                   00                                                         
   CODE32:000017   1E                       PUSH  DS
   CODE32:000018   8D 85 68 1D 00           LEA   EAX,DWORD PTR [EBP+7528]

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 40

     Interleaved Listing

                   00                                                         
   CODE32:00001E   89 C6                    MOV   ESI,EAX
   CODE32:000020   8D 7C 24 04              LEA   EDI,DWORD PTR [ESP+4]
   CODE32:000024   16 07                    PUSH  SS
                                            POP   ES
   CODE32:000026   FC                       CLD                               
   CODE32:000027   B9 4A 03 00 00           MOV   ECX,842
   CODE32:00002C   F3 36 A5                 REP MOVS  DWORD PTR ES:[EDI],
                                                    DWORD PTR SS:[ESI]
   CODE32:00002F   1F                       POP   DS
   CODE32:000030   81 EC 98 05 00           SUB   ESP,1432
                   00                                                         
   CODE32:000036   1E                       PUSH  DS
   CODE32:000037   56                       PUSH  ESI
   CODE32:000038   8D 85 D0 17 00           LEA   EAX,DWORD PTR [EBP+6096]
                   00                                                         
   CODE32:00003E   89 C6                    MOV   ESI,EAX
   CODE32:000040   8D 7C 24 08              LEA   EDI,DWORD PTR [ESP+8]
   CODE32:000044   16 07                    PUSH  SS
                                            POP   ES
   CODE32:000046   FC                       CLD                               
   CODE32:000047   B9 65 01 00 00           MOV   ECX,357
   CODE32:00004C   F3 36 A5                 REP MOVS  DWORD PTR ES:[EDI],
                                                    DWORD PTR SS:[ESI]
   CODE32:00004F   66 36 A5                 MOVS  WORD PTR ES:[EDI],
                                                    WORD PTR SS:[ESI]
   CODE32:000052   5E                       POP   ESI
   CODE32:000053   1F                       POP   DS
   CODE32:000054   81 EC 54 0D 00           SUB   ESP,3412
                   00                                                         
   CODE32:00005A   1E                       PUSH  DS
   CODE32:00005B   56                       PUSH  ESI
   CODE32:00005C   8D 85 7C 0A 00           LEA   EAX,DWORD PTR [EBP+2684]
                   00                                                         
   CODE32:000062   89 C6                    MOV   ESI,EAX
   CODE32:000064   8D 7C 24 08              LEA   EDI,DWORD PTR [ESP+8]
   CODE32:000068   16 07                    PUSH  SS
                                            POP   ES
   CODE32:00006A   FC                       CLD                               
   CODE32:00006B   B9 55 03 00 00           MOV   ECX,853
   CODE32:000070   F3 36 A5                 REP MOVS  DWORD PTR ES:[EDI],
                                                    DWORD PTR SS:[ESI]
   CODE32:000073   5E                       POP   ESI
   CODE32:000074   1F                       POP   DS
   CODE32:000075   66 8B 55 24              MOV   DX,WORD PTR [EBP+36]
   CODE32:000079   52                       PUSH  EDX
   CODE32:00007A   FF 75 20                 PUSH  DWORD PTR [EBP+32]
   CODE32:00007D   E8 00 00 00 00R          CALL  NEAR PTR         
                                                  Istwerte_RAW__3RPWF12Def_Ein_Pu
                                                  
C****************************************************************************
C    62:                    Lokal_Puff, 
C    63:                    Aus_Puff, 
C    64:                    &*Ist_Inter); 
C    65:   

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 41

     Interleaved Listing

C    66:     Soll_Inter->rs_v  = Aus_Onli.ds_dh_sp_hp.s_punkt; 
C****************************************************************************
   CODE32:000082   D9 45 74                 FLD   DWORD PTR [EBP+116]
   CODE32:000085   C4 75 18                 LES   ESI,PWORD PTR [EBP+24]
   CODE32:000088   26 D9 1E                 FSTP  ES:DWORD PTR [ESI]
C****************************************************************************
C    67:     Soll_Inter->aso_v = Aus_Onli.ds_dh_sp_hp.h_punkt; 
C****************************************************************************
   CODE32:00008B   D9 45 70                 FLD   DWORD PTR [EBP+112]
   CODE32:00008E   26 D9 5E 04              FSTP  ES:DWORD PTR [ESI+4]
C****************************************************************************
C    68:   
C    69:     // Hauptprogrammteil des IBF-Tasks 
C    70:     Main(*Ist_Inter, 
C****************************************************************************
   CODE32:000092   66 8B 95 98 2A           MOV   DX,WORD PTR [EBP+10904]
                   00 00                                                      
   CODE32:000099   52                       PUSH  EDX
   CODE32:00009A   FF B5 94 2A 00           PUSH  DWORD PTR [EBP+10900]
                   00                                                         
   CODE32:0000A0   81 EC 0C 03 00           SUB   ESP,780
                   00                                                         
   CODE32:0000A6   1E                       PUSH  DS
   CODE32:0000A7   C4 75 20                 LES   ESI,PWORD PTR [EBP+32]
   CODE32:0000AA   06                       PUSH  ES
   CODE32:0000AB   8D 7C 24 08              LEA   EDI,DWORD PTR [ESP+8]
   CODE32:0000AF   16 07                    PUSH  SS
                                            POP   ES
   CODE32:0000B1   FC                       CLD                               
   CODE32:0000B2   1F                       POP   DS
   CODE32:0000B3   B9 C2 00 00 00           MOV   ECX,194
   CODE32:0000B8   F3 A5                    REP MOVSD 
   CODE32:0000BA   66 A5                    MOVSW                             
   CODE32:0000BC   1F                       POP   DS
   CODE32:0000BD   66 8B 55 2C              MOV   DX,WORD PTR [EBP+44]
   CODE32:0000C1   52                       PUSH  EDX
   CODE32:0000C2   FF 75 28                 PUSH  DWORD PTR [EBP+40]
   CODE32:0000C5   66 8B 55 0C              MOV   DX,WORD PTR [EBP+12]
   CODE32:0000C9   52                       PUSH  EDX
   CODE32:0000CA   FF 75 08                 PUSH  DWORD PTR [EBP+8]
   CODE32:0000CD   66 8B 55 1C              MOV   DX,WORD PTR [EBP+28]
   CODE32:0000D1   52                       PUSH  EDX
   CODE32:0000D2   FF 75 18                 PUSH  DWORD PTR [EBP+24]
   CODE32:0000D5   66 8B 55 14              MOV   DX,WORD PTR [EBP+20]
   CODE32:0000D9   52                       PUSH  EDX
   CODE32:0000DA   FF 75 10                 PUSH  DWORD PTR [EBP+16]
   CODE32:0000DD   E8 00 00 00 00R          CALL  NEAR PTR         
                                                  Main__3RPWF13Def_Ist_InterPfP21
                                                  
C****************************************************************************
C    71:          IBF_PARA, 
C    72:          &*Ist_IBF, 
C    73:          &*Soll_Inter, 
C    74:          &*Soll_IBF); 
C    75:   

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 42

     Interleaved Listing

C    76:     return TRUE; 
C****************************************************************************
   CODE32:0000E2   B8 FF FF FF FF           MOV   EAX,-1
   CODE32:0000E7   C9                       LEAVE   
   CODE32:0000E8   C2 94 2A                 RET   10900
                                  Main_RAW__3RPWFi12Def_Ein_Puff14Def_Lokal_Puff12Def_Aus_Puff12Def_Ein_Onli12Def_Aus_OnliPfP13Def_Ist_InterP14Def_Soll_InterP22Def_IBF_Allgemein_SOLLP21Def_IBF_Allgemein_IST  ENDP

C****************************************************************************
C    82:  int RPW::Istwerte_RAW(  struct Def_Ein_Puff    Ein_Puff, 
C    83:                          struct Def_Lokal_Puff  Lokal_Puff, 
C    84:                          struct Def_Aus_Puff    Aus_Puff, 
C    85:                          struct Def_Ist_Inter   *Ist_Inter) 
C    86:  { 
C****************************************************************************
                                  L20002  LABEL BYTE
   LINK  :000000   89                       DB    137
   LINK  :000001   88                       DB    136
   LINK  :000002   88                       DB    136
   LINK  :000003   3C                       DB    60
                                  L20003  LABEL BYTE
   LINK  :000004   00                       DB    0
   LINK  :000005   00                       DB    0
   LINK  :000006   00                       DB    0
   LINK  :000007   3F                       DB    63

                                            PUBLIC   Istwerte_RAW__3RPWF12Def_Ein_Puff14Def_Lokal_Puff12Def_Aus_PuffP13Def_Ist_Inter
                                  Istwerte_RAW__3RPWF12Def_Ein_Puff14Def_Lokal_Puff12Def_Aus_PuffP13Def_Ist_Inter    PROC NEAR
                                            ASSUME DS:DATA
C****************************************************************************
C    87:    /* Ist_Inter->rs_pos    =    Ein_Puff.form_mess_of.dis_hw_
C +       dw  
C    88:                             + Ein_Puff.hw_geometrie.r_nenn 
C    89:                             + Ein_Puff.dw_geometrie.r_nenn; *
C +       / 
C    90:      
C    91:      Ist_Inter->rs_pos    =    Ein_Puff.form_mess_of.dis_hw_d
C +       w; 
C****************************************************************************
   CODE32:0000EB   D9 84 24 80 13           FLD   DWORD PTR [ESP+4992]
                   00 00                                                      
   CODE32:0000F2   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:0000F6   26 D9 19                 FSTP  ES:DWORD PTR [ECX]
C****************************************************************************
C    92:   
C    93:      Ist_Inter->ag_pos    =   Ein_Puff.form_mess_of.da 
C****************************************************************************
   CODE32:0000F9   D9 84 24 B0 16           FLD   DWORD PTR [ESP+5808]
                   00 00                                                      
   CODE32:000100   D8 AC 24 74 13           FSUBR DWORD PTR [ESP+4980]
                   00 00                                                      
   CODE32:000107   D9 84 24 F0 1A           FLD   DWORD PTR [ESP+6896]
                   00 00                                                      
   CODE32:00010E   DE E9                    FSUBR                             
   CODE32:000110   D9 84 24 78 1A           FLD   DWORD PTR [ESP+6776]
                   00 00                                                      
   CODE32:000117   DE C1                    FADD                              

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 43

     Interleaved Listing

   CODE32:000119   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:00011D   26 D9 59 0C              FSTP  ES:DWORD PTR [ECX+12]
C****************************************************************************
C    94:                             - Ein_Puff.pos_laser_u_of 
C    95:                             - Ein_Puff.awu_geometrie.l_fehlen
C +       de_spitze 
C    96:                             + Ein_Puff.hw_geometrie.r_nenn; 
C    97:      Ist_Inter->aso_pos   =   Ein_Puff.form_mess_of.dis_aw; 
C****************************************************************************
   CODE32:000121   D9 84 24 84 13           FLD   DWORD PTR [ESP+4996]
                   00 00                                                      
   CODE32:000128   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:00012C   26 D9 59 04              FSTP  ES:DWORD PTR [ECX+4]
C****************************************************************************
C    98:      Ist_Inter->asu_pos   =   0.0F; 
C****************************************************************************
   CODE32:000130   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:000134   B8 00 00 00 00           MOV   EAX,0
   CODE32:000139   26 89 41 08              MOV   ES:DWORD PTR [ECX+8],EAX
C****************************************************************************
C    99:      Ist_Inter->tr_pos    =   Ein_Puff.pos_laser_u_of 
C****************************************************************************
   CODE32:00013D   D9 84 24 F0 1A           FLD   DWORD PTR [ESP+6896]
                   00 00                                                      
   CODE32:000144   D8 84 24 B0 16           FADD  DWORD PTR [ESP+5808]
                   00 00                                                      
   CODE32:00014B   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:00014F   26 D9 59 18              FSTP  ES:DWORD PTR [ECX+24]
C****************************************************************************
C   100:                             + Ein_Puff.awu_geometrie.l_fehlen
C +       de_spitze; 
C   101:      Ist_Inter->rs_f      =   Ein_Puff.fr_of;  
C****************************************************************************
   CODE32:000153   D9 84 24 0C 1A           FLD   DWORD PTR [ESP+6668]
                   00 00                                                      
   CODE32:00015A   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:00015E   26 D9 59 34              FSTP  ES:DWORD PTR [ECX+52]
C****************************************************************************
C   102:      Ist_Inter->as_f      =   Ein_Puff.fa_of;	 
C****************************************************************************
   CODE32:000162   D9 84 24 08 1A           FLD   DWORD PTR [ESP+6664]
                   00 00                                                      
   CODE32:000169   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:00016D   26 D9 59 38              FSTP  ES:DWORD PTR [ECX+56]
C****************************************************************************
C   103:   
C   104:      Ist_Inter->hw_n      =   Ein_Puff.n_hw_motor_ist / MIN_F
C +       AK; 
C****************************************************************************
   CODE32:000171   2E D9 05 00 00           FLD   CS:DWORD PTR L20002
                   00 00R                                                     
   CODE32:000178   D8 BC 24 50 13           FDIVR DWORD PTR [ESP+4944]
                   00 00                                                      
   CODE32:00017F   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:000183   26 D9 59 64              FSTP  ES:DWORD PTR [ECX+100]

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 44

     Interleaved Listing

C****************************************************************************
C   105:   
C   106:      diam_hw              =   Ein_Puff.hw_geometrie.d_nenn; 
C****************************************************************************
   CODE32:000187   D9 84 24 50 1A           FLD   DWORD PTR [ESP+6736]
                   00 00                                                      
   CODE32:00018E   C4 8C 24 20 20           LES   ECX,PWORD PTR [ESP+8224]
                   00 00                                                      
   CODE32:000195   26 D9 19                 FSTP  ES:DWORD PTR [ECX]
C****************************************************************************
C   107:      diam_dw              =   Ein_Puff.dw_geometrie.d_nenn;  
C****************************************************************************
   CODE32:000198   D9 84 24 88 1A           FLD   DWORD PTR [ESP+6792]
                   00 00                                                      
   CODE32:00019F   C4 8C 24 20 20           LES   ECX,PWORD PTR [ESP+8224]
                   00 00                                                      
   CODE32:0001A6   26 D9 59 04              FSTP  ES:DWORD PTR [ECX+4]
C****************************************************************************
C   108:   
C   109:      hw_ir                =   Ein_Puff.hw1_motor.getriebe_unt
C +       ersetzung;              /* Getriebeuntersetzung Hauptwalzenm
C +       otor */ 
C****************************************************************************
   CODE32:0001AA   D9 84 24 58 1B           FLD   DWORD PTR [ESP+7000]
                   00 00                                                      
   CODE32:0001B1   C4 8C 24 20 20           LES   ECX,PWORD PTR [ESP+8224]
                   00 00                                                      
   CODE32:0001B8   26 D9 59 08              FSTP  ES:DWORD PTR [ECX+8]
C****************************************************************************
C   110:      kw_ia                =   Ein_Puff.awu_motor.getriebe_unt
C +       ersetzung;              /* Getriebeuntersetzung Kegelwalzenm
C +       otor */ 
C****************************************************************************
   CODE32:0001BC   D9 84 24 E8 1B           FLD   DWORD PTR [ESP+7144]
                   00 00                                                      
   CODE32:0001C3   C4 8C 24 20 20           LES   ECX,PWORD PTR [ESP+8224]
                   00 00                                                      
   CODE32:0001CA   26 D9 59 0C              FSTP  ES:DWORD PTR [ECX+12]
C****************************************************************************
C   111:      sin_kw_winkel_halbe  =   (float) sin(Ein_Puff.awu_geomet
C +       rie.winkel_bo * 0.5F);  /* Sinus halber Kegelwalzenwinkel */
C +        
C****************************************************************************
   CODE32:0001CE   2E D9 05 00 00           FLD   CS:DWORD PTR L20003
                   00 00R                                                     
   CODE32:0001D5   D8 8C 24 10 1B           FMUL  DWORD PTR [ESP+6928]
                   00 00                                                      
   CODE32:0001DC   D9 FE                    FSIN                              
   CODE32:0001DE   9B                       FWAIT                             
   CODE32:0001DF   C4 8C 24 20 20           LES   ECX,PWORD PTR [ESP+8224]
                   00 00                                                      
   CODE32:0001E6   26 D9 59 10              FSTP  ES:DWORD PTR [ECX+16]
C****************************************************************************
C   112:   
C   113:      Ist_Inter->da              = Aus_Puff.form_ring.da;

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 45

     Interleaved Listing

C +        					/* Aeusserer Durchmes
C +       ser        [mm]    */ 
C****************************************************************************
   CODE32:0001EA   D9 84 24 EC 01           FLD   DWORD PTR [ESP+492]
                   00 00                                                      
   CODE32:0001F1   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:0001F5   26 D9 99 94 00           FSTP  ES:DWORD PTR [ECX+148]
                   00 00                                                      
C****************************************************************************
C   114:  	Ist_Inter->da_of           = Ein_Puff.form_mess_of.da
C +       ; 
C****************************************************************************
   CODE32:0001FC   D9 84 24 74 13           FLD   DWORD PTR [ESP+4980]
                   00 00                                                      
   CODE32:000203   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:000207   26 D9 99 98 00           FSTP  ES:DWORD PTR [ECX+152]
                   00 00                                                      
C****************************************************************************
C   115:    	Ist_Inter->di              = Aus_Puff.form_ring.di;
C +           					/* Innerer   Durchmes
C +       ser        [mm]    */ 
C****************************************************************************
   CODE32:00020E   D9 84 24 F4 01           FLD   DWORD PTR [ESP+500]
                   00 00                                                      
   CODE32:000215   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:000219   26 D9 99 9C 00           FSTP  ES:DWORD PTR [ECX+156]
                   00 00                                                      
C****************************************************************************
C   116:    	Ist_Inter->di_of           = Ein_Puff.form_mess_of.di
C +       ; 
C****************************************************************************
   CODE32:000220   D9 84 24 7C 13           FLD   DWORD PTR [ESP+4988]
                   00 00                                                      
   CODE32:000227   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:00022B   26 D9 99 A0 00           FSTP  ES:DWORD PTR [ECX+160]
                   00 00                                                      
C****************************************************************************
C   117:    	Ist_Inter->dm              = Aus_Puff.form_ring.dm;
C +           					/* Mittlerer Durchmes
C +       ser        [mm]    */ 
C****************************************************************************
   CODE32:000232   D9 84 24 F0 01           FLD   DWORD PTR [ESP+496]
                   00 00                                                      
   CODE32:000239   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:00023D   26 D9 99 A4 00           FSTP  ES:DWORD PTR [ECX+164]
                   00 00                                                      
C****************************************************************************
C   118:    	Ist_Inter->dm_of           = Ein_Puff.form_mess_of.dm
C +       ;     
C****************************************************************************
   CODE32:000244   D9 84 24 78 13           FLD   DWORD PTR [ESP+4984]
                   00 00                                                      
   CODE32:00024B   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:00024F   26 D9 99 A8 00           FSTP  ES:DWORD PTR [ECX+168]
                   00 00                                                      

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 46

     Interleaved Listing

C****************************************************************************
C   119:    	Ist_Inter->fertig_ho_soll  = Aus_Puff.ist_walzform.hm
C +       ; 
C****************************************************************************
   CODE32:000256   D9 44 24 5C              FLD   DWORD PTR [ESP+92]
   CODE32:00025A   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:00025E   26 D9 99 AC 00           FSTP  ES:DWORD PTR [ECX+172]
                   00 00                                                      
C****************************************************************************
C   120:    	Ist_Inter->fertig_wd_soll  = Aus_Puff.ist_walzform.sm
C +       ; 
C****************************************************************************
   CODE32:000265   D9 44 24 58              FLD   DWORD PTR [ESP+88]
   CODE32:000269   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:00026D   26 D9 99 B0 00           FSTP  ES:DWORD PTR [ECX+176]
                   00 00                                                      
C****************************************************************************
C   121:    	Ist_Inter->h0a             = Aus_Puff.h0a;
C +       			/* Ringhoehe axial  einlaufend  [mm]
C +          */  		 
C****************************************************************************
   CODE32:000274   D9 84 24 C4 05           FLD   DWORD PTR [ESP+1476]
                   00 00                                                      
   CODE32:00027B   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:00027F   26 D9 99 B4 00           FSTP  ES:DWORD PTR [ECX+180]
                   00 00                                                      
C****************************************************************************
C   122:    	Ist_Inter->h0r             = Aus_Puff.h0r;
C +       			/* Ringhoehe radial einlaufend  [mm]
C +          */ 
C****************************************************************************
   CODE32:000286   D9 84 24 BC 05           FLD   DWORD PTR [ESP+1468]
                   00 00                                                      
   CODE32:00028D   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:000291   26 D9 99 B8 00           FSTP  ES:DWORD PTR [ECX+184]
                   00 00                                                      
C****************************************************************************
C   123:    	Ist_Inter->h1r             = Aus_Puff.h1r;
C +       			/* Ringhoehe radial auslaufend  [mm]
C +          */ 
C****************************************************************************
   CODE32:000298   D9 84 24 C0 05           FLD   DWORD PTR [ESP+1472]
                   00 00                                                      
   CODE32:00029F   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:0002A3   26 D9 99 BC 00           FSTP  ES:DWORD PTR [ECX+188]
                   00 00                                                      
C****************************************************************************
C   124:    	Ist_Inter->h1a             = Aus_Puff.h1a;
C +       			/* Ringhoehe axial  auslaufend  [mm]
C +          */ 
C****************************************************************************
   CODE32:0002AA   D9 84 24 C8 05           FLD   DWORD PTR [ESP+1480]
                   00 00                                                      
   CODE32:0002B1   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:0002B5   26 D9 99 C0 00           FSTP  ES:DWORD PTR [ECX+192]

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 47

     Interleaved Listing

                   00 00                                                      
C****************************************************************************
C   125:    	Ist_Inter->h1a_of          = Ein_Puff.form_mess_of.di
C +       s_aw; 
C****************************************************************************
   CODE32:0002BC   D9 84 24 84 13           FLD   DWORD PTR [ESP+4996]
                   00 00                                                      
   CODE32:0002C3   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:0002C7   26 D9 99 C4 00           FSTP  ES:DWORD PTR [ECX+196]
                   00 00                                                      
C****************************************************************************
C   126:    	Ist_Inter->s0a             = Aus_Puff.s0a;
C +       			/* Wanddicke axial  einlaufend  [mm]
C +          */ 
C****************************************************************************
   CODE32:0002CE   D9 84 24 D4 05           FLD   DWORD PTR [ESP+1492]
                   00 00                                                      
   CODE32:0002D5   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:0002D9   26 D9 99 C8 00           FSTP  ES:DWORD PTR [ECX+200]
                   00 00                                                      
C****************************************************************************
C   127:    	Ist_Inter->s0r             = Aus_Puff.s0r;
C +       			/* Wanddicke radial einlaufend  [mm]
C +          */ 
C****************************************************************************
   CODE32:0002E0   D9 84 24 CC 05           FLD   DWORD PTR [ESP+1484]
                   00 00                                                      
   CODE32:0002E7   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:0002EB   26 D9 99 CC 00           FSTP  ES:DWORD PTR [ECX+204]
                   00 00                                                      
C****************************************************************************
C   128:    	Ist_Inter->s1a             = Aus_Puff.s1a;
C +       			/* Wanddicke axial  auslaufend  [mm]
C +          */ 
C****************************************************************************
   CODE32:0002F2   D9 84 24 D8 05           FLD   DWORD PTR [ESP+1496]
                   00 00                                                      
   CODE32:0002F9   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:0002FD   26 D9 99 D0 00           FSTP  ES:DWORD PTR [ECX+208]
                   00 00                                                      
C****************************************************************************
C   129:    	Ist_Inter->s1r             = Aus_Puff.s1r;
C +       			/* Wanddicke radial auslaufend  [mm]
C +          */ 
C****************************************************************************
   CODE32:000304   D9 84 24 D0 05           FLD   DWORD PTR [ESP+1488]
                   00 00                                                      
   CODE32:00030B   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:00030F   26 D9 99 D4 00           FSTP  ES:DWORD PTR [ECX+212]
                   00 00                                                      
C****************************************************************************
C   130:    	Ist_Inter->s1r_of          = Ein_Puff.form_mess_of.di
C +       s_hw_dw; 
C****************************************************************************
   CODE32:000316   D9 84 24 80 13           FLD   DWORD PTR [ESP+4992]

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 48

     Interleaved Listing

                   00 00                                                      
   CODE32:00031D   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:000321   26 D9 99 D8 00           FSTP  ES:DWORD PTR [ECX+216]
                   00 00                                                      
C****************************************************************************
C   131:  	Ist_Inter->sfh             = Aus_Puff.s_ekv;
C +       			/* Wanddicke bei Fertighoehe    [mm]
C +          */ 
C****************************************************************************
   CODE32:000328   D9 84 24 E0 05           FLD   DWORD PTR [ESP+1504]
                   00 00                                                      
   CODE32:00032F   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:000333   26 D9 99 DC 00           FSTP  ES:DWORD PTR [ECX+220]
                   00 00                                                      
C****************************************************************************
C   132:    	Ist_Inter->skw             = 0.0F;
C +         
C****************************************************************************
   CODE32:00033A   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:00033E   B8 00 00 00 00           MOV   EAX,0
   CODE32:000343   26 89 81 E0 00           MOV   ES:DWORD PTR [ECX+224],EAX
                   00 00                                                      
C****************************************************************************
C   133:    	Ist_Inter->skw_of          = 0.0F;
C +          		 
C****************************************************************************
   CODE32:00034A   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:00034E   B8 00 00 00 00           MOV   EAX,0
   CODE32:000353   26 89 81 E4 00           MOV   ES:DWORD PTR [ECX+228],EAX
                   00 00                                                      
C****************************************************************************
C   134:    	Ist_Inter->wa_dvol         = Aus_Puff.dvol_ring_proz;
C +             /* Berechnete Volumendifferenz [%]       */ 
C****************************************************************************
   CODE32:00035A   D9 84 24 44 07           FLD   DWORD PTR [ESP+1860]
                   00 00                                                      
   CODE32:000361   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:000365   26 D9 99 E8 00           FSTP  ES:DWORD PTR [ECX+232]
                   00 00                                                      
C****************************************************************************
C   135:      Ist_Inter->Vorform.sm      = Ein_Puff.vorform.sm;
C +          /* Wandstärke Vorform aus Carwin            [mm] */ 
C****************************************************************************
   CODE32:00036C   D9 84 24 D4 16           FLD   DWORD PTR [ESP+5844]
                   00 00                                                      
   CODE32:000373   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:000377   26 D9 99 EC 00           FSTP  ES:DWORD PTR [ECX+236]
                   00 00                                                      
C****************************************************************************
C   136:      Ist_Inter->Vorform.da      = Ein_Puff.vorform.da;
C +          /* Durchmesser Vorform  aus Carwin          [mm] */ 
C****************************************************************************
   CODE32:00037E   D9 84 24 C8 16           FLD   DWORD PTR [ESP+5832]
                   00 00                                                      
   CODE32:000385   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 49

     Interleaved Listing

   CODE32:000389   26 D9 99 F4 00           FSTP  ES:DWORD PTR [ECX+244]
                   00 00                                                      
C****************************************************************************
C   137:      Ist_Inter->Vorform.hm      = Ein_Puff.vorform.hm;
C +          /* Rohlingshöhe Vorform aus Carwin          [mm] */ 
C****************************************************************************
   CODE32:000390   D9 84 24 D8 16           FLD   DWORD PTR [ESP+5848]
                   00 00                                                      
   CODE32:000397   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:00039B   26 D9 99 F0 00           FSTP  ES:DWORD PTR [ECX+240]
                   00 00                                                      
C****************************************************************************
C   138:   
C   139:      Ist_Inter->rs_f            = Aus_Puff.fr_mf;
C +          /* Radiale Kraft gefiltert                [N] */ 
C****************************************************************************
   CODE32:0003A2   D9 84 24 54 07           FLD   DWORD PTR [ESP+1876]
                   00 00                                                      
   CODE32:0003A9   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:0003AD   26 D9 59 34              FSTP  ES:DWORD PTR [ECX+52]
C****************************************************************************
C   140:      Ist_Inter->as_f            = Aus_Puff.fa_mf;
C +          /* Axiale Kraft gefiltert                 [N] */ 
C****************************************************************************
   CODE32:0003B1   D9 84 24 58 07           FLD   DWORD PTR [ESP+1880]
                   00 00                                                      
   CODE32:0003B8   C4 4C 24 04              LES   ECX,PWORD PTR [ESP+4]
   CODE32:0003BC   26 D9 59 38              FSTP  ES:DWORD PTR [ECX+56]
C****************************************************************************
C   141:      // Ist_Inter->ag_f = ? ;
C +          /* Axialgerüst                            [N] */         
C   142:                     
C   143:         
C   144:     
C   145:   
C   146:      return TRUE; 
C****************************************************************************
   CODE32:0003C0   B8 FF FF FF FF           MOV   EAX,-1
   CODE32:0003C5   C2 24 20                 RET   8228
                                  Istwerte_RAW__3RPWF12Def_Ein_Puff14Def_Lokal_Puff12Def_Aus_PuffP13Def_Ist_Inter  ENDP

C****************************************************************************
C   153:  int RPW::Main( struct Def_Ist_Inter          Ist_Inter, 
C   154:                 float  IBF_PARA[IBF_PARA_MAX], 
C   155:                 struct Def_IBF_Allgemein_IST  *Ist_IBF,  
C   156:                 struct Def_Soll_Inter         *Soll_Inter, 
C   157:                 struct Def_IBF_Allgemein_SOLL *Soll_IBF) 
C   158:  { 
C****************************************************************************
                                  L20004  LABEL BYTE
   LINK  :000008   00                       DB    0
   LINK  :000009   00                       DB    0
   LINK  :00000A   80                       DB    128
   LINK  :00000B   3F                       DB    63
                                  L20005  LABEL BYTE
   LINK  :00000C   00                       DB    0

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 50

     Interleaved Listing

   LINK  :00000D   00                       DB    0
   LINK  :00000E   00                       DB    0
   LINK  :00000F   40                       DB    64
                                  L20006  LABEL BYTE
   LINK  :000010   00                       DB    0
   LINK  :000011   00                       DB    0
   LINK  :000012   70                       DB    112
   LINK  :000013   42                       DB    66
                                  L20008  LABEL BYTE
   LINK  :000014   00                       DB    0
   LINK  :000015   50                       DB    80
   LINK  :000016   C3                       DB    195
   LINK  :000017   47                       DB    71
                                  L20011  LABEL BYTE
   LINK  :000018   00                       DB    0
   LINK  :000019   40                       DB    64
   LINK  :00001A   9C                       DB    156
   LINK  :00001B   47                       DB    71
                                  L20014  LABEL BYTE
   LINK  :00001C   00                       DB    0
   LINK  :00001D   40                       DB    64
   LINK  :00001E   1C                       DB    28
   LINK  :00001F   46                       DB    70
                                  L20017  LABEL BYTE
   LINK  :000020   00                       DB    0
   LINK  :000021   00                       DB    0
   LINK  :000022   70                       DB    112
   LINK  :000023   41                       DB    65
                                  L20019  LABEL BYTE
   LINK  :000024   00                       DB    0
   LINK  :000025   00                       DB    0
   LINK  :000026   C8                       DB    200
   LINK  :000027   42                       DB    66
                                  L20020  LABEL BYTE
   LINK  :000028   00                       DB    0
   LINK  :000029   00                       DB    0
   LINK  :00002A   20                       DB    32
   LINK  :00002B   42                       DB    66
                                  L20027  LABEL BYTE
   LINK  :00002C   00                       DB    0
   LINK  :00002D   00                       DB    0
   LINK  :00002E   C0                       DB    192
   LINK  :00002F   3F                       DB    63
                                  L20048  LABEL BYTE
   LINK  :000030   66                       DB    102
   LINK  :000031   E6                       DB    230
   LINK  :000032   3A                       DB    58
   LINK  :000033   43                       DB    67
                                  L20049  LABEL BYTE
   LINK  :000034   00                       DB    0
   LINK  :000035   00                       DB    0
   LINK  :000036   20                       DB    32
   LINK  :000037   41                       DB    65
                                  L20052  LABEL BYTE
   LINK  :000038   00                       DB    0

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 51

     Interleaved Listing

   LINK  :000039   00                       DB    0
   LINK  :00003A   48                       DB    72
   LINK  :00003B   42                       DB    66

                                            PUBLIC   Main__3RPWF13Def_Ist_InterPfP21Def_IBF_Allgemein_ISTP14Def_Soll_InterP22Def_IBF_Allgemein_SOLL
                                  Main__3RPWF13Def_Ist_InterPfP21Def_IBF_Allgemein_ISTP14Def_Soll_InterP22Def_IBF_Allgemein_SOLL    PROC NEAR
                                            ASSUME DS:DATA
   CODE32:0003C8   55                       PUSH  EBP
   CODE32:0003C9   8B EC                    MOV   EBP,ESP
   CODE32:0003CB   81 EC 84 00 00           SUB   ESP,132
                   00                                                         
C****************************************************************************
C   159:   
C   160:     // Zuweisung Def_IBF_Allgemein_SOLL  
C   161:   
C   162:     // Übergeben der Parameter aus Soll_IBF/Ist_IBF Struktur 
C   163:         
C   164:     Ist_IBF->Profilflag = Soll_IBF->Profilflag; 
C   165:     Ist_IBF->InitAchse  = Soll_IBF->InitAchse; 
C   166:     Ist_IBF->ExitAchse  = Soll_IBF->ExitAchse; 
C   167:     
C   168:     Ist_IBF->RS_Pos_Null  = Soll_IBF->RS_Pos_Null; // bla_Nul
C +       l -> Initialisierung nach manueller Anfahrt / vor Profiliere
C +       n  
C   169:     Ist_IBF->ASO_Pos_Null = Soll_IBF->ASO_Pos_Null; 
C   170:     Ist_IBF->AG_Pos_Null  = Soll_IBF->AG_Pos_Null;
C +        
C   171:   
C   172:     Ist_IBF->RS_Pos_Start = Soll_IBF->RS_Pos_Start; 	// Po
C +       sitionen in 'Walzen' vor Profilieren  
C   173:     Ist_IBF->AG_Pos_Start = Soll_IBF->AG_Pos_Start; 	 
C   174:     Ist_IBF->ASO_Pos_Start= Soll_IBF->ASO_Pos_Start;
C +          
C   175:      
C   176:     Ist_IBF->Vorring.Wandstaerke_Null    = Ist_Inter.Vorform.
C +       sm;  /* Übergabe der Rohlingswanddicke an IBF-Struktur */   
C   177:     Ist_IBF->Werkzeugdurchmesser = diam_dw;               /*
C +       Übergabe der Rohlingshöhe an IBF-Struktur | diam_dw in class
C +        rpw definiert */ 
C   178:     Ist_IBF->Vorring.D_Null      = Ist_Inter.Vorform.da;  /*
C +       Übergabe der Rohlingswanddicke an IBF-Struktur */  
C   179:     Ist_IBF->Vorring.Start_Ringhoehe     = Ist_Inter.Vorform.
C +       hm;  /* Übergabe der Rohlingshöhe an IBF-Struktur */    
C   180:      
C   181:     Ist_IBF->FR                  = Ist_Inter.rs_f;        /*
C +       Übergabe der aktuellen RS-Kraft an IBF-Struktur */  
C   182:     Ist_IBF->FA                  = Ist_Inter.as_f;        /*
C +       Übergabe der aktuellen AS-Kraft an IBF-Struktur */
C +         
C   183:   
C   184:  #if(MRAW) 
C   185:     Ist_IBF->FA_f       = 0.1F; 
C   186:     Ist_IBF->FR_f       = 0.1F;  // im Interfac gefilterte Kr
C +       aft 
C   187:     Ist_IBF->s_f        = 0.1F; 

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 52

     Interleaved Listing

C   188:      
C   189:  #else  
C   190:     Ist_IBF->FA_f       = 1.0F; //Aus_Puff.fa_mf;  
C   191:     Ist_IBF->FR_f       = 1.0F; //Aus_Puff.fr_mf; 
C   192:     Ist_IBF->s_f        = 1.0F; //Aus_Puff.s1r; 
C   193:   
C   194:  #endif 
C   195:  //----------------------------------------------------------
C +       ----------------- 
C   196:  // Beginn AXPRO.H 
C   197:  //----------------------------------------------------------
C +       ----------------- 
C   198:     
C   199:      
C   200:     //-------------------------------------------------------
C +       ---------------------------------- 
C   201:     //-----------------------Definition für Kraftregler/Filte
C +       rwerte u.ä.----------------------- 
C   202:     //-------------------------------------------------------
C +       ---------------------------------- 
C   203:      
C   204:      
C   205:     float s_f_alt = 0.0F; // 	gefilterte Wanddicke zum Zeit
C +       punkt t-1 für Positionierung der oberen Kegelwalze 
C   206:                 
C   207:      
C   208:      
C   209:     float KP = 0.00191F;        //Radialkraft Prop 
C   210:      
C   211:     	 
C   212:     float uk_ASO = 0;   			//Hilfsvariab
C +       le für Axialkraftregelung   MIC 040416 
C   213:     float uk1_ASO = 0;          //Hilfsvariable für Axialkraf
C +       tregelung  MIC 040416 
C   214:      
C   215:      
C   216:     // Filter für Ringdurchmesser      
C   217:     float	 diam_f = 0;			// gefilterte
C +       r Ringdurchmesser  
C   218:     float	 diam_f_alt = 0;	// letzter Wert Ringd
C +       urchmesser für Filter  
C   219:      
C   220:      
C   221:      
C   222:     float RS_Koll = 1.0F;      // Sicherheitsabstand RS-HW
C +        (1 mm) 
C   223:     float AG_Koll =  5.0F;     // Sicherheitsabstand AS-RS
C +         (5 mm) 
C   224:  
C +               
C   225:     float eps = 0.1F;          // Positioniergenauigkeit mich
C +       l:-> war 0.1F 
C   226:      
C   227:     float t_Halte = 50;        // Haltezeit in Vielfachen von
C +        100ms                

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 53

     Interleaved Listing

C   228:     float t_warte = 0;         // Wartezeit in Vielfaches von
C +        100ms    
C   229:     float t_warte_flag = 0;    // WarteFlag, damit t_warte be
C +       i der ersten Initialisierung gesetzt wird 
C   230:                         
C   231:     //-------------------------------------------------------
C +       --------------------------------------- 
C   232:     //--------------------------Variablen aus IBFPARA3.c-----
C +       --------------------------------------- 
C   233:     //-------------------------------------------------------
C +       --------------------------------------- 
C   234:     float Axialkraft; 
C   235:     float Radialkraft; 
C   236:     //-------------------------------------------------------
C +       ---------------------------------------- 
C   237:     //------------------------------sonstige Hilfsvariablen--
C +       ---------------------------------------- 
C   238:     //-------------------------------------------------------
C +       ----------------------------------------  
C   239:         
C   240:          
C   241:       
C   242:     //-------------------------------------------------------
C +       -----------------------------------------  
C   243:     float zaehler=0.01F;    
C   244:     float n = 0.0f;     
C   245:     float s_ist =0.0f;          
C   246:      
C   247:     //-------------------------------------------------------
C +       ---------------------------------------- 
C   248:     //------------------------- Variablen für die diskontinui
C +       erliche Funktion ----------------------- 
C   249:     //-------------------------------------------------------
C +       ---------------------------------------- 
C   250:      
C   251:      
C   252:     float t_dis_h = 0; // Haltezeit für 1.5 Umdrehungen, bei
C +       denen der Dorn stehen bleiben soll (Diskontinuierliche Abwal
C +       zung) 
C   253:      
C   254:     float delta_h = 0.0F; 
C   255:   
C   256:  //----------------------------------------------------------
C +       ----------------- 
C   257:  // Ende AXPRO.H 
C   258:  //----------------------------------------------------------
C +       ----------------- 
C   259:   
C   260:     // Ring: Höhe und Wanddicke; Außendurchmesser 'diam' exte
C +       rn von interfac 
C   261:     float h_a1;             // Ringhöhe nach Axialwalzspalt b
C +       zw. Entfernung Kr-K 
C   262:     float s_r1;             // Wanddicke nach Radialwalzspalt
C +        bzw. Entfernung DW-HW 
C   263:     float diam;             // Ringdurchmesser 

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 54

     Interleaved Listing

C   264:   
C   265:     float Ta  = 0.1F;       // Filter  
C   266:     float Kpf = 1; 
C   267:     float T1f = 1;      
C   268:   
C   269:      
C   270:     float Del_ASO_Pos;      // KORREKTUR ASO für axiale Walzk
C +       raftregelung MIC 040406 
C   271:   
C   272:     float f_H;              // Drehfrequenz der HW in 1/s (_n
C +       icht_ 1/min!) 
C   273:      
C   274:     float t_U;              // Zeit für eine Ringumdrehung
C +        
C   275:   
C   276:     int RS_HW = 1;    // Kollisionsgefahr RS-HW 
C   277:     int RS_AG = 1;    // Kollisionsgefahr RS_AG 
C   278:     int AG_RS = 1;    // Kollisionsgefahr AG-RS 
C   279:     int AS_AS = 1;    // Kollisionsgefahr oKrw-uKw  
C   280:   
C   281:     // Pi  
C   282:     #ifndef  PI 
C   283:     #define  PI 3.14159265 
C   284:     #endif  
C   285:   
C   286:     /* Daten von Oberflaeche an Task */
C +        
C   287:     struct Def_Steuerbyte Steuerbyte_Lese; // far Steuerbyte_
C +       Lese;  
C****************************************************************************
   CODE32:0003D1   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:0003D4   26 8B 01                 MOV   EAX,ES:DWORD PTR [ECX]
   CODE32:0003D7   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:0003DA   26 89 41 09              MOV   ES:DWORD PTR [ECX+9],EAX
   CODE32:0003DE   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:0003E1   26 0F BE 41 04           MOVSX EAX,ES:BYTE PTR [ECX+4]
   CODE32:0003E6   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:0003EA   64 88 43 0D              MOV   FS:BYTE PTR [EBX+13],AL
   CODE32:0003EE   26 0F BE 41 05           MOVSX EAX,ES:BYTE PTR [ECX+5]
   CODE32:0003F3   64 88 43 0E              MOV   FS:BYTE PTR [EBX+14],AL
   CODE32:0003F7   0F B4 5D 08              LFS   EBX,PWORD PTR [EBP+8]
   CODE32:0003FB   64 D9 43 36              FLD   FS:DWORD PTR [EBX+54]
   CODE32:0003FF   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:000402   26 D9 59 2F              FSTP  ES:DWORD PTR [ECX+47]
   CODE32:000406   64 D9 43 46              FLD   FS:DWORD PTR [EBX+70]
   CODE32:00040A   26 D9 59 33              FSTP  ES:DWORD PTR [ECX+51]
   CODE32:00040E   64 D9 43 4E              FLD   FS:DWORD PTR [EBX+78]
   CODE32:000412   26 D9 59 37              FSTP  ES:DWORD PTR [ECX+55]
   CODE32:000416   64 D9 43 3A              FLD   FS:DWORD PTR [EBX+58]
   CODE32:00041A   26 D9 59 3B              FSTP  ES:DWORD PTR [ECX+59]
   CODE32:00041E   64 D9 43 52              FLD   FS:DWORD PTR [EBX+82]
   CODE32:000422   26 D9 59 3F              FSTP  ES:DWORD PTR [ECX+63]
   CODE32:000426   64 D9 43 4A              FLD   FS:DWORD PTR [EBX+74]
   CODE32:00042A   26 D9 59 43              FSTP  ES:DWORD PTR [ECX+67]
   CODE32:00042E   D9 85 14 01 00           FLD   DWORD PTR [EBP+276]

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 55

     Interleaved Listing

                   00                                                         
   CODE32:000434   26 D9 99 8F 00           FSTP  ES:DWORD PTR [ECX+143]
                   00 00                                                      
   CODE32:00043B   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:000442   64 D9 43 04              FLD   FS:DWORD PTR [EBX+4]
   CODE32:000446   26 D9 99 AF 00           FSTP  ES:DWORD PTR [ECX+175]
                   00 00                                                      
   CODE32:00044D   D9 85 1C 01 00           FLD   DWORD PTR [EBP+284]
                   00                                                         
   CODE32:000453   26 D9 99 8B 00           FSTP  ES:DWORD PTR [ECX+139]
                   00 00                                                      
   CODE32:00045A   D9 85 18 01 00           FLD   DWORD PTR [EBP+280]
                   00                                                         
   CODE32:000460   26 D9 99 93 00           FSTP  ES:DWORD PTR [ECX+147]
                   00 00                                                      
   CODE32:000467   D9 45 5C                 FLD   DWORD PTR [EBP+92]
   CODE32:00046A   26 D9 59 0F              FSTP  ES:DWORD PTR [ECX+15]
   CODE32:00046E   D9 45 60                 FLD   DWORD PTR [EBP+96]
   CODE32:000471   26 D9 59 13              FSTP  ES:DWORD PTR [ECX+19]
   CODE32:000475   B8 00 00 80 3F           MOV   EAX,1065353216
   CODE32:00047A   26 89 41 1B              MOV   ES:DWORD PTR [ECX+27],EAX
   CODE32:00047E   B8 00 00 80 3F           MOV   EAX,1065353216
   CODE32:000483   26 89 41 17              MOV   ES:DWORD PTR [ECX+23],EAX
   CODE32:000487   B8 00 00 80 3F           MOV   EAX,1065353216
   CODE32:00048C   26 89 41 4B              MOV   ES:DWORD PTR [ECX+75],EAX
   CODE32:000490   B8 00 00 00 00           MOV   EAX,0
   CODE32:000495   89 45 F8                 MOV   DWORD PTR [EBP-8],EAX
   CODE32:000498   B8 F7 58 FA 3A           MOV   EAX,989485303
   CODE32:00049D   89 45 AC                 MOV   DWORD PTR [EBP-84],EAX
   CODE32:0004A0   B8 00 00 00 00           MOV   EAX,0
   CODE32:0004A5   89 45 F0                 MOV   DWORD PTR [EBP-16],EAX
   CODE32:0004A8   89 45 D8                 MOV   DWORD PTR [EBP-40],EAX
   CODE32:0004AB   89 45 F4                 MOV   DWORD PTR [EBP-12],EAX
   CODE32:0004AE   89 45 DC                 MOV   DWORD PTR [EBP-36],EAX
   CODE32:0004B1   B8 CD CC CC 3D           MOV   EAX,1036831949
   CODE32:0004B6   89 45 E0                 MOV   DWORD PTR [EBP-32],EAX
   CODE32:0004B9   B8 00 00 48 42           MOV   EAX,1112014848
   CODE32:0004BE   89 45 FC                 MOV   DWORD PTR [EBP-4],EAX
   CODE32:0004C1   B8 00 00 00 00           MOV   EAX,0
   CODE32:0004C6   89 45 B0                 MOV   DWORD PTR [EBP-80],EAX
   CODE32:0004C9   89 45 B4                 MOV   DWORD PTR [EBP-76],EAX
   CODE32:0004CC   B8 0A D7 23 3C           MOV   EAX,1008981770
   CODE32:0004D1   89 45 E4                 MOV   DWORD PTR [EBP-28],EAX
   CODE32:0004D4   B8 00 00 00 00           MOV   EAX,0
   CODE32:0004D9   89 45 B8                 MOV   DWORD PTR [EBP-72],EAX
   CODE32:0004DC   89 45 C8                 MOV   DWORD PTR [EBP-56],EAX
   CODE32:0004DF   89 45 E8                 MOV   DWORD PTR [EBP-24],EAX
   CODE32:0004E2   89 45 CC                 MOV   DWORD PTR [EBP-52],EAX
   CODE32:0004E5   B8 CD CC CC 3D           MOV   EAX,1036831949
   CODE32:0004EA   89 45 D0                 MOV   DWORD PTR [EBP-48],EAX
   CODE32:0004ED   B8 00 00 80 3F           MOV   EAX,1065353216
   CODE32:0004F2   89 45 C0                 MOV   DWORD PTR [EBP-64],EAX
   CODE32:0004F5   89 45 D4                 MOV   DWORD PTR [EBP-44],EAX
C****************************************************************************

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 56

     Interleaved Listing

C   288:   
C   289:  //++++++++++ Zyklische Initialisierung und Aktualisierung de
C +       r Messgrößen ++++++++++ 
C   290:   
C   291:     // schritt_nr = Soll_Inter->schritt_nr;	// lese aktue
C +       llen Programmstatus (Koppers)  
C   292:      
C   293:     // aktuelle Positionen im Walzwerk auslesen und berechnen
C +       : 
C   294:     Ist_IBF->RS_Pos   = Ist_Inter.rs_pos; 
C****************************************************************************
   CODE32:0004F8   D9 45 28                 FLD   DWORD PTR [EBP+40]
   CODE32:0004FB   26 D9 59 1F              FSTP  ES:DWORD PTR [ECX+31]
C****************************************************************************
C   295:  //   Ist_IBF->RS_Pos   = Ist_Inter.rs_pos  - offset_rs;
C +        // aktuelle Dornposition 
C   296:     Ist_IBF->AG_Pos   = Ist_Inter.ag_pos  - offset_agr;     /
C +       / aktuelle Axialgerüstposition 
C****************************************************************************
   CODE32:0004FF   64 D9 43 18              FLD   FS:DWORD PTR [EBX+24]
   CODE32:000503   D8 6D 34                 FSUBR DWORD PTR [EBP+52]
   CODE32:000506   26 D9 59 23              FSTP  ES:DWORD PTR [ECX+35]
C****************************************************************************
C   297:     Ist_IBF->ASO_Pos  = Ist_Inter.aso_pos - offset_aso;     /
C +       / aktuelle Axialschlittenposition oben 
C****************************************************************************
   CODE32:00050A   64 D9 43 1C              FLD   FS:DWORD PTR [EBX+28]
   CODE32:00050E   D8 6D 2C                 FSUBR DWORD PTR [EBP+44]
   CODE32:000511   26 D9 59 27              FSTP  ES:DWORD PTR [ECX+39]
C****************************************************************************
C   298:  #ifdef MRAW 
C   299:     Ist_IBF->ASU_Pos  = Ist_Inter.asu_pos - offset_asu;     /
C +       / aktuelle Axialschlittenposition unten 
C   300:  #endif 
C   301:     Ist_IBF->TR_Pos   = Ist_Inter.tr_pos  - offset_tr;      /
C +       / aktuelle Tastrollenposition 
C****************************************************************************
   CODE32:000515   64 D9 43 24              FLD   FS:DWORD PTR [EBX+36]
   CODE32:000519   D8 6D 40                 FSUBR DWORD PTR [EBP+64]
   CODE32:00051C   26 D9 59 2B              FSTP  ES:DWORD PTR [ECX+43]
C****************************************************************************
C   302:     Ist_IBF->FR       = Ist_Inter.rs_f;                     /
C +       / aktuelle rad. Walzkraft      
C****************************************************************************
   CODE32:000520   D9 45 5C                 FLD   DWORD PTR [EBP+92]
   CODE32:000523   26 D9 59 0F              FSTP  ES:DWORD PTR [ECX+15]
C****************************************************************************
C   303:     Ist_IBF->FA       = Ist_Inter.as_f;                     /
C +       / aktuelle axiale Walzkraft     
C****************************************************************************
   CODE32:000527   D9 45 60                 FLD   DWORD PTR [EBP+96]
   CODE32:00052A   26 D9 59 13              FSTP  ES:DWORD PTR [ECX+19]
C****************************************************************************
C   304:      
C   305:     // Sollgeschwindigkeiten im Walzwerk (alle 0 wg. aut init

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 57

     Interleaved Listing

C +        startpos): 
C   306:     Soll_IBF->RS_V = Soll_IBF->ASO_V = Soll_IBF->AG_V = 1.0F;
C +             //  !!! 
C****************************************************************************
   CODE32:00052E   2E D9 05 00 00           FLD   CS:DWORD PTR L20004
                   00 00R                                                     
   CODE32:000535   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000538   26 D9 51 2A              FST   ES:DWORD PTR [ECX+42]
   CODE32:00053C   26 D9 51 26              FST   ES:DWORD PTR [ECX+38]
   CODE32:000540   26 D9 59 22              FSTP  ES:DWORD PTR [ECX+34]
C****************************************************************************
C   307:        
C   308:      
C   309:     // aktuelle Ringgeometrie 
C   310:     h_a1 = Ist_IBF->ASO_Pos;                               //
C +        Ringhöhe 
C****************************************************************************
   CODE32:000544   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:000547   26 D9 41 27              FLD   ES:DWORD PTR [ECX+39]
   CODE32:00054B   D9 5D 88                 FSTP  DWORD PTR [EBP-120]
C****************************************************************************
C   311:     s_r1 = Ist_IBF->RS_Pos - ((diam_hw + diam_dw) / 2.0F); //
C +        Wanddicke; Problem wegen Breitung!?!? 
C****************************************************************************
   CODE32:00054E   C4 8D 34 03 00           LES   ECX,PWORD PTR [EBP+820]
                   00                                                         
   CODE32:000554   26 D9 41 04              FLD   ES:DWORD PTR [ECX+4]
   CODE32:000558   64 D8 03                 FADD  FS:DWORD PTR [EBX]
   CODE32:00055B   2E D9 05 00 00           FLD   CS:DWORD PTR L20005
                   00 00R                                                     
   CODE32:000562   DE F9                    FDIVR                             
   CODE32:000564   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:000567   26 D8 69 1F              FSUBR ES:DWORD PTR [ECX+31]
   CODE32:00056B   D9 5D 8C                 FSTP  DWORD PTR [EBP-116]
C****************************************************************************
C   312:     diam = Ist_IBF->TR_Pos + Ist_IBF->AG_Pos - (diam_hw / 2.0
C +       F);   // momentaner Ringdurchmesser 
C****************************************************************************
   CODE32:00056E   26 D9 41 23              FLD   ES:DWORD PTR [ECX+35]
   CODE32:000572   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000576   64 D8 43 2B              FADD  FS:DWORD PTR [EBX+43]
   CODE32:00057A   2E D9 05 00 00           FLD   CS:DWORD PTR L20005
                   00 00R                                                     
   CODE32:000581   C4 8D 34 03 00           LES   ECX,PWORD PTR [EBP+820]
                   00                                                         
   CODE32:000587   26 D8 39                 FDIVR ES:DWORD PTR [ECX]
   CODE32:00058A   DE E9                    FSUBR                             
   CODE32:00058C   D9 5D BC                 FSTP  DWORD PTR [EBP-68]
C****************************************************************************
C   313:                            
C   314:     // Filter für Ringdurchmesser, Bö, 020528 
C   315:     diam_f     = (Kpf * diam + ((T1f / Ta) * diam_f_alt)) / (
C +       (T1f / Ta) + 1); 
C****************************************************************************
   CODE32:00058F   D9 45 D0                 FLD   DWORD PTR [EBP-48]

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 58

     Interleaved Listing

   CODE32:000592   D8 7D D4                 FDIVR DWORD PTR [EBP-44]
   CODE32:000595   D9 45 DC                 FLD   DWORD PTR [EBP-36]
   CODE32:000598   DE C9                    FMUL                              
   CODE32:00059A   D9 45 BC                 FLD   DWORD PTR [EBP-68]
   CODE32:00059D   D8 4D C0                 FMUL  DWORD PTR [EBP-64]
   CODE32:0005A0   DE C1                    FADD                              
   CODE32:0005A2   D9 45 D0                 FLD   DWORD PTR [EBP-48]
   CODE32:0005A5   D8 7D D4                 FDIVR DWORD PTR [EBP-44]
   CODE32:0005A8   2E D9 05 00 00           FLD   CS:DWORD PTR L20004
                   00 00R                                                     
   CODE32:0005AF   DE C1                    FADD                              
   CODE32:0005B1   DE F9                    FDIVR                             
   CODE32:0005B3   D9 5D F4                 FSTP  DWORD PTR [EBP-12]
C****************************************************************************
C   316:     diam_f_alt = diam_f;          
C****************************************************************************
   CODE32:0005B6   D9 45 F4                 FLD   DWORD PTR [EBP-12]
   CODE32:0005B9   D9 5D DC                 FSTP  DWORD PTR [EBP-36]
C****************************************************************************
C   317:                
C   318:     // Sonstige Größen, Hilfsgrößen etc. 
C   319:     f_H = Ist_Inter.hw_n/(hw_ir*60.0F); 
C****************************************************************************
   CODE32:0005BC   2E D9 05 00 00           FLD   CS:DWORD PTR L20006
                   00 00R                                                     
   CODE32:0005C3   26 D8 49 08              FMUL  ES:DWORD PTR [ECX+8]
   CODE32:0005C7   D8 BD 8C 00 00           FDIVR DWORD PTR [EBP+140]
                   00                                                         
   CODE32:0005CD   D9 5D EC                 FSTP  DWORD PTR [EBP-20]
C****************************************************************************
C   320:      
C   321:     t_U = diam_f/(diam_hw*f_H); // Zeit für eine Ringumdrehun
C +       g gemessen in s 
C****************************************************************************
   CODE32:0005D0   D9 45 EC                 FLD   DWORD PTR [EBP-20]
   CODE32:0005D3   26 D8 09                 FMUL  ES:DWORD PTR [ECX]
   CODE32:0005D6   D8 7D F4                 FDIVR DWORD PTR [EBP-12]
   CODE32:0005D9   D9 5D 94                 FSTP  DWORD PTR [EBP-108]
C****************************************************************************
C   322:   
C   323:  //----------------------------------------------------------
C +       ----------------------------------------- 
C   324:  //------------------ Übergabe der Zahlenwerte aus IBFPARA-Fe
C +       nster ----------------------------------- 
C   325:  //----------------------------------------------------------
C +       ----------------------------------------- 
C   326:     
C   327:     Axialkraft                    = 0.0F;   // Keine Vorgabe
C +       der Sollkraft  = zahl10;   //*!!!*  
C****************************************************************************
   CODE32:0005DC   B8 00 00 00 00           MOV   EAX,0
   CODE32:0005E1   89 45 C4                 MOV   DWORD PTR [EBP-60],EAX
C****************************************************************************
C   328:     Radialkraft                   = 0.0F;   // Keine Vorgabe
C +       der Sollkraft  = zahl11;   //*!!!*  

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 59

     Interleaved Listing

C   329:     Ist_IBF->Del_Kr_AGR           = 1.0F; 
C****************************************************************************
   CODE32:0005E4   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:0005E7   B8 00 00 80 3F           MOV   EAX,1065353216
   CODE32:0005EC   26 89 81 A7 00           MOV   ES:DWORD PTR [ECX+167],EAX
                   00 00                                                      
C****************************************************************************
C   330:     Ist_IBF->Pos_auf_Mantel       = 1.0F;   // 	 
C****************************************************************************
   CODE32:0005F3   B8 00 00 80 3F           MOV   EAX,1065353216
   CODE32:0005F8   26 89 81 AB 00           MOV   ES:DWORD PTR [ECX+171],EAX
                   00 00                                                      
C****************************************************************************
C   331:      
C   332:  //----------------------------------------------------------
C +       ------------------------------------------	 
C   333:   
C   334:   
C   335:  //++++++++++ Ende Initialisierung ++++++++++ 
C   336:   
C   337:  //########## Hand- bzw. Automatiksteuerung ausgehend von Kop
C +       pers Position bei Walzenstart ########## 
C   338:   
C   339:     // Geschwindigkeiten sind in axpro.h vorbelegt 
C   340:     // Startposition für jeweilige Ringgeometrie in axpro.h e
C +       intragen? 
C   341:   
C   342:     if (! Ist_IBF->AUTO)		// AUTO = 0 heißt man
C +       uelle Steuerung 
C   343:     { 
C****************************************************************************
   CODE32:0005FF   26 83 39 00              CMP   ES:DWORD PTR [ECX],0
C****************************************************************************
C   344:  #ifdef MRAW 
C   345:   
C   346:        if (Ist_IBF->StartPos == 1) 
C   347:        { 
C   348:           // Bei manuell braucht keine Startposition eingenom
C +       men werden !?! 
C   349:           // Sollposition auf Istposition zu Beginn: 
C   350:           Soll_IBF->RS_Pos  = Ist_IBF->RS_Pos; 
C   351:           Soll_IBF->ASO_Pos = Ist_IBF->ASO_Pos; 
C   352:           Soll_IBF->AG_Pos  = Ist_IBF->AG_Pos; 
C   353:            
C   354:           // Sollgeschwindigkeiten im Walzwerk: 
C   355:           Soll_IBF->RS_V = 100000.0F; 
C   356:           Soll_IBF->ASO_V = 1.0F; 
C   357:           Soll_IBF->AG_V = 1.0F; 
C   358:            
C   359:            
C   360:           Ist_IBF->StartPos = 0; 
C   361:        };
C +               
C   362:         
C   363:        _settextposition(6,1); 

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 60

     Interleaved Listing

C   364:        printf("Manuelle Steuerung: Beenden mit klein 'l': ");
C +          
C   365:        printf("TEST fuer Pause die Taste 'p' druecken"); 
C   366:   
C   367:        if (kbhit()) Ist_IBF->ManAuswahl = getch(); 
C   368:   
C   369:        switch (Ist_IBF->ManAuswahl) 
C   370:        { 
C   371:   
C   372:           case 't': Soll_IBF->RS_Pos = Soll_IBF->RS_Pos - 0.2
C +       F;	break;	// Radialschlitten 
C   373:           //case 'w': Soll_RS_Pos = Soll_RS_Pos - 0.1F;	break
C +       ; 
C   374:           case 'z': Soll_IBF->RS_Pos = Ist_IBF->RS_Pos; break
C +       ; 
C   375:           //case 'r': Soll_RS_Pos = Soll_RS_Pos + 0.1F;	break
C +       ; 
C   376:           case 'u': Soll_IBF->RS_Pos = Soll_IBF->RS_Pos + 0.2
C +       F; 	break; 
C   377:            
C   378:           case 'd': Soll_IBF->AG_Pos = Soll_IBF->AG_Pos - 0.2
C +       F;	break;	//	Axialgerüst 
C   379:           //case 's': Soll_AG_Pos = Soll_AG_Pos - 0.1F;	break
C +       ; 
C   380:           case 'f': Soll_IBF->AG_Pos = Ist_IBF->AG_Pos; break
C +       ; 
C   381:           //case 'f': Soll_AG_Pos = Soll_AG_Pos + 0.1F;	break
C +       ; 
C   382:           case 'g': Soll_IBF->AG_Pos = Soll_IBF->AG_Pos + 0.2
C +       F;	break; 
C   383:            
C   384:           case 'y': Soll_IBF->ASO_Pos = Soll_IBF->ASO_Pos - 0
C +       .2F;	break;	//	Axialschlitten 
C   385:           //case 'x': Soll_AS_Pos = Soll_AS_Pos - 0.1F;	break
C +       ; 
C   386:           case 'x': Soll_IBF->ASO_Pos = Ist_IBF->ASO_Pos; bre
C +       ak; 
C   387:           //case 'v': Soll_AS_Pos = Soll_AS_Pos + 0.1F;	break
C +       ; 
C   388:           case 'c': Soll_IBF->ASO_Pos = Soll_IBF->ASO_Pos + 0
C +       .2F;	break; 
C   389:            
C   390:           default: break; 
C   391:         }  // Klammer zu: switch (ManAuswahl)  
C   392:  #endif          
C   393:     } // Klammer zu: if !AUTO then 
C   394:   
C   395:     else  // von if !AUTO 
C   396:     {     // automatische Steuerung: 
C****************************************************************************
   CODE32:000603   0F 84 85 0F 00           JE    NEAR PTR   L8
                   00                                                         
C****************************************************************************
C   397:   
C   398:           // Da Messwerte von Anlage und Mess-Schieber differ

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 61

     Interleaved Listing

C +       ieren (...), vor Beginn  
C   399:           // des Profilierens Aussenkontur (radial/axial) des
C +        Ringes von Hand anfahren ?? 
C   400:           // -> von Hand angefahrene Positionen beschreiben d
C +       en Ausgangszustand ?? 
C   401:   
C   402:        switch (Ist_IBF->Profilflag)      // IBF_Allgemein.IBF
C +       _Allgemein.Profilflag in axpro.h definiert, bei Step 6 in in
C +       terfac auf -1 gesetzt!  
C****************************************************************************
   CODE32:000609   26 8B 41 09              MOV   EAX,ES:DWORD PTR [ECX+9]
   CODE32:00060D   3D 02 00 00 00           CMP   EAX,2
   CODE32:000612   7F 26                    JG    NEAR PTR   L20053
   CODE32:000614   0F 84 85 0D 00           JE    NEAR PTR   L48
                   00                                                         
   CODE32:00061A   40                       INC   EAX
   CODE32:00061B   3D 02 00 00 00           CMP   EAX,2
   CODE32:000620   0F 87 68 0F 00           JA    NEAR PTR   L8
                   00                                                         
   CODE32:000626   2E FF 24 85 00           JMP   CS:WORD PTR L20054[EAX*4]
                   00 00 00R                                                  
                                  L20054:
   CODE32:00062E   00 00 00 00R             DD    L10
   CODE32:000632   00 00 00 00R             DD    L11
   CODE32:000636   00 00 00 00R             DD    L36
                                  L20053:
   CODE32:00063A   3D 0B 00 00 00           CMP   EAX,11
   CODE32:00063F   7F 16                    JG    NEAR PTR   L20055
   CODE32:000641   0F 84 E1 0A 00           JE    NEAR PTR   L42
                   00                                                         
   CODE32:000647   3D 03 00 00 00           CMP   EAX,3
   CODE32:00064C   0F 84 2F 0E 00           JE    NEAR PTR   L50
                   00                                                         
   CODE32:000652   E9 37 0F 00 00           JMP   NEAR PTR   L8
                                  L20055:
   CODE32:000657   3D 28 00 00 00           CMP   EAX,40
   CODE32:00065C   0F 84 2C 0F 00           JE    NEAR PTR   L8
                   00                                                         
   CODE32:000662   E9 27 0F 00 00           JMP   NEAR PTR   L8
C****************************************************************************
C   403:        { 
C   404:         
C   405:        case -1:    // ---------------------------------------
C +       ----------- 
C   406:                    //----- Startpositionen lesen, Sollwertvor
C +       gabe ------ 
C   407:                    //----------------------------------------
C +       -----------						 
C   408:                    //   Memoryflag=IBF_Allgemein.IBF_Allgemei
C +       n.Profilflag;   //für Pausenfunktion 
C   409:   
C   410:                    /* Geschwindigkeiten  */ 
C   411:                    Soll_IBF->RS_V  = 0.0F; 
C****************************************************************************
                                  L10:

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 62

     Interleaved Listing

   CODE32:000667   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:00066A   B8 00 00 00 00           MOV   EAX,0
   CODE32:00066F   26 89 41 22              MOV   ES:DWORD PTR [ECX+34],EAX
C****************************************************************************
C   412:                    Soll_IBF->ASO_V = 0.0F;  
C****************************************************************************
   CODE32:000673   B8 00 00 00 00           MOV   EAX,0
   CODE32:000678   26 89 41 26              MOV   ES:DWORD PTR [ECX+38],EAX
C****************************************************************************
C   413:                    Soll_IBF->Soll_ASU_V = 0.0F; 
C****************************************************************************
   CODE32:00067C   B8 00 00 00 00           MOV   EAX,0
   CODE32:000681   26 89 81 86 00           MOV   ES:DWORD PTR [ECX+134],EAX
                   00 00                                                      
C****************************************************************************
C   414:                    Soll_IBF->AG_V  = 0.0F; 
C****************************************************************************
   CODE32:000688   B8 00 00 00 00           MOV   EAX,0
   CODE32:00068D   26 89 41 2A              MOV   ES:DWORD PTR [ECX+42],EAX
C****************************************************************************
C   415:                    Soll_IBF->Soll_ZAL_V = 0.0F; 
C****************************************************************************
   CODE32:000691   B8 00 00 00 00           MOV   EAX,0
   CODE32:000696   26 89 41 32              MOV   ES:DWORD PTR [ECX+50],EAX
C****************************************************************************
C   416:                    Soll_IBF->Soll_ZAR_V = 0.0F; 
C****************************************************************************
   CODE32:00069A   B8 00 00 00 00           MOV   EAX,0
   CODE32:00069F   26 89 41 2E              MOV   ES:DWORD PTR [ECX+46],EAX
C****************************************************************************
C   417:   
C   418:                    /* Kräfte */ 
C   419:                    Soll_IBF->RS_Kraft = Ist_IBF->Flag.rs_kraf
C +       tregler_aktiv ? Ist_IBF->RS_Kraft_Vorgabe : 100000.0F ;  
C****************************************************************************
   CODE32:0006A3   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:0006A6   26 83 79 53 00           CMP   ES:DWORD PTR [ECX+83],0
   CODE32:0006AB   74 0A                    JE    NEAR PTR   L20009
   CODE32:0006AD   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:0006B1   64 D9 43 6F              FLD   FS:DWORD PTR [EBX+111]
   CODE32:0006B5   EB 07                    JMP   NEAR PTR   L20010
                                  L20009:
   CODE32:0006B7   2E D9 05 00 00           FLD   CS:DWORD PTR L20008
                   00 00R                                                     
                                  L20010:
   CODE32:0006BE   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:0006C1   26 D9 59 06              FSTP  ES:DWORD PTR [ECX+6]
C****************************************************************************
C   420:                    Soll_IBF->AS_Kraft = Ist_IBF->Flag.as_kraf
C +       tregler_aktiv ? Ist_IBF->AS_Kraft_Vorgabe :  80000.0F ;  
C****************************************************************************
   CODE32:0006C5   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:0006C8   26 83 79 57 00           CMP   ES:DWORD PTR [ECX+87],0
   CODE32:0006CD   74 0A                    JE    NEAR PTR   L20012
   CODE32:0006CF   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 63

     Interleaved Listing

   CODE32:0006D3   64 D9 43 73              FLD   FS:DWORD PTR [EBX+115]
   CODE32:0006D7   EB 07                    JMP   NEAR PTR   L20013
                                  L20012:
   CODE32:0006D9   2E D9 05 00 00           FLD   CS:DWORD PTR L20011
                   00 00R                                                     
                                  L20013:
   CODE32:0006E0   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:0006E3   26 D9 59 0A              FSTP  ES:DWORD PTR [ECX+10]
C****************************************************************************
C   421:                    Soll_IBF->AG_Kraft = Ist_IBF->Flag.ag_kraf
C +       tregler_aktiv ? Ist_IBF->AG_Kraft_Vorgabe :  10000.0F ;  
C****************************************************************************
   CODE32:0006E7   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:0006EA   26 83 79 5B 00           CMP   ES:DWORD PTR [ECX+91],0
   CODE32:0006EF   74 0A                    JE    NEAR PTR   L20015
   CODE32:0006F1   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:0006F5   64 D9 43 77              FLD   FS:DWORD PTR [EBX+119]
   CODE32:0006F9   EB 07                    JMP   NEAR PTR   L20016
                                  L20015:
   CODE32:0006FB   2E D9 05 00 00           FLD   CS:DWORD PTR L20014
                   00 00R                                                     
                                  L20016:
   CODE32:000702   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000705   26 D9 59 0E              FSTP  ES:DWORD PTR [ECX+14]
C****************************************************************************
C   422:                    //Soll_IBF->ZAR_Kraft = Ist_IBF.Flag.zal_k
C +       raftregler_aktiv ? Ist_IBF->ZAL_Kraft_Vorgabe :  10000.0F ;
C +        
C   423:                    //Soll_IBF->ZAL_Kraft = Ist_IBF.Flag.zar_k
C +       raftregler_aktiv ? Ist_IBF->ZAR_Kraft_Vorgabe :  10000.0F ;
C +        
C   424:                 
C   425:                   
C   426:                    /* Drehzahl */ 
C   427:                    Soll_Inter->kwo_n    = kw_ia/hw_ir * (diam
C +       _hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AGR + Ist_IBF->
C +       Pos_auf_Mantel)*sin_kw_winkel_halbe); 
C****************************************************************************
   CODE32:000709   D9 85 8C 00 00           FLD   DWORD PTR [EBP+140]
                   00                                                         
   CODE32:00070F   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:000716   64 D8 0B                 FMUL  FS:DWORD PTR [EBX]
   CODE32:000719   2E D9 05 00 00           FLD   CS:DWORD PTR L20005
                   00 00R                                                     
   CODE32:000720   DE F9                    FDIVR                             
   CODE32:000722   64 D9 43 08              FLD   FS:DWORD PTR [EBX+8]
   CODE32:000726   0F B5 95 34 03           LGS   EDX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:00072D   65 D8 7A 0C              FDIVR GS:DWORD PTR [EDX+12]
   CODE32:000731   DE C9                    FMUL                              
   CODE32:000733   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000737   64 D9 83 AB 00           FLD   FS:DWORD PTR [EBX+171]
                   00 00                                                      
   CODE32:00073E   0F B5 55 18              LGS   EDX,PWORD PTR [EBP+24]

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 64

     Interleaved Listing

   CODE32:000742   65 D8 82 A7 00           FADD  GS:DWORD PTR [EDX+167]
                   00 00                                                      
   CODE32:000749   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:000750   64 D9 43 10              FLD   FS:DWORD PTR [EBX+16]
   CODE32:000754   DE C9                    FMUL                              
   CODE32:000756   DE F9                    FDIVR                             
   CODE32:000758   C4 4D 10                 LES   ECX,PWORD PTR [EBP+16]
   CODE32:00075B   26 D9 59 34              FSTP  ES:DWORD PTR [ECX+52]
C****************************************************************************
C   428:                    Soll_Inter->kwu_n    = kw_ia/hw_ir * (diam
C +       _hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AGR + Ist_IBF->
C +       Pos_auf_Mantel)*sin_kw_winkel_halbe);
C +       	 
C****************************************************************************
   CODE32:00075F   D9 85 8C 00 00           FLD   DWORD PTR [EBP+140]
                   00                                                         
   CODE32:000765   64 D8 0B                 FMUL  FS:DWORD PTR [EBX]
   CODE32:000768   2E D9 05 00 00           FLD   CS:DWORD PTR L20005
                   00 00R                                                     
   CODE32:00076F   DE F9                    FDIVR                             
   CODE32:000771   64 D9 43 08              FLD   FS:DWORD PTR [EBX+8]
   CODE32:000775   0F B5 95 34 03           LGS   EDX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:00077C   65 D8 7A 0C              FDIVR GS:DWORD PTR [EDX+12]
   CODE32:000780   DE C9                    FMUL                              
   CODE32:000782   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000786   64 D9 83 AB 00           FLD   FS:DWORD PTR [EBX+171]
                   00 00                                                      
   CODE32:00078D   0F B5 55 18              LGS   EDX,PWORD PTR [EBP+24]
   CODE32:000791   65 D8 82 A7 00           FADD  GS:DWORD PTR [EDX+167]
                   00 00                                                      
   CODE32:000798   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:00079F   64 D9 43 10              FLD   FS:DWORD PTR [EBX+16]
   CODE32:0007A3   DE C9                    FMUL                              
   CODE32:0007A5   DE F9                    FDIVR                             
   CODE32:0007A7   26 D9 59 38              FSTP  ES:DWORD PTR [ECX+56]
C****************************************************************************
C   429:                    
C   430:                    /* Position */ 
C   431:                    Soll_IBF->RS_Pos_Start = Ist_IBF->RS_Pos;
C +             // wird in case '3' -> hier Auffahren benötigt 
C****************************************************************************
   CODE32:0007AB   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:0007AF   64 D9 43 1F              FLD   FS:DWORD PTR [EBX+31]
   CODE32:0007B3   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:0007B6   26 D9 59 3A              FSTP  ES:DWORD PTR [ECX+58]
C****************************************************************************
C   432:                     
C   433:                    Soll_IBF->AG_Pos  = Soll_IBF->AG_Pos_Start
C +        = Ist_IBF->AG_Pos; // AG_Pos == auslesen der Werte aus PA-K
C +       arte inkl. Offset
C +        
C****************************************************************************

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 65

     Interleaved Listing

   CODE32:0007BA   64 D9 43 23              FLD   FS:DWORD PTR [EBX+35]
   CODE32:0007BE   26 D9 51 52              FST   ES:DWORD PTR [ECX+82]
   CODE32:0007C2   26 D9 59 1A              FSTP  ES:DWORD PTR [ECX+26]
C****************************************************************************
C   434:                     
C   435:                     
C   436:                    //----------------------------------------
C +       ----------------------------------------- 
C   437:                    //------------Vorgabe für Startposition de
C +       s Radialschlitten------------------------ 
C   438:                    //----------------------------------------
C +       ----------------------------------------- 
C   439:                     
C   440:                     
C   441:                    //Soll_IBF->RS_Pos_Null = (diam_hw + Ist_I
C +       BF->Werkzeugdurchmesser)/2 + Ist_IBF->Wandstaerke_Null;  //
C +       Nullpunkt des Radialschlittens als Abstand zwischen Hauptwal
C +       zedurchmesser, Wandstärke und Dornwalzendurchmesser  
C   442:                    Soll_IBF->RS_Pos_Null = Ist_IBF->Vorring.W
C +       andstaerke_Null;          /* Nullpkt. Radialschlitten entspr
C +       echend vorgegeber Wandstärke   [mm] */ 
C****************************************************************************
   CODE32:0007C6   64 D9 83 8F 00           FLD   FS:DWORD PTR [EBX+143]
                   00 00                                                      
   CODE32:0007CD   26 D9 59 36              FSTP  ES:DWORD PTR [ECX+54]
C****************************************************************************
C   443:   
C   444:                    Soll_IBF->RS_Pos = Soll_IBF->RS_Pos_Null;
C +       // definiert für RS_Pos in case 'a'   
C****************************************************************************
   CODE32:0007D1   0F B4 5D 08              LFS   EBX,PWORD PTR [EBP+8]
   CODE32:0007D5   64 D9 43 36              FLD   FS:DWORD PTR [EBX+54]
   CODE32:0007D9   26 D9 59 12              FSTP  ES:DWORD PTR [ECX+18]
C****************************************************************************
C   445:                     
C   446:                    //----------------------------------------
C +       ----------------------------------------- 
C   447:                    //------------Vorgabe für Startposition de
C +       r Axialschlitten ------------------------ 
C   448:                    //----------------------------------------
C +       ----------------------------------------- 
C   449:                     
C   450:                    Soll_IBF->AG_Pos_Null = Ist_IBF->AG_Pos;  
C****************************************************************************
   CODE32:0007DD   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:0007E1   64 D9 43 23              FLD   FS:DWORD PTR [EBX+35]
   CODE32:0007E5   26 D9 59 4E              FSTP  ES:DWORD PTR [ECX+78]
C****************************************************************************
C   451:                     
C   452:  
C +          
C   453:                    //----------------------------------------
C +       ---------------------------------------- 
C   454:                    //------------Vorgaben für oberen Axialsch
C +       litten---------------------------------- 

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 66

     Interleaved Listing

C   455:                    //----------------------------------------
C +       ---------------------------------------- 
C   456:                     
C   457:                     
C   458:                    Soll_IBF->ASO_Pos_Null = Ist_IBF->Vorring.
C +       Start_Ringhoehe + 15.0F; 	/* Vorgabe der Ringhöhe, die
C +       in CARWIN vorgegeben wird */ 
C****************************************************************************
   CODE32:0007E9   2E D9 05 00 00           FLD   CS:DWORD PTR L20017
                   00 00R                                                     
   CODE32:0007F0   64 D8 83 93 00           FADD  FS:DWORD PTR [EBX+147]
                   00 00                                                      
   CODE32:0007F7   26 D9 59 46              FSTP  ES:DWORD PTR [ECX+70]
C****************************************************************************
C   459:                    Soll_IBF->ASO_Pos_Start = Soll_IBF->ASO_Po
C +       s_Null;						 
C****************************************************************************
   CODE32:0007FB   0F B4 5D 08              LFS   EBX,PWORD PTR [EBP+8]
   CODE32:0007FF   64 D9 43 46              FLD   FS:DWORD PTR [EBX+70]
   CODE32:000803   26 D9 59 4A              FSTP  ES:DWORD PTR [ECX+74]
C****************************************************************************
C   460:                     
C   461:   
C   462:                    #if (FALSE) 
C   463:                    _settextposition(28,1); 
C   464:                    printf("case -1"); 
C   465:                    #endif    
C   466:                    t_Halte= 50; //t_Halte = 10*2*diam_f/(diam
C +       _hw*f_H); // Haltezeit entspricht 1 Ringumdrehung, nötig als
C +        Kriterium bei Kraftanfahrposition  
C****************************************************************************
   CODE32:000807   B8 00 00 48 42           MOV   EAX,1112014848
   CODE32:00080C   89 45 FC                 MOV   DWORD PTR [EBP-4],EAX
C****************************************************************************
C   467:                    Soll_IBF->Profilflag = 0; 
C   468:                  
C   469:                    break; //case -1 
C****************************************************************************
   CODE32:00080F   26 C7 01 00 00           MOV   ES:DWORD PTR [ECX],0
                   00 00                                                      
   CODE32:000816   E9 73 0D 00 00           JMP   NEAR PTR   L8
C****************************************************************************
C   470:      
C   471:      
C   472:     case 0:     //-------------------------------------------
C +       --------------------- 
C   473:                 //----------------Routine für Startposition--
C +       --------------------- 
C   474:                 //-------------------------------------------
C +       --------------------- 
C   475:                 //Memoryflag=IBF_Allgemein.IBF_Allgemein.Prof
C +       ilflag;						//für
C +        Pausefunktion 
C   476:             
C   477:                 switch (Ist_IBF->InitAchse)  

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 67

     Interleaved Listing

C****************************************************************************
                                  L11:
   CODE32:00081B   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:00081E   26 0F BE 41 0D           MOVSX EAX,ES:BYTE PTR [ECX+13]
   CODE32:000823   3D 64 00 00 00           CMP   EAX,100
   CODE32:000828   7F 2A                    JG    NEAR PTR   L20045
   CODE32:00082A   0F 84 15 06 00           JE    NEAR PTR   L27
                   00                                                         
   CODE32:000830   2D 61 00 00 00           SUB   EAX,97
   CODE32:000835   3D 02 00 00 00           CMP   EAX,2
   CODE32:00083A   0F 87 4E 0D 00           JA    NEAR PTR   L8
                   00                                                         
   CODE32:000840   2E FF 24 85 00           JMP   CS:WORD PTR L20046[EAX*4]
                   00 00 00R                                                  
                                  L20046:
   CODE32:000848   00 00 00 00R             DD    L19
   CODE32:00084C   00 00 00 00R             DD    L25
   CODE32:000850   00 00 00 00R             DD    L26
                                  L20045:
   CODE32:000854   2D 76 00 00 00           SUB   EAX,118
   CODE32:000859   3D 04 00 00 00           CMP   EAX,4
   CODE32:00085E   0F 87 2A 0D 00           JA    NEAR PTR   L8
                   00                                                         
   CODE32:000864   2E FF 24 85 00           JMP   CS:WORD PTR L20047[EAX*4]
                   00 00 00R                                                  
                                  L20047:
   CODE32:00086C   00 00 00 00R             DD    L13
   CODE32:000870   00 00 00 00R             DD    L16
   CODE32:000874   00 00 00 00R             DD    L8
   CODE32:000878   00 00 00 00R             DD    L8
   CODE32:00087C   00 00 00 00R             DD    L33
C****************************************************************************
C   478:                    { 
C   479:                     
C   480:                      // Programmexample for IFM 2006 
C   481:                      //Spezieller Programmcode zur Verifikati
C +       on einer Dornbewegung 
C   482:                      // Ausgangswandicke entspricht der Carwi
C +       nwanddicke, Diese soll um 100 mm reduziert werden mit v=2.0
C +       mm/s und anschließend wieder zurücke auf Ausgangswanddicke
C +                      
C   483:   
C   484:                      //!!!ACHTUNG!!! in Datei rwth_task.cpp m
C +       uss die Initialisierung wieder geändert werden, wenn richtig
C +        gewalzt werden soll 
C   485:   
C   486:                  case 'v': 
C   487:                               Soll_IBF->RS_V = 2.0F; 
C****************************************************************************
                                  L13:
   CODE32:000880   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000883   B8 00 00 00 40           MOV   EAX,1073741824
   CODE32:000888   26 89 41 22              MOV   ES:DWORD PTR [ECX+34],EAX
C****************************************************************************
C   488:                               Soll_IBF->AG_V  = 0.0F; 

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 68

     Interleaved Listing

C****************************************************************************
   CODE32:00088C   B8 00 00 00 00           MOV   EAX,0
   CODE32:000891   26 89 41 2A              MOV   ES:DWORD PTR [ECX+42],EAX
C****************************************************************************
C   489:                               Soll_IBF->ASO_V = 2.0F;  
C****************************************************************************
   CODE32:000895   B8 00 00 00 40           MOV   EAX,1073741824
   CODE32:00089A   26 89 41 26              MOV   ES:DWORD PTR [ECX+38],EAX
C****************************************************************************
C   490:                               Soll_IBF->Soll_ASU_V = 0.0F; 
C****************************************************************************
   CODE32:00089E   B8 00 00 00 00           MOV   EAX,0
   CODE32:0008A3   26 89 81 86 00           MOV   ES:DWORD PTR [ECX+134],EAX
                   00 00                                                      
C****************************************************************************
C   491:                                   
C   492:                                
C   493:                                                          
C   494:                               //Überprüfen, ob Dornposition e
C +       rreicht ist Soll_IBF->RS_Pos_Null 
C   495:                              if(Ist_IBF->RS_Pos <= Soll_IBF->
C +       RS_Pos + 1.0F) // Ab hier wird Radialschlitten positionieren
C +        
C   496:                                 { 
C****************************************************************************
   CODE32:0008AA   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:0008AE   2E D9 05 00 00           FLD   CS:DWORD PTR L20004
                   00 00R                                                     
   CODE32:0008B5   26 D8 41 12              FADD  ES:DWORD PTR [ECX+18]
   CODE32:0008B9   64 D8 5B 1F              FCOMP FS:DWORD PTR [EBX+31]
   CODE32:0008BD   DF E0                    FNSTSW AX                         
   CODE32:0008BF   9E                       SAHF                              
   CODE32:0008C0   0F 82 C8 0C 00           JB    NEAR PTR   L8
                   00                                                         
C****************************************************************************
C   497:                                    Soll_IBF->RS_Pos = Ist_IBF
C +       ->RS_Pos - 100.0f;                                  
C****************************************************************************
   CODE32:0008C6   2E D9 05 00 00           FLD   CS:DWORD PTR L20019
                   00 00R                                                     
   CODE32:0008CD   64 D8 6B 1F              FSUBR FS:DWORD PTR [EBX+31]
   CODE32:0008D1   26 D9 59 12              FSTP  ES:DWORD PTR [ECX+18]
C****************************************************************************
C   498:                                    Soll_IBF->ASO_Pos = Soll_I
C +       BF->ASO_Pos_Null - 40.0F;                                   
C****************************************************************************
   CODE32:0008D5   2E D9 05 00 00           FLD   CS:DWORD PTR L20020
                   00 00R                                                     
   CODE32:0008DC   0F B4 5D 08              LFS   EBX,PWORD PTR [EBP+8]
   CODE32:0008E0   64 D8 6B 46              FSUBR FS:DWORD PTR [EBX+70]
   CODE32:0008E4   26 D9 59 16              FSTP  ES:DWORD PTR [ECX+22]
C****************************************************************************
C   499:                                    Soll_IBF->InitAchse = 'w';
C +        
C   500:                                    break; 

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 69

     Interleaved Listing

C****************************************************************************
   CODE32:0008E8   26 C6 41 04 77           MOV   ES:BYTE PTR [ECX+4],119
   CODE32:0008ED   E9 9C 0C 00 00           JMP   NEAR PTR   L8
C****************************************************************************
C   501:                                 } 
C   502:                              break; 
C   503:   
C   504:         
C   505:                    case 'w':  
C   506:                               Soll_IBF->RS_V         = 0.95F;
C +        
C****************************************************************************
                                  L16:
   CODE32:0008F2   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:0008F5   B8 33 33 73 3F           MOV   EAX,1064514355
   CODE32:0008FA   26 89 41 22              MOV   ES:DWORD PTR [ECX+34],EAX
C****************************************************************************
C   507:                               Soll_IBF->AG_V         = 0.0F; 
C****************************************************************************
   CODE32:0008FE   B8 00 00 00 00           MOV   EAX,0
   CODE32:000903   26 89 41 2A              MOV   ES:DWORD PTR [ECX+42],EAX
C****************************************************************************
C   508:                               Soll_IBF->ASO_V        = 0.75F;
C +         
C****************************************************************************
   CODE32:000907   B8 00 00 40 3F           MOV   EAX,1061158912
   CODE32:00090C   26 89 41 26              MOV   ES:DWORD PTR [ECX+38],EAX
C****************************************************************************
C   509:                               Soll_IBF->Soll_ASU_V   = 0.0F; 
C****************************************************************************
   CODE32:000910   B8 00 00 00 00           MOV   EAX,0
   CODE32:000915   26 89 81 86 00           MOV   ES:DWORD PTR [ECX+134],EAX
                   00 00                                                      
C****************************************************************************
C   510:                                   
C   511:                               // test: Werte befinden sich je
C +       tz in den if-Anweisungen Soll_Inter->rs_v = Soll_RS_V;
C +          
C   512:                              
C   513:                                                      
C   514:                               Soll_Inter->kwo_n = 0.5F*kw_ia/
C +       hw_ir * (diam_hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AG
C +       R + Ist_IBF->Pos_auf_Mantel)*sin_kw_winkel_halbe); 
C****************************************************************************
   CODE32:00091C   D9 85 8C 00 00           FLD   DWORD PTR [EBP+140]
                   00                                                         
   CODE32:000922   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:000929   64 D8 0B                 FMUL  FS:DWORD PTR [EBX]
   CODE32:00092C   2E D9 05 00 00           FLD   CS:DWORD PTR L20005
                   00 00R                                                     
   CODE32:000933   DE F9                    FDIVR                             
   CODE32:000935   2E D9 05 00 00           FLD   CS:DWORD PTR L20003
                   00 00R                                                     
   CODE32:00093C   64 D8 4B 0C              FMUL  FS:DWORD PTR [EBX+12]

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 70

     Interleaved Listing

   CODE32:000940   64 D9 43 08              FLD   FS:DWORD PTR [EBX+8]
   CODE32:000944   DE F9                    FDIVR                             
   CODE32:000946   DE C9                    FMUL                              
   CODE32:000948   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:00094C   64 D9 83 AB 00           FLD   FS:DWORD PTR [EBX+171]
                   00 00                                                      
   CODE32:000953   0F B5 55 18              LGS   EDX,PWORD PTR [EBP+24]
   CODE32:000957   65 D8 82 A7 00           FADD  GS:DWORD PTR [EDX+167]
                   00 00                                                      
   CODE32:00095E   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:000965   64 D9 43 10              FLD   FS:DWORD PTR [EBX+16]
   CODE32:000969   DE C9                    FMUL                              
   CODE32:00096B   DE F9                    FDIVR                             
   CODE32:00096D   C4 4D 10                 LES   ECX,PWORD PTR [EBP+16]
   CODE32:000970   26 D9 59 34              FSTP  ES:DWORD PTR [ECX+52]
C****************************************************************************
C   515:                               Soll_Inter->kwu_n = 0.5F*kw_ia/
C +       hw_ir * (diam_hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AG
C +       R + Ist_IBF->Pos_auf_Mantel)*sin_kw_winkel_halbe);
C +            			 
C****************************************************************************
   CODE32:000974   D9 85 8C 00 00           FLD   DWORD PTR [EBP+140]
                   00                                                         
   CODE32:00097A   64 D8 0B                 FMUL  FS:DWORD PTR [EBX]
   CODE32:00097D   2E D9 05 00 00           FLD   CS:DWORD PTR L20005
                   00 00R                                                     
   CODE32:000984   DE F9                    FDIVR                             
   CODE32:000986   2E D9 05 00 00           FLD   CS:DWORD PTR L20003
                   00 00R                                                     
   CODE32:00098D   64 D8 4B 0C              FMUL  FS:DWORD PTR [EBX+12]
   CODE32:000991   64 D9 43 08              FLD   FS:DWORD PTR [EBX+8]
   CODE32:000995   DE F9                    FDIVR                             
   CODE32:000997   DE C9                    FMUL                              
   CODE32:000999   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:00099D   64 D9 83 AB 00           FLD   FS:DWORD PTR [EBX+171]
                   00 00                                                      
   CODE32:0009A4   65 D8 82 A7 00           FADD  GS:DWORD PTR [EDX+167]
                   00 00                                                      
   CODE32:0009AB   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:0009B2   64 D9 43 10              FLD   FS:DWORD PTR [EBX+16]
   CODE32:0009B6   DE C9                    FMUL                              
   CODE32:0009B8   DE F9                    FDIVR                             
   CODE32:0009BA   26 D9 59 38              FSTP  ES:DWORD PTR [ECX+56]
C****************************************************************************
C   516:                               
C   517:                               if(Ist_IBF->RS_Pos <= Soll_IBF-
C +       >RS_Pos) // Ab hier wird Radialschlitten positionieren 
C   518:                                 { 
C****************************************************************************
   CODE32:0009BE   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:0009C2   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:0009C5   26 D9 41 12              FLD   ES:DWORD PTR [ECX+18]
   CODE32:0009C9   64 D8 5B 1F              FCOMP FS:DWORD PTR [EBX+31]

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 71

     Interleaved Listing

   CODE32:0009CD   DF E0                    FNSTSW AX                         
   CODE32:0009CF   9E                       SAHF                              
   CODE32:0009D0   0F 82 B8 0B 00           JB    NEAR PTR   L8
                   00                                                         
C****************************************************************************
C   519:                                    Soll_IBF->RS_Pos = Soll_IB
C +       F->RS_Pos_Null; 
C****************************************************************************
   CODE32:0009D6   0F B4 5D 08              LFS   EBX,PWORD PTR [EBP+8]
   CODE32:0009DA   64 D9 43 36              FLD   FS:DWORD PTR [EBX+54]
C****************************************************************************
C   520:                                   //Soll_IBF->Soll_RS_V = 0.5
C +       F; 
C   521:                                   //     Soll_IBF->InitAchse
C +       = 'b1'; 
C   522:                                    break; 
C****************************************************************************
   CODE32:0009DE   26 D9 59 12              FSTP  ES:DWORD PTR [ECX+18]
   CODE32:0009E2   E9 A7 0B 00 00           JMP   NEAR PTR   L8
C****************************************************************************
C   523:                                 } 
C   524:                                                       
C   525:     
C   526:   
C   527:                               break; 
C   528:   
C   529:   
C   530:   
C   531:                      case 'a':  /* Positionieren des Radialsc
C +       hlittens */	 
C   532:                                 
C   533:                               if(FALSE) 
C   534:                               { 
C****************************************************************************
                                  L19:
C****************************************************************************
C   535:                               #ifdef MRAW 
C   536:                                   _settextposition(10,1); pri
C +       ntf("MAPW: RS_Pos %8.1f  Soll_RS_Pos %8.1f RS_Pos_Null%8.1f,
C +        gefilterter %8.1f", Ist_IBF->RS_Pos, Soll_IBF->RS_Pos, Ist_
C +       IBF->RS_Pos_Null, diam_f);
C +       					 
C   537:                                   _settextposition(13,1); pri
C +       ntf("Dorn%8.1f, Hauptwalze%8.1f, t_Halte%8.1f",diam_dw, diam
C +       _hw, t_Halte); 
C   538:                               #endif 
C   539:                               } 
C   540:                
C   541:                               
C   542:                              /* Geschwindigkeiten  */ 
C   543:                               //Soll_IBF->RS_V       = s. Kla
C +       mmer 
C   544:                               Soll_IBF->ASO_V        = 5.0F;
C +        
C****************************************************************************

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 72

     Interleaved Listing

   CODE32:0009E7   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:0009EA   B8 00 00 A0 40           MOV   EAX,1084227584
   CODE32:0009EF   26 89 41 26              MOV   ES:DWORD PTR [ECX+38],EAX
C****************************************************************************
C   545:                               Soll_IBF->Soll_ASU_V   = 0.0F; 
C****************************************************************************
   CODE32:0009F3   B8 00 00 00 00           MOV   EAX,0
   CODE32:0009F8   26 89 81 86 00           MOV   ES:DWORD PTR [ECX+134],EAX
                   00 00                                                      
C****************************************************************************
C   546:                               Soll_IBF->AG_V         = 0.0F; 
C****************************************************************************
   CODE32:0009FF   B8 00 00 00 00           MOV   EAX,0
   CODE32:000A04   26 89 41 2A              MOV   ES:DWORD PTR [ECX+42],EAX
C****************************************************************************
C   547:                               Soll_IBF->Soll_ZAL_V   = 0.0F; 
C****************************************************************************
   CODE32:000A08   B8 00 00 00 00           MOV   EAX,0
   CODE32:000A0D   26 89 41 32              MOV   ES:DWORD PTR [ECX+50],EAX
C****************************************************************************
C   548:                               Soll_IBF->Soll_ZAR_V   = 0.0F; 
C****************************************************************************
   CODE32:000A11   B8 00 00 00 00           MOV   EAX,0
   CODE32:000A16   26 89 41 2E              MOV   ES:DWORD PTR [ECX+46],EAX
C****************************************************************************
C   549:   
C   550:                               /* Kräfte */ 
C   551:                               //Soll_IBF->RS_Kraft = Ist_IBF-
C +       >Flag.rs_kraftregler_aktiv ? Ist_IBF->RS_Kraft_Vorgabe : 100
C +       000.0F ;  
C   552:                               Soll_IBF->AS_Kraft = Ist_IBF->F
C +       lag.as_kraftregler_aktiv ? Ist_IBF->AS_Kraft_Vorgabe :  8000
C +       0.0F ;  
C****************************************************************************
   CODE32:000A1A   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:000A1D   26 83 79 57 00           CMP   ES:DWORD PTR [ECX+87],0
   CODE32:000A22   74 0A                    JE    NEAR PTR   L20021
   CODE32:000A24   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000A28   64 D9 43 73              FLD   FS:DWORD PTR [EBX+115]
   CODE32:000A2C   EB 07                    JMP   NEAR PTR   L20022
                                  L20021:
   CODE32:000A2E   2E D9 05 00 00           FLD   CS:DWORD PTR L20011
                   00 00R                                                     
                                  L20022:
   CODE32:000A35   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000A38   26 D9 59 0A              FSTP  ES:DWORD PTR [ECX+10]
C****************************************************************************
C   553:                               Soll_IBF->AG_Kraft = Ist_IBF->F
C +       lag.ag_kraftregler_aktiv ? Ist_IBF->AG_Kraft_Vorgabe :  1000
C +       0.0F ;  
C****************************************************************************
   CODE32:000A3C   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:000A3F   26 83 79 5B 00           CMP   ES:DWORD PTR [ECX+91],0
   CODE32:000A44   74 0A                    JE    NEAR PTR   L20023
   CODE32:000A46   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 73

     Interleaved Listing

   CODE32:000A4A   64 D9 43 77              FLD   FS:DWORD PTR [EBX+119]
   CODE32:000A4E   EB 07                    JMP   NEAR PTR   L20024
                                  L20023:
   CODE32:000A50   2E D9 05 00 00           FLD   CS:DWORD PTR L20014
                   00 00R                                                     
                                  L20024:
   CODE32:000A57   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000A5A   26 D9 59 0E              FSTP  ES:DWORD PTR [ECX+14]
C****************************************************************************
C   554:                               //Soll_IBF->ZAR_Kraft = Ist_IBF
C +       .Flag.zal_kraftregler_aktiv ? Ist_IBF->ZAL_Kraft_Vorgabe :
C +       10000.0F ;  
C   555:                               //Soll_IBF->ZAL_Kraft = Ist_IBF
C +       .Flag.zar_kraftregler_aktiv ? Ist_IBF->ZAR_Kraft_Vorgabe :
C +       10000.0F ; 
C   556:                                   
C   557:                               /* Drehzahl */ 
C   558:                               Soll_Inter->kwo_n = 0.5F*kw_ia/
C +       hw_ir * (diam_hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AG
C +       R + Ist_IBF->Pos_auf_Mantel)*sin_kw_winkel_halbe); 
C****************************************************************************
   CODE32:000A5E   D9 85 8C 00 00           FLD   DWORD PTR [EBP+140]
                   00                                                         
   CODE32:000A64   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:000A6B   64 D8 0B                 FMUL  FS:DWORD PTR [EBX]
   CODE32:000A6E   2E D9 05 00 00           FLD   CS:DWORD PTR L20005
                   00 00R                                                     
   CODE32:000A75   DE F9                    FDIVR                             
   CODE32:000A77   2E D9 05 00 00           FLD   CS:DWORD PTR L20003
                   00 00R                                                     
   CODE32:000A7E   64 D8 4B 0C              FMUL  FS:DWORD PTR [EBX+12]
   CODE32:000A82   64 D9 43 08              FLD   FS:DWORD PTR [EBX+8]
   CODE32:000A86   DE F9                    FDIVR                             
   CODE32:000A88   DE C9                    FMUL                              
   CODE32:000A8A   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000A8E   64 D9 83 AB 00           FLD   FS:DWORD PTR [EBX+171]
                   00 00                                                      
   CODE32:000A95   0F B5 55 18              LGS   EDX,PWORD PTR [EBP+24]
   CODE32:000A99   65 D8 82 A7 00           FADD  GS:DWORD PTR [EDX+167]
                   00 00                                                      
   CODE32:000AA0   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:000AA7   64 D9 43 10              FLD   FS:DWORD PTR [EBX+16]
   CODE32:000AAB   DE C9                    FMUL                              
   CODE32:000AAD   DE F9                    FDIVR                             
   CODE32:000AAF   C4 4D 10                 LES   ECX,PWORD PTR [EBP+16]
   CODE32:000AB2   26 D9 59 34              FSTP  ES:DWORD PTR [ECX+52]
C****************************************************************************
C   559:                               Soll_Inter->kwu_n = 0.5F*kw_ia/
C +       hw_ir * (diam_hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AG
C +       R + Ist_IBF->Pos_auf_Mantel)*sin_kw_winkel_halbe);
C +            			 
C****************************************************************************
   CODE32:000AB6   D9 85 8C 00 00           FLD   DWORD PTR [EBP+140]

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 74

     Interleaved Listing

                   00                                                         
   CODE32:000ABC   64 D8 0B                 FMUL  FS:DWORD PTR [EBX]
   CODE32:000ABF   2E D9 05 00 00           FLD   CS:DWORD PTR L20005
                   00 00R                                                     
   CODE32:000AC6   DE F9                    FDIVR                             
   CODE32:000AC8   2E D9 05 00 00           FLD   CS:DWORD PTR L20003
                   00 00R                                                     
   CODE32:000ACF   64 D8 4B 0C              FMUL  FS:DWORD PTR [EBX+12]
   CODE32:000AD3   64 D9 43 08              FLD   FS:DWORD PTR [EBX+8]
   CODE32:000AD7   DE F9                    FDIVR                             
   CODE32:000AD9   DE C9                    FMUL                              
   CODE32:000ADB   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000ADF   64 D9 83 AB 00           FLD   FS:DWORD PTR [EBX+171]
                   00 00                                                      
   CODE32:000AE6   65 D8 82 A7 00           FADD  GS:DWORD PTR [EDX+167]
                   00 00                                                      
   CODE32:000AED   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:000AF4   64 D9 43 10              FLD   FS:DWORD PTR [EBX+16]
   CODE32:000AF8   DE C9                    FMUL                              
   CODE32:000AFA   DE F9                    FDIVR                             
   CODE32:000AFC   26 D9 59 38              FSTP  ES:DWORD PTR [ECX+56]
C****************************************************************************
C   560:                             
C   561:                                 
C   562:                               //-----------------------------
C +       -------------------------------------------- 
C   563:                               //---------Anfahrroutine Dorn p
C +       er Kraftregelung----------------------------  
C   564:                               //-----------------------------
C +       -------------------------------------------- 
C   565:                               
C   566:                         if(Ist_IBF->Flag.rs_kraftanfahren_akt
C +       iv != 0) //Radialkraft!= 0.0F)	//aus IBF-Para(Radv01) vorgeg
C +       eben               	   
C   567:                          {  	 
C****************************************************************************
   CODE32:000B00   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:000B03   26 83 79 67 00           CMP   ES:DWORD PTR [ECX+103],0
   CODE32:000B08   74 7A                    JE    NEAR PTR   L20
C****************************************************************************
C   568:                                  /* Vorgaben: Kraft*/ 
C   569:   
C   570:                                  Ist_IBF->Flag.rs_kraftregler
C +       _aktiv = Ist_IBF->Flag.rs_kraftanfahren_aktiv; /* Schalter:
C +       Walzen mit Kraftsteuerung 'AN' */ 
C****************************************************************************
   CODE32:000B0A   26 8B 41 67              MOV   EAX,ES:DWORD PTR [ECX+103]
   CODE32:000B0E   26 89 41 53              MOV   ES:DWORD PTR [ECX+83],EAX
C****************************************************************************
C   571:                                  Soll_IBF->RS_Kraft = Ist_IBF
C +       ->Flag.rs_kraftregler_aktiv ? Ist_IBF->RS_Kraft_Anfahren : 1
C +       00000.0F ;  
C****************************************************************************
   CODE32:000B12   09 C0                    OR    EAX,EAX

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 75

     Interleaved Listing

   CODE32:000B14   74 0D                    JE    NEAR PTR   L20025
   CODE32:000B16   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000B1A   64 D9 83 83 00           FLD   FS:DWORD PTR [EBX+131]
                   00 00                                                      
   CODE32:000B21   EB 07                    JMP   NEAR PTR   L20026
                                  L20025:
   CODE32:000B23   2E D9 05 00 00           FLD   CS:DWORD PTR L20008
                   00 00R                                                     
                                  L20026:
   CODE32:000B2A   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000B2D   26 D9 59 06              FSTP  ES:DWORD PTR [ECX+6]
C****************************************************************************
C   572:                                   
C   573:                                  /* Vorgabe: Geschwindigkeit*
C +       / 
C   574:                                  Soll_IBF->RS_V  = 7.0F;
C +                      /* Dorn, Radialschlitten */ 
C****************************************************************************
   CODE32:000B31   B8 00 00 E0 40           MOV   EAX,1088421888
   CODE32:000B36   26 89 41 22              MOV   ES:DWORD PTR [ECX+34],EAX
C****************************************************************************
C   575:                                                          
C   576:                                  /* Vorgabe: Position */ 
C   577:                                  //Soll_IBF->RS_Pos = aus cas
C +       e -1  
C   578:                                  Soll_IBF->ASO_Pos = Ist_IBF-
C +       >Vorring.Start_Ringhoehe + 1.5F; //da Ring gerne klettert, w
C +       ird bereits hier ASO zugestellt 
C****************************************************************************
   CODE32:000B3A   2E D9 05 00 00           FLD   CS:DWORD PTR L20027
                   00 00R                                                     
   CODE32:000B41   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000B45   64 D8 83 93 00           FADD  FS:DWORD PTR [EBX+147]
                   00 00                                                      
   CODE32:000B4C   26 D9 59 16              FSTP  ES:DWORD PTR [ECX+22]
C****************************************************************************
C   579:  
C +       				 
C   580:                                   
C   581:                                //----------------------------
C +       ----------------------------------------------------- 
C   582:                                //   Routine um Radialschlitte
C +       n auf Kraft anzufahren       
C   583:                                //----------------------------
C +       ----------------------------------------------------- 
C   584:                           
C   585:                                  if ((Ist_IBF->FR) == (Ist_IB
C +       F->RS_Kraft_Vorgabe)) 
C   586:                                  { 
C****************************************************************************
   CODE32:000B50   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:000B53   26 D9 41 6F              FLD   ES:DWORD PTR [ECX+111]
   CODE32:000B57   64 D8 5B 0F              FCOMP FS:DWORD PTR [EBX+15]
   CODE32:000B5B   DF E0                    FNSTSW AX                         
   CODE32:000B5D   9E                       SAHF                              

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 76

     Interleaved Listing

   CODE32:000B5E   0F 85 2A 0A 00           JNE   NEAR PTR   L8
                   00                                                         
C****************************************************************************
C   587:                                     Soll_IBF->RS_Pos = Ist_IB
C +       F->RS_Pos; 
C****************************************************************************
   CODE32:000B64   64 D9 43 1F              FLD   FS:DWORD PTR [EBX+31]
   CODE32:000B68   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000B6B   26 D9 59 12              FSTP  ES:DWORD PTR [ECX+18]
C****************************************************************************
C   588:                                     Soll_IBF->InitAchse = 'b'
C +       ; 
C****************************************************************************
   CODE32:000B6F   26 C6 41 04 62           MOV   ES:BYTE PTR [ECX+4],98
C****************************************************************************
C   589:                                     zaehler=0.5F; 
C****************************************************************************
   CODE32:000B74   B8 00 00 00 3F           MOV   EAX,1056964608
   CODE32:000B79   89 45 E4                 MOV   DWORD PTR [EBP-28],EAX
C****************************************************************************
C   590:                                     t_Halte=100.0F;   //Zaehl
C +       er für Kraftanfahrt des Axialschlittens 
C****************************************************************************
   CODE32:000B7C   B8 00 00 C8 42           MOV   EAX,1120403456
C****************************************************************************
C   591:                                  } 
C   592:   
C   593:          
C   594:   
C   595:                          #ifdef MRAW 
C   596:                                  
C   597:                                 if (Ist_IBF->RS_Pos <= (Ist_I
C +       BF->RS_Pos_Null + eps) && t_Halte >= 30) 
C   598:                                  {  
C   599:                                     Soll_IBF->RS_Pos = Ist_IB
C +       F->RS_Pos_Null - n; 
C   600:                                     n= n + 0.01F; 
C   601:                                  } 
C   602:   
C   603:                                 if ((Ist_IBF->FR_f >= Radialk
C +       raft) && (Ist_IBF->RS_Pos <= Ist_IBF->RS_Pos_Null))  
C   604:                                 {  
C   605:                                       t_Halte--; 
C   606:                                       if (t_Halte == 0) 
C   607:                                       { 
C   608:                                         Soll_IBF->RS_Pos = Is
C +       t_IBF->RS_Pos; // erreicht 
C   609:                                         Soll_IBF->RS_V= 2.0F;
C +        
C   610:                            
C   611:                                         Soll_IBF->InitAchse =
C +        'b'; 
C   612:                                         zaehler=0.5F; 
C   613:                                         t_Halte=100.0F;   //z
C +       aehler für Kraftanfahrt des Axialschlittens 

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 77

     Interleaved Listing

C   614:                                       }  
C   615:                                       else break; 
C   616:                                 } // end if(FR_f >=...) 
C   617:                          #endif        
C   618:                                  
C   619:                              else   break;   	 
C****************************************************************************
   CODE32:000B81   89 45 FC                 MOV   DWORD PTR [EBP-4],EAX
                                  L20:
C****************************************************************************
C   620:                                   
C   621:                            }//end if(Radialkraft != NULL) 
C   622:                                         
C   623:                                            
C   624:                           if(Ist_IBF->Flag.rs_kraftanfahren_a
C +       ktiv == 0)	 
C   625:                             { 		 
C****************************************************************************
   CODE32:000B84   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:000B87   26 83 79 67 00           CMP   ES:DWORD PTR [ECX+103],0
   CODE32:000B8C   0F 85 FC 09 00           JNE   NEAR PTR   L8
                   00                                                         
C****************************************************************************
C   626:                               
C   627:                              /*Vorgabe: Kraft*/     
C   628:                              Soll_IBF->RS_Kraft = Ist_IBF->Fl
C +       ag.rs_kraftregler_aktiv ? Ist_IBF->RS_Kraft_Vorgabe : 100000
C +       .0F ;         
C****************************************************************************
   CODE32:000B92   26 83 79 53 00           CMP   ES:DWORD PTR [ECX+83],0
   CODE32:000B97   74 0A                    JE    NEAR PTR   L20028
   CODE32:000B99   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000B9D   64 D9 43 6F              FLD   FS:DWORD PTR [EBX+111]
   CODE32:000BA1   EB 07                    JMP   NEAR PTR   L20029
                                  L20028:
   CODE32:000BA3   2E D9 05 00 00           FLD   CS:DWORD PTR L20008
                   00 00R                                                     
                                  L20029:
   CODE32:000BAA   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000BAD   26 D9 59 06              FSTP  ES:DWORD PTR [ECX+6]
C****************************************************************************
C   629:                              Soll_IBF->RS_V  = 8.0F;
C +          // Dorn, Radialschlitten 
C****************************************************************************
   CODE32:000BB1   B8 00 00 00 41           MOV   EAX,1090519040
   CODE32:000BB6   26 89 41 22              MOV   ES:DWORD PTR [ECX+34],EAX
C****************************************************************************
C   630:                                                 
C   631:                                    Soll_IBF->RS_Pos = Soll_IB
C +       F->RS_Pos_Null; 
C****************************************************************************
   CODE32:000BBA   0F B4 5D 08              LFS   EBX,PWORD PTR [EBP+8]
   CODE32:000BBE   64 D9 43 36              FLD   FS:DWORD PTR [EBX+54]
   CODE32:000BC2   26 D9 59 12              FSTP  ES:DWORD PTR [ECX+18]
C****************************************************************************

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 78

     Interleaved Listing

C   632:                                    Soll_IBF->AG_Pos = Ist_IBF
C +       ->Vorring.Start_Ringhoehe + 1.5F; //da Ring gerne klettert,
C +       wird bereits hier ASO zugestellt.. 
C****************************************************************************
   CODE32:000BC6   2E D9 05 00 00           FLD   CS:DWORD PTR L20027
                   00 00R                                                     
   CODE32:000BCD   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000BD1   64 D8 83 93 00           FADD  FS:DWORD PTR [EBX+147]
                   00 00                                                      
   CODE32:000BD8   26 D9 59 1A              FSTP  ES:DWORD PTR [ECX+26]
C****************************************************************************
C   633:    
C   634:                                 if(Ist_IBF->RS_Pos <= Soll_IB
C +       F->RS_Pos) // Ab hier wird Radialschlitten positionieren 
C   635:                                 { 
C****************************************************************************
   CODE32:000BDC   26 D9 41 12              FLD   ES:DWORD PTR [ECX+18]
   CODE32:000BE0   64 D8 5B 1F              FCOMP FS:DWORD PTR [EBX+31]
   CODE32:000BE4   DF E0                    FNSTSW AX                         
   CODE32:000BE6   9E                       SAHF                              
   CODE32:000BE7   0F 82 A1 09 00           JB    NEAR PTR   L8
                   00                                                         
C****************************************************************************
C   636:                                    Soll_IBF->InitAchse = 'b';
C +        
C****************************************************************************
   CODE32:000BED   26 C6 41 04 62           MOV   ES:BYTE PTR [ECX+4],98
C****************************************************************************
C   637:                                    zaehler = 0.5F;
C +            //zaehler für Kraftsteuerung des Axialschlitten 
C****************************************************************************
   CODE32:000BF2   B8 00 00 00 3F           MOV   EAX,1056964608
   CODE32:000BF7   89 45 E4                 MOV   DWORD PTR [EBP-28],EAX
C****************************************************************************
C   638:                                 } 
C   639:   
C   640:                             break;    
C****************************************************************************
   CODE32:000BFA   E9 8F 09 00 00           JMP   NEAR PTR   L8
C****************************************************************************
C   641:                            }// end if(Radial== NULL)   
C   642:   
C   643:    
C   644:                                       
C   645:                            
C   646:                         
C   647:                          break; // zu case 'a' 
C   648:   
C   649:       
C   650:                    case 'b':   /*Positionsvorgabe:  Axialgerü
C +       st*/               				 
C   651:                                 
C   652:                               /* Geschwindigkeiten  */ 
C   653:                               Soll_IBF->RS_V         = 0.0F; 
C****************************************************************************

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 79

     Interleaved Listing

                                  L25:
   CODE32:000BFF   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000C02   B8 00 00 00 00           MOV   EAX,0
   CODE32:000C07   26 89 41 22              MOV   ES:DWORD PTR [ECX+34],EAX
C****************************************************************************
C   654:                               Soll_IBF->ASO_V        = 5.0F;
C +        
C****************************************************************************
   CODE32:000C0B   B8 00 00 A0 40           MOV   EAX,1084227584
   CODE32:000C10   26 89 41 26              MOV   ES:DWORD PTR [ECX+38],EAX
C****************************************************************************
C   655:                               //Soll_IBF->Soll_ASU_V   = 0.0F
C +       ; 
C   656:                               //Soll_IBF->AG_V         = 10.0
C +       F; 
C   657:                               //Soll_IBF->Soll_ZAL_V   = 0.0F
C +       ; 
C   658:                               //Soll_IBF->Soll_ZAR_V   = 0.0F
C +       ; 
C   659:   
C   660:                               /* Kräfte */ 
C   661:                               //Soll_IBF->RS_Kraft = Ist_IBF-
C +       >Flag.rs_kraftregler_aktiv ? Ist_IBF->RS_Kraft_Vorgabe : 100
C +       000.0F ;  
C   662:                               Soll_IBF->AS_Kraft = Ist_IBF->F
C +       lag.as_kraftregler_aktiv ? Ist_IBF->AS_Kraft_Vorgabe :  8000
C +       0.0F ;  
C****************************************************************************
   CODE32:000C14   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:000C17   26 83 79 57 00           CMP   ES:DWORD PTR [ECX+87],0
   CODE32:000C1C   74 0A                    JE    NEAR PTR   L20030
   CODE32:000C1E   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000C22   64 D9 43 73              FLD   FS:DWORD PTR [EBX+115]
   CODE32:000C26   EB 07                    JMP   NEAR PTR   L20031
                                  L20030:
   CODE32:000C28   2E D9 05 00 00           FLD   CS:DWORD PTR L20011
                   00 00R                                                     
                                  L20031:
   CODE32:000C2F   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000C32   26 D9 59 0A              FSTP  ES:DWORD PTR [ECX+10]
C****************************************************************************
C   663:                               Soll_IBF->AG_Kraft = Ist_IBF->F
C +       lag.ag_kraftregler_aktiv ? Ist_IBF->AG_Kraft_Vorgabe :  1000
C +       0.0F ;  
C****************************************************************************
   CODE32:000C36   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:000C39   26 83 79 5B 00           CMP   ES:DWORD PTR [ECX+91],0
   CODE32:000C3E   74 0A                    JE    NEAR PTR   L20032
   CODE32:000C40   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000C44   64 D9 43 77              FLD   FS:DWORD PTR [EBX+119]
   CODE32:000C48   EB 07                    JMP   NEAR PTR   L20033
                                  L20032:
   CODE32:000C4A   2E D9 05 00 00           FLD   CS:DWORD PTR L20014
                   00 00R                                                     
                                  L20033:

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 80

     Interleaved Listing

   CODE32:000C51   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000C54   26 D9 59 0E              FSTP  ES:DWORD PTR [ECX+14]
C****************************************************************************
C   664:                               //Soll_IBF->ZAR_Kraft = Ist_IBF
C +       .Flag.zal_kraftregler_aktiv ? Ist_IBF->ZAL_Kraft_Vorgabe :
C +       10000.0F ;  
C   665:                               //Soll_IBF->ZAL_Kraft = Ist_IBF
C +       .Flag.zar_kraftregler_aktiv ? Ist_IBF->ZAR_Kraft_Vorgabe :
C +       10000.0F ; 
C   666:                                   
C   667:                               /* Drehzahl */ 
C   668:                               Soll_Inter->kwo_n = 0.5F*kw_ia/
C +       hw_ir * (diam_hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AG
C +       R + Ist_IBF->Pos_auf_Mantel)*sin_kw_winkel_halbe); 
C****************************************************************************
   CODE32:000C58   D9 85 8C 00 00           FLD   DWORD PTR [EBP+140]
                   00                                                         
   CODE32:000C5E   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:000C65   64 D8 0B                 FMUL  FS:DWORD PTR [EBX]
   CODE32:000C68   2E D9 05 00 00           FLD   CS:DWORD PTR L20005
                   00 00R                                                     
   CODE32:000C6F   DE F9                    FDIVR                             
   CODE32:000C71   2E D9 05 00 00           FLD   CS:DWORD PTR L20003
                   00 00R                                                     
   CODE32:000C78   64 D8 4B 0C              FMUL  FS:DWORD PTR [EBX+12]
   CODE32:000C7C   64 D9 43 08              FLD   FS:DWORD PTR [EBX+8]
   CODE32:000C80   DE F9                    FDIVR                             
   CODE32:000C82   DE C9                    FMUL                              
   CODE32:000C84   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000C88   64 D9 83 AB 00           FLD   FS:DWORD PTR [EBX+171]
                   00 00                                                      
   CODE32:000C8F   0F B5 55 18              LGS   EDX,PWORD PTR [EBP+24]
   CODE32:000C93   65 D8 82 A7 00           FADD  GS:DWORD PTR [EDX+167]
                   00 00                                                      
   CODE32:000C9A   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:000CA1   64 D9 43 10              FLD   FS:DWORD PTR [EBX+16]
   CODE32:000CA5   DE C9                    FMUL                              
   CODE32:000CA7   DE F9                    FDIVR                             
   CODE32:000CA9   C4 4D 10                 LES   ECX,PWORD PTR [EBP+16]
   CODE32:000CAC   26 D9 59 34              FSTP  ES:DWORD PTR [ECX+52]
C****************************************************************************
C   669:                               Soll_Inter->kwu_n = 0.5F*kw_ia/
C +       hw_ir * (diam_hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AG
C +       R + Ist_IBF->Pos_auf_Mantel)*sin_kw_winkel_halbe);
C +            			 
C****************************************************************************
   CODE32:000CB0   D9 85 8C 00 00           FLD   DWORD PTR [EBP+140]
                   00                                                         
   CODE32:000CB6   64 D8 0B                 FMUL  FS:DWORD PTR [EBX]
   CODE32:000CB9   2E D9 05 00 00           FLD   CS:DWORD PTR L20005
                   00 00R                                                     
   CODE32:000CC0   DE F9                    FDIVR                             
   CODE32:000CC2   2E D9 05 00 00           FLD   CS:DWORD PTR L20003

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 81

     Interleaved Listing

                   00 00R                                                     
   CODE32:000CC9   64 D8 4B 0C              FMUL  FS:DWORD PTR [EBX+12]
   CODE32:000CCD   64 D9 43 08              FLD   FS:DWORD PTR [EBX+8]
   CODE32:000CD1   DE F9                    FDIVR                             
   CODE32:000CD3   DE C9                    FMUL                              
   CODE32:000CD5   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000CD9   64 D9 83 AB 00           FLD   FS:DWORD PTR [EBX+171]
                   00 00                                                      
   CODE32:000CE0   65 D8 82 A7 00           FADD  GS:DWORD PTR [EDX+167]
                   00 00                                                      
   CODE32:000CE7   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:000CEE   64 D9 43 10              FLD   FS:DWORD PTR [EBX+16]
   CODE32:000CF2   DE C9                    FMUL                              
   CODE32:000CF4   DE F9                    FDIVR                             
   CODE32:000CF6   26 D9 59 38              FSTP  ES:DWORD PTR [ECX+56]
C****************************************************************************
C   670:                             
C   671:                                /*Position*/
C +        
C   672:                                Soll_IBF->AG_Pos = Ist_IBF->Vo
C +       rring.D_Null + diam_hw/2 - Ist_IBF->Pos_auf_Mantel - Ist_IBF
C +       ->Del_Kr_AGR ;     // 10 steht für die Variable Pos_auf_Mant
C +       el 
C****************************************************************************
   CODE32:000CFA   2E D9 05 00 00           FLD   CS:DWORD PTR L20005
                   00 00R                                                     
   CODE32:000D01   64 D8 3B                 FDIVR FS:DWORD PTR [EBX]
   CODE32:000D04   65 D8 82 8B 00           FADD  GS:DWORD PTR [EDX+139]
                   00 00                                                      
   CODE32:000D0B   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000D0F   64 D9 83 AB 00           FLD   FS:DWORD PTR [EBX+171]
                   00 00                                                      
   CODE32:000D16   DE E9                    FSUBR                             
   CODE32:000D18   64 D9 83 A7 00           FLD   FS:DWORD PTR [EBX+167]
                   00 00                                                      
   CODE32:000D1F   DE E9                    FSUBR                             
   CODE32:000D21   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000D24   26 D9 59 1A              FSTP  ES:DWORD PTR [ECX+26]
C****************************************************************************
C   673:                                 
C   674:                                 
C   675:                                /*Zähler - Merker*/ 
C   676:                                n=0.1f; 
C****************************************************************************
   CODE32:000D28   B8 CD CC CC 3D           MOV   EAX,1036831949
   CODE32:000D2D   89 45 B8                 MOV   DWORD PTR [EBP-72],EAX
C****************************************************************************
C   677:                                Soll_IBF->InitAchse ='c'; 
C   678:                                 
C   679:                                break; // zu case 'b' 
C****************************************************************************
   CODE32:000D30   26 C6 41 04 63           MOV   ES:BYTE PTR [ECX+4],99
   CODE32:000D35   E9 54 08 00 00           JMP   NEAR PTR   L8
C****************************************************************************

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 82

     Interleaved Listing

C   680:   
C   681:                    case 'c':   /*Position Axialgerüst*/ 
C   682:                                
C   683:                                /* Geschwindigkeiten  */ 
C   684:                                Soll_IBF->RS_V         = 0.0F;
C +        
C****************************************************************************
                                  L26:
   CODE32:000D3A   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000D3D   B8 00 00 00 00           MOV   EAX,0
   CODE32:000D42   26 89 41 22              MOV   ES:DWORD PTR [ECX+34],EAX
C****************************************************************************
C   685:                                Soll_IBF->ASO_V        = 5.0F;
C +         
C****************************************************************************
   CODE32:000D46   B8 00 00 A0 40           MOV   EAX,1084227584
   CODE32:000D4B   26 89 41 26              MOV   ES:DWORD PTR [ECX+38],EAX
C****************************************************************************
C   686:                                //Soll_IBF->Soll_ASU_V   = 0.0
C +       F; 
C   687:                                //Soll_IBF->AG_V         = 10.
C +       0F; 
C   688:                                //Soll_IBF->Soll_ZAL_V   = 0.0
C +       F; 
C   689:                                //Soll_IBF->Soll_ZAR_V   = 0.0
C +       F; 
C   690:   
C   691:                                /* Kräfte */ 
C   692:                                //Soll_IBF->RS_Kraft = Ist_IBF
C +       ->Flag.rs_kraftregler_aktiv ? Ist_IBF->RS_Kraft_Vorgabe : 10
C +       0000.0F ;  
C   693:                                Soll_IBF->AS_Kraft = Ist_IBF->
C +       Flag.as_kraftregler_aktiv ? Ist_IBF->AS_Kraft_Vorgabe :  800
C +       00.0F ;  
C****************************************************************************
   CODE32:000D4F   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:000D52   26 83 79 57 00           CMP   ES:DWORD PTR [ECX+87],0
   CODE32:000D57   74 0A                    JE    NEAR PTR   L20034
   CODE32:000D59   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000D5D   64 D9 43 73              FLD   FS:DWORD PTR [EBX+115]
   CODE32:000D61   EB 07                    JMP   NEAR PTR   L20035
                                  L20034:
   CODE32:000D63   2E D9 05 00 00           FLD   CS:DWORD PTR L20011
                   00 00R                                                     
                                  L20035:
   CODE32:000D6A   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000D6D   26 D9 59 0A              FSTP  ES:DWORD PTR [ECX+10]
C****************************************************************************
C   694:                                Soll_IBF->AG_Kraft = Ist_IBF->
C +       Flag.ag_kraftregler_aktiv ? Ist_IBF->AG_Kraft_Vorgabe :  100
C +       00.0F ;  
C****************************************************************************
   CODE32:000D71   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:000D74   26 83 79 5B 00           CMP   ES:DWORD PTR [ECX+91],0
   CODE32:000D79   74 0A                    JE    NEAR PTR   L20036

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 83

     Interleaved Listing

   CODE32:000D7B   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000D7F   64 D9 43 77              FLD   FS:DWORD PTR [EBX+119]
   CODE32:000D83   EB 07                    JMP   NEAR PTR   L20037
                                  L20036:
   CODE32:000D85   2E D9 05 00 00           FLD   CS:DWORD PTR L20014
                   00 00R                                                     
                                  L20037:
   CODE32:000D8C   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000D8F   26 D9 59 0E              FSTP  ES:DWORD PTR [ECX+14]
C****************************************************************************
C   695:                                //Soll_IBF->ZAR_Kraft = Ist_IB
C +       F.Flag.zal_kraftregler_aktiv ? Ist_IBF->ZAL_Kraft_Vorgabe :
C +        10000.0F ;  
C   696:                                //Soll_IBF->ZAL_Kraft = Ist_IB
C +       F.Flag.zar_kraftregler_aktiv ? Ist_IBF->ZAR_Kraft_Vorgabe :
C +        10000.0F ; 
C   697:                                   
C   698:                                /* Drehzahl */ 
C   699:                                Soll_Inter->kwo_n = 0.5F*kw_ia
C +       /hw_ir * (diam_hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_A
C +       GR + Ist_IBF->Pos_auf_Mantel)*sin_kw_winkel_halbe); 
C****************************************************************************
   CODE32:000D93   D9 85 8C 00 00           FLD   DWORD PTR [EBP+140]
                   00                                                         
   CODE32:000D99   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:000DA0   64 D8 0B                 FMUL  FS:DWORD PTR [EBX]
   CODE32:000DA3   2E D9 05 00 00           FLD   CS:DWORD PTR L20005
                   00 00R                                                     
   CODE32:000DAA   DE F9                    FDIVR                             
   CODE32:000DAC   2E D9 05 00 00           FLD   CS:DWORD PTR L20003
                   00 00R                                                     
   CODE32:000DB3   64 D8 4B 0C              FMUL  FS:DWORD PTR [EBX+12]
   CODE32:000DB7   64 D9 43 08              FLD   FS:DWORD PTR [EBX+8]
   CODE32:000DBB   DE F9                    FDIVR                             
   CODE32:000DBD   DE C9                    FMUL                              
   CODE32:000DBF   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000DC3   64 D9 83 AB 00           FLD   FS:DWORD PTR [EBX+171]
                   00 00                                                      
   CODE32:000DCA   0F B5 55 18              LGS   EDX,PWORD PTR [EBP+24]
   CODE32:000DCE   65 D8 82 A7 00           FADD  GS:DWORD PTR [EDX+167]
                   00 00                                                      
   CODE32:000DD5   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:000DDC   64 D9 43 10              FLD   FS:DWORD PTR [EBX+16]
   CODE32:000DE0   DE C9                    FMUL                              
   CODE32:000DE2   DE F9                    FDIVR                             
   CODE32:000DE4   C4 4D 10                 LES   ECX,PWORD PTR [EBP+16]
   CODE32:000DE7   26 D9 59 34              FSTP  ES:DWORD PTR [ECX+52]
C****************************************************************************
C   700:                                Soll_Inter->kwu_n = 0.5F*kw_ia
C +       /hw_ir * (diam_hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_A
C +       GR + Ist_IBF->Pos_auf_Mantel)*sin_kw_winkel_halbe);
C +             			 
C****************************************************************************

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 84

     Interleaved Listing

   CODE32:000DEB   D9 85 8C 00 00           FLD   DWORD PTR [EBP+140]
                   00                                                         
   CODE32:000DF1   64 D8 0B                 FMUL  FS:DWORD PTR [EBX]
   CODE32:000DF4   2E D9 05 00 00           FLD   CS:DWORD PTR L20005
                   00 00R                                                     
   CODE32:000DFB   DE F9                    FDIVR                             
   CODE32:000DFD   2E D9 05 00 00           FLD   CS:DWORD PTR L20003
                   00 00R                                                     
   CODE32:000E04   64 D8 4B 0C              FMUL  FS:DWORD PTR [EBX+12]
   CODE32:000E08   64 D9 43 08              FLD   FS:DWORD PTR [EBX+8]
   CODE32:000E0C   DE F9                    FDIVR                             
   CODE32:000E0E   DE C9                    FMUL                              
   CODE32:000E10   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000E14   64 D9 83 AB 00           FLD   FS:DWORD PTR [EBX+171]
                   00 00                                                      
   CODE32:000E1B   65 D8 82 A7 00           FADD  GS:DWORD PTR [EDX+167]
                   00 00                                                      
   CODE32:000E22   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:000E29   64 D9 43 10              FLD   FS:DWORD PTR [EBX+16]
   CODE32:000E2D   DE C9                    FMUL                              
   CODE32:000E2F   DE F9                    FDIVR                             
   CODE32:000E31   26 D9 59 38              FSTP  ES:DWORD PTR [ECX+56]
C****************************************************************************
C   701:                             
C   702:                                /*Position*/   
C   703:     
C   704:                                /*Zähler - Merker*/ 
C   705:                                t_Halte=500; // 200 ms = 2 sec
C +        abwarten 
C****************************************************************************
   CODE32:000E35   B8 00 00 FA 43           MOV   EAX,1140457472
   CODE32:000E3A   89 45 FC                 MOV   DWORD PTR [EBP-4],EAX
C****************************************************************************
C   706:                                 
C   707:                                #ifdef MRAW 
C   708:                                if (Soll_IBF->AG_Pos < (Ist_IB
C +       F->AG_Pos_Start)) 
C   709:                                { 
C   710:                                   if (Ist_IBF->AG_Pos <= (Sol
C +       l_IBF->AG_Pos + eps))  
C   711:                                   { 
C   712:                                      Soll_IBF->InitAchse = 'd
C +       '; 
C   713:                                      break; 
C   714:                                   } 
C   715:                                   else  
C   716:                                   { 
C   717:                                      #ifdef MRAW 
C   718:                                         _settextposition(9,1)
C +       ; 
C   719:                                         printf(" AG_Pos mit P
C +       LUS eps "); 
C   720:                                      #endif 
C   721:                                   }//end if 

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 85

     Interleaved Listing

C   722:                                }//end if 
C   723:                                else
C +                             
C   724:                                { 
C   725:                                   if (Ist_IBF->AG_Pos >= (Sol
C +       l_IBF->AG_Pos - eps))  
C   726:                                   { 
C   727:                                      Soll_IBF->InitAchse = 'd
C +       '; 
C   728:                                      break; 
C   729:                                   } 
C   730:                                   else  
C   731:                                   { 
C   732:                                      #ifdef MRAW    
C   733:                                         _settextposition(9,1)
C +       ; 
C   734:                                         printf(" AG_Pos mit M
C +       INUS eps"); 
C   735:                                      #endif 
C   736:                                   } 
C   737:                                }//end else 
C   738:                                #endif 
C   739:                                 
C   740:                                Soll_IBF->InitAchse = 'd'; //
C +       AG wird noch nicht positioniert, deshalb direkt weiterleiten
C +        an nächste case-Anweisung                               bre
C +       ak; // zu case 'c' 
C****************************************************************************
   CODE32:000E3D   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
C****************************************************************************
C   741:                     
C   742:                    case 'd':   /*Position Axialschlitten*/ 
C****************************************************************************
   CODE32:000E40   26 C6 41 04 64           MOV   ES:BYTE PTR [ECX+4],100
                                  L27:
C****************************************************************************
C   743:                                 
C   744:                                /* Geschwindigkeiten  */ 
C   745:                                Soll_IBF->RS_V         = 0.0F;
C +        
C****************************************************************************
   CODE32:000E45   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000E48   B8 00 00 00 00           MOV   EAX,0
   CODE32:000E4D   26 89 41 22              MOV   ES:DWORD PTR [ECX+34],EAX
C****************************************************************************
C   746:                                Soll_IBF->ASO_V        = 5.0F;
C +         
C****************************************************************************
   CODE32:000E51   B8 00 00 A0 40           MOV   EAX,1084227584
   CODE32:000E56   26 89 41 26              MOV   ES:DWORD PTR [ECX+38],EAX
C****************************************************************************
C   747:                                //Soll_IBF->Soll_ASU_V   = 0.0
C +       F; 
C   748:                                //Soll_IBF->AG_V         = 10.
C +       0F; 

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 86

     Interleaved Listing

C   749:                                //Soll_IBF->Soll_ZAL_V   = 0.0
C +       F; 
C   750:                                //Soll_IBF->Soll_ZAR_V   = 0.0
C +       F; 
C   751:   
C   752:                                /* Kräfte */ 
C   753:                                //Soll_IBF->RS_Kraft = Ist_IBF
C +       ->Flag.rs_kraftregler_aktiv ? Ist_IBF->RS_Kraft_Vorgabe : 10
C +       0000.0F ;  
C   754:                                Soll_IBF->AS_Kraft = Ist_IBF->
C +       Flag.as_kraftregler_aktiv ? Ist_IBF->AS_Kraft_Vorgabe :  800
C +       00.0F ;  
C****************************************************************************
   CODE32:000E5A   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:000E5D   26 83 79 57 00           CMP   ES:DWORD PTR [ECX+87],0
   CODE32:000E62   74 0A                    JE    NEAR PTR   L20038
   CODE32:000E64   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000E68   64 D9 43 73              FLD   FS:DWORD PTR [EBX+115]
   CODE32:000E6C   EB 07                    JMP   NEAR PTR   L20039
                                  L20038:
   CODE32:000E6E   2E D9 05 00 00           FLD   CS:DWORD PTR L20011
                   00 00R                                                     
                                  L20039:
   CODE32:000E75   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000E78   26 D9 59 0A              FSTP  ES:DWORD PTR [ECX+10]
C****************************************************************************
C   755:                                Soll_IBF->AG_Kraft = Ist_IBF->
C +       Flag.ag_kraftregler_aktiv ? Ist_IBF->AG_Kraft_Vorgabe :  100
C +       00.0F ;  
C****************************************************************************
   CODE32:000E7C   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:000E7F   26 83 79 5B 00           CMP   ES:DWORD PTR [ECX+91],0
   CODE32:000E84   74 0A                    JE    NEAR PTR   L20040
   CODE32:000E86   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000E8A   64 D9 43 77              FLD   FS:DWORD PTR [EBX+119]
   CODE32:000E8E   EB 07                    JMP   NEAR PTR   L20041
                                  L20040:
   CODE32:000E90   2E D9 05 00 00           FLD   CS:DWORD PTR L20014
                   00 00R                                                     
                                  L20041:
   CODE32:000E97   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000E9A   26 D9 59 0E              FSTP  ES:DWORD PTR [ECX+14]
C****************************************************************************
C   756:                                //Soll_IBF->ZAR_Kraft = Ist_IB
C +       F.Flag.zal_kraftregler_aktiv ? Ist_IBF->ZAL_Kraft_Vorgabe :
C +        10000.0F ;  
C   757:                                //Soll_IBF->ZAL_Kraft = Ist_IB
C +       F.Flag.zar_kraftregler_aktiv ? Ist_IBF->ZAR_Kraft_Vorgabe :
C +        10000.0F ; 
C   758:                                   
C   759:                                /* Drehzahl */ 
C   760:                                Soll_Inter->kwo_n = 0.5F*kw_ia
C +       /hw_ir * (diam_hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_A
C +       GR + Ist_IBF->Pos_auf_Mantel)*sin_kw_winkel_halbe); 
C****************************************************************************

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 87

     Interleaved Listing

   CODE32:000E9E   D9 85 8C 00 00           FLD   DWORD PTR [EBP+140]
                   00                                                         
   CODE32:000EA4   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:000EAB   64 D8 0B                 FMUL  FS:DWORD PTR [EBX]
   CODE32:000EAE   2E D9 05 00 00           FLD   CS:DWORD PTR L20005
                   00 00R                                                     
   CODE32:000EB5   DE F9                    FDIVR                             
   CODE32:000EB7   2E D9 05 00 00           FLD   CS:DWORD PTR L20003
                   00 00R                                                     
   CODE32:000EBE   64 D8 4B 0C              FMUL  FS:DWORD PTR [EBX+12]
   CODE32:000EC2   64 D9 43 08              FLD   FS:DWORD PTR [EBX+8]
   CODE32:000EC6   DE F9                    FDIVR                             
   CODE32:000EC8   DE C9                    FMUL                              
   CODE32:000ECA   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000ECE   64 D9 83 AB 00           FLD   FS:DWORD PTR [EBX+171]
                   00 00                                                      
   CODE32:000ED5   0F B5 55 18              LGS   EDX,PWORD PTR [EBP+24]
   CODE32:000ED9   65 D8 82 A7 00           FADD  GS:DWORD PTR [EDX+167]
                   00 00                                                      
   CODE32:000EE0   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:000EE7   64 D9 43 10              FLD   FS:DWORD PTR [EBX+16]
   CODE32:000EEB   DE C9                    FMUL                              
   CODE32:000EED   DE F9                    FDIVR                             
   CODE32:000EEF   C4 4D 10                 LES   ECX,PWORD PTR [EBP+16]
   CODE32:000EF2   26 D9 59 34              FSTP  ES:DWORD PTR [ECX+52]
C****************************************************************************
C   761:                                Soll_Inter->kwu_n = 0.5F*kw_ia
C +       /hw_ir * (diam_hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_A
C +       GR + Ist_IBF->Pos_auf_Mantel)*sin_kw_winkel_halbe);
C +             			 
C****************************************************************************
   CODE32:000EF6   D9 85 8C 00 00           FLD   DWORD PTR [EBP+140]
                   00                                                         
   CODE32:000EFC   64 D8 0B                 FMUL  FS:DWORD PTR [EBX]
   CODE32:000EFF   2E D9 05 00 00           FLD   CS:DWORD PTR L20005
                   00 00R                                                     
   CODE32:000F06   DE F9                    FDIVR                             
   CODE32:000F08   2E D9 05 00 00           FLD   CS:DWORD PTR L20003
                   00 00R                                                     
   CODE32:000F0F   64 D8 4B 0C              FMUL  FS:DWORD PTR [EBX+12]
   CODE32:000F13   64 D9 43 08              FLD   FS:DWORD PTR [EBX+8]
   CODE32:000F17   DE F9                    FDIVR                             
   CODE32:000F19   DE C9                    FMUL                              
   CODE32:000F1B   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000F1F   64 D9 83 AB 00           FLD   FS:DWORD PTR [EBX+171]
                   00 00                                                      
   CODE32:000F26   65 D8 82 A7 00           FADD  GS:DWORD PTR [EDX+167]
                   00 00                                                      
   CODE32:000F2D   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:000F34   64 D9 43 10              FLD   FS:DWORD PTR [EBX+16]
   CODE32:000F38   DE C9                    FMUL                              
   CODE32:000F3A   DE F9                    FDIVR                             

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 88

     Interleaved Listing

   CODE32:000F3C   26 D9 59 38              FSTP  ES:DWORD PTR [ECX+56]
C****************************************************************************
C   762:                             
C   763:                                /*Position*/   
C   764:                                Soll_IBF->Soll_ASU_Pos = 0.0F;
C +         
C****************************************************************************
   CODE32:000F40   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000F43   B8 00 00 00 00           MOV   EAX,0
   CODE32:000F48   26 89 81 82 00           MOV   ES:DWORD PTR [ECX+130],EAX
                   00 00                                                      
C****************************************************************************
C   765:   
C   766:                                /*Zähler - Merker*/ 
C   767:                                Ist_IBF->Afpos_dw = Ist_IBF->R
C +       S_Pos;     // Variable in der aktuelle Dornposition definier
C +       t ist nachdem Dorn positioniert worden ist 
C****************************************************************************
   CODE32:000F4F   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000F53   64 D9 43 1F              FLD   FS:DWORD PTR [EBX+31]
   CODE32:000F57   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:000F5A   26 D9 59 47              FSTP  ES:DWORD PTR [ECX+71]
C****************************************************************************
C   768:   
C   769:                                
C   770:                                //----------------------------
C +       ---------------------------------------------------------- 
C   771:                                //----------------Anfahren des
C +        Axialschlittens auf Kraft-------------------------------- 
C   772:                                //----------------------------
C +       ----------------------------------------------------------  
C   773:                                 
C   774:                                if(Ist_IBF->Flag.as_kraftanfah
C +       ren_aktiv != 0)  //wird nur durchlaufen, wenn Kraft angegebe
C +       n 
C   775:                                { 
C****************************************************************************
   CODE32:000F5E   26 83 79 6B 00           CMP   ES:DWORD PTR [ECX+107],0
   CODE32:000F63   74 69                    JE    NEAR PTR   L29
C****************************************************************************
C   776:                                   
C   777:                                  /* Vorgaben: Kraft*/ 
C   778:   
C   779:                                  Ist_IBF->Flag.as_kraftregler
C +       _aktiv = Ist_IBF->Flag.as_kraftanfahren_aktiv; /* Schalter:
C +       Walzen mit Kraftsteuerung 'AN' */ 
C****************************************************************************
   CODE32:000F65   26 8B 41 6B              MOV   EAX,ES:DWORD PTR [ECX+107]
   CODE32:000F69   26 89 41 57              MOV   ES:DWORD PTR [ECX+87],EAX
C****************************************************************************
C   780:                                  Soll_IBF->AS_Kraft = Ist_IBF
C +       ->Flag.as_kraftregler_aktiv ? Ist_IBF->AS_Kraft_Anfahren : 1
C +       00000.0F ;  
C****************************************************************************
   CODE32:000F6D   09 C0                    OR    EAX,EAX

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 89

     Interleaved Listing

   CODE32:000F6F   74 09                    JE    NEAR PTR   L20042
   CODE32:000F71   64 D9 83 87 00           FLD   FS:DWORD PTR [EBX+135]
                   00 00                                                      
   CODE32:000F78   EB 07                    JMP   NEAR PTR   L20043
                                  L20042:
   CODE32:000F7A   2E D9 05 00 00           FLD   CS:DWORD PTR L20008
                   00 00R                                                     
                                  L20043:
   CODE32:000F81   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000F84   26 D9 59 0A              FSTP  ES:DWORD PTR [ECX+10]
C****************************************************************************
C   781:                                   
C   782:                                  /* Vorgabe: Geschwindigkeit*
C +       / 
C   783:                                   
C   784:                                  /* Vorgabe: Position */ 
C   785:                                  //Soll_IBF->RS_Pos = aus cas
C +       e -1  
C   786:                                  Soll_IBF->ASO_Pos = Ist_IBF-
C +       >Vorring.Start_Ringhoehe - 1.5F; //da Ring gerne klettert, w
C +       ird bereits hier ASO zugestellt 
C****************************************************************************
   CODE32:000F88   2E D9 05 00 00           FLD   CS:DWORD PTR L20027
                   00 00R                                                     
   CODE32:000F8F   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000F93   64 D8 AB 93 00           FSUBR FS:DWORD PTR [EBX+147]
                   00 00                                                      
   CODE32:000F9A   26 D9 59 16              FSTP  ES:DWORD PTR [ECX+22]
C****************************************************************************
C   787:  
C +       				 
C   788:                                   
C   789:                                //----------------------------
C +       ----------------------------------------------------- 
C   790:                                //   Routine um Radialschlitte
C +       n auf Kraft anzufahren       
C   791:                                //----------------------------
C +       ----------------------------------------------------- 
C   792:                           
C   793:                                  if ((Ist_IBF->FR) == (Ist_IB
C +       F->RS_Kraft_Vorgabe)) 
C   794:                                  { 
C****************************************************************************
   CODE32:000F9E   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:000FA1   26 D9 41 6F              FLD   ES:DWORD PTR [ECX+111]
   CODE32:000FA5   64 D8 5B 0F              FCOMP FS:DWORD PTR [EBX+15]
   CODE32:000FA9   DF E0                    FNSTSW AX                         
   CODE32:000FAB   9E                       SAHF                              
   CODE32:000FAC   75 20                    JNE   NEAR PTR   L29
C****************************************************************************
C   795:                                     Soll_IBF->RS_Pos = Ist_IB
C +       F->RS_Pos; 
C****************************************************************************
   CODE32:000FAE   64 D9 43 1F              FLD   FS:DWORD PTR [EBX+31]
   CODE32:000FB2   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 90

     Interleaved Listing

   CODE32:000FB5   26 D9 59 12              FSTP  ES:DWORD PTR [ECX+18]
C****************************************************************************
C   796:                                     Soll_IBF->InitAchse = 'b'
C +       ; 
C****************************************************************************
   CODE32:000FB9   26 C6 41 04 62           MOV   ES:BYTE PTR [ECX+4],98
C****************************************************************************
C   797:                                     zaehler=0.5F; 
C****************************************************************************
   CODE32:000FBE   B8 00 00 00 3F           MOV   EAX,1056964608
   CODE32:000FC3   89 45 E4                 MOV   DWORD PTR [EBP-28],EAX
C****************************************************************************
C   798:                                     t_Halte=100.0F;   //Zaehl
C +       er für Kraftanfahrt des Axialschlittens 
C****************************************************************************
   CODE32:000FC6   B8 00 00 C8 42           MOV   EAX,1120403456
   CODE32:000FCB   89 45 FC                 MOV   DWORD PTR [EBP-4],EAX
                                  L29:
C****************************************************************************
C   799:                                  } 
C   800:                                 
C   801:                                 
C   802:                                  #ifdef MRAW 
C   803:                                      _settextposition(2,10); 
C   804:                                      printf("ASO anhand Kraft
C +       "); 
C   805:                                    
C   806:                                   Soll_IBF->ASO_Pos = Ist_IBF
C +       ->Vorring.Start_Ringhoehe - 10.0F;    //!!statt Zaehler wurd
C +       e als Wert 10 (mm) eingesetzt;;;zaehler wurde in case'a' auf
C +        den Wert 0.5F gesetzt 
C   807:                                    
C   808:                                   if (Ist_IBF->FA_f >= Axialk
C +       raft  || Ist_IBF->FA_f == Axialkraft /*|| t_Halte == 0*/) //
C +       JETZT MIT TEST TEST TEST....wirkende Axialkraft1 ist gemitte
C +       lte AG-Kraft durch Eigengewicht !! 
C   809:                                   { 
C   810:                                      #ifdef MRAW 
C   811:                                  	 _settextposition(2,1
C +       0); 
C   812:                                       printf("ASO hat Positio
C +       n durch Kraft erreicht FA: %8.1f-eingabe-: %8.1f", Ist_IBF->
C +       FA, Axialkraft); 
C   813:                                      #endif 
C   814:                                      Soll_IBF->ASO_Pos = Ist_
C +       IBF->ASO_Pos; 
C   815:                                 
C   816:                                      Soll_IBF->ASO_V   = 1.0F
C +       ; 
C   817:                                       
C   818:                                      Soll_IBF->InitAchse    =
C +        ' '; 
C   819:                                      Soll_IBF->Profilflag   =
C +        1;  
C   820:                                   }// end if 

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 91

     Interleaved Listing

C   821:                                  #endif 
C   822:                                }//end if(Axialkraft!=NULL)  
C   823:                                 
C   824:                                 
C   825:                                if(Ist_IBF->Flag.as_kraftanfah
C +       ren_aktiv == 0) //wird durchlaufen, wenn ohne Kraftsteuerung
C +        angefahren wird 
C   826:                                {  
C****************************************************************************
   CODE32:000FCE   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:000FD1   26 83 79 6B 00           CMP   ES:DWORD PTR [ECX+107],0
   CODE32:000FD6   0F 85 B2 05 00           JNE   NEAR PTR   L8
                   00                                                         
C****************************************************************************
C   827:                                   Soll_IBF->ASO_Pos = Ist_IBF
C +       ->Vorring.Start_Ringhoehe; 
C****************************************************************************
   CODE32:000FDC   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:000FE0   64 D9 83 93 00           FLD   FS:DWORD PTR [EBX+147]
                   00 00                                                      
   CODE32:000FE7   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:000FEA   26 D9 59 16              FSTP  ES:DWORD PTR [ECX+22]
C****************************************************************************
C   828:                                   if (Ist_IBF->ASO_Pos <= (So
C +       ll_IBF->ASO_Pos + eps) || Ist_IBF->ASO_Pos <= (Soll_IBF->ASO
C +       _Pos - eps) )  
C   829:                                   {Soll_IBF->InitAchse = ' ';
C +        Soll_IBF->Profilflag = 1; break;} // Hier IBF_Allgemein.IBF
C +       _Allgemein.IBF_Allgemein.Profilflag bestimmen wie es weiter
C +       geht  
C****************************************************************************
   CODE32:000FEE   D9 45 E0                 FLD   DWORD PTR [EBP-32]
   CODE32:000FF1   26 D8 41 16              FADD  ES:DWORD PTR [ECX+22]
   CODE32:000FF5   64 D8 5B 27              FCOMP FS:DWORD PTR [EBX+39]
   CODE32:000FF9   DF E0                    FNSTSW AX                         
   CODE32:000FFB   9E                       SAHF                              
   CODE32:000FFC   73 14                    JAE   NEAR PTR   L20044
   CODE32:000FFE   D9 45 E0                 FLD   DWORD PTR [EBP-32]
   CODE32:001001   26 D8 69 16              FSUBR ES:DWORD PTR [ECX+22]
   CODE32:001005   64 D8 5B 27              FCOMP FS:DWORD PTR [EBX+39]
   CODE32:001009   DF E0                    FNSTSW AX                         
   CODE32:00100B   9E                       SAHF                              
   CODE32:00100C   0F 82 7C 05 00           JB    NEAR PTR   L8
                   00                                                         
                                  L20044:
   CODE32:001012   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:001015   26 C6 41 04 20           MOV   ES:BYTE PTR [ECX+4],32
   CODE32:00101A   26 C7 01 01 00           MOV   ES:DWORD PTR [ECX],1
                   00 00                                                      
   CODE32:001021   E9 68 05 00 00           JMP   NEAR PTR   L8
C****************************************************************************
C   830:                                } 
C   831:  
C +       		 
C   832:                                break;//break 

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 92

     Interleaved Listing

C   833:   
C   834:                    case 'z':   // 2 Umdrehungen abwarten für
C +       gleichmäßiges Profil über Umfang  
C   835:                                t_Halte--; 
C****************************************************************************
                                  L33:
   CODE32:001026   2E D9 05 00 00           FLD   CS:DWORD PTR L20004
                   00 00R                                                     
   CODE32:00102D   D8 6D FC                 FSUBR DWORD PTR [EBP-4]
   CODE32:001030   D9 5D FC                 FSTP  DWORD PTR [EBP-4]
C****************************************************************************
C   836:                                if (t_Halte <= 0) {Soll_IBF->I
C +       nitAchse = 'b';}; 
C****************************************************************************
   CODE32:001033   D9 EE                    FLDZ                              
   CODE32:001035   D8 5D FC                 FCOMP DWORD PTR [EBP-4]
   CODE32:001038   DF E0                    FNSTSW AX                         
   CODE32:00103A   9E                       SAHF                              
   CODE32:00103B   0F 82 4D 05 00           JB    NEAR PTR   L8
                   00                                                         
   CODE32:001041   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:001044   26 C6 41 04 62           MOV   ES:BYTE PTR [ECX+4],98
C****************************************************************************
C   837:                                break;  // zu case 'z' 
C****************************************************************************
   CODE32:001049   E9 40 05 00 00           JMP   NEAR PTR   L8
C****************************************************************************
C   838:                                                   
C   839:                    default:     
C   840:                                #ifdef MRAW 
C   841:                                   _settextposition(9,1); 
C   842:                                   printf(" InitAchse: %d - Wa
C +       rum default ?!? ", Ist_IBF->InitAchse); 
C   843:                                #endif    
C   844:                                break; 
C   845:                                 
C   846:                    } //	Klammer zu: switch (InitAchse) von ca
C +       se0  
C   847:                    break; 
C   848:      
C   849:      
C   850:           case 1:     //Vergleich der eingegebenen Wandstärke
C +        und der, per Kraftsteuerung angefahrenen Wandstärke 
C   851:                       // Routine, ob Schalter gesetzt ist ode
C +       r nicht -> Schalter (0,1,2) 
C   852:                        
C   853:                       s_ist = Ist_IBF->Afpos_dw - ((186.9F +
C +       Ist_IBF->Werkzeugdurchmesser)/2.0F); 
C****************************************************************************
                                  L36:
   CODE32:00104E   2E D9 05 00 00           FLD   CS:DWORD PTR L20048
                   00 00R                                                     
   CODE32:001055   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:001058   26 D8 81 AF 00           FADD  ES:DWORD PTR [ECX+175]
                   00 00                                                      

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 93

     Interleaved Listing

   CODE32:00105F   2E D9 05 00 00           FLD   CS:DWORD PTR L20005
                   00 00R                                                     
   CODE32:001066   DE F9                    FDIVR                             
   CODE32:001068   26 D8 69 47              FSUBR ES:DWORD PTR [ECX+71]
   CODE32:00106C   D9 5D C8                 FSTP  DWORD PTR [EBP-56]
C****************************************************************************
C   854:                       Soll_IBF->Soll_ASO_Pos_alt = Ist_IBF->A
C +       SO_Pos;      
C****************************************************************************
   CODE32:00106F   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:001073   64 D9 43 27              FLD   FS:DWORD PTR [EBX+39]
   CODE32:001077   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:00107A   26 D9 59 42              FSTP  ES:DWORD PTR [ECX+66]
C****************************************************************************
C   855:                       s_f_alt = Ist_IBF->s_f; // dem Wert s_f
C +       _alt wird hier bereits der erste Wert vorgegeben, damit in c
C +       ase 11/12 keine Division durch NULL stattfindet....  
C****************************************************************************
   CODE32:00107E   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:001081   26 D9 41 4B              FLD   ES:DWORD PTR [ECX+75]
   CODE32:001085   D9 5D F8                 FSTP  DWORD PTR [EBP-8]
C****************************************************************************
C   856:                       #ifdef MRAW 
C   857:                          _settextposition(6,10); 
C   858:                          printf("s_ist %8.1f  s_gemessen %8.1
C +       f", s_ist, Ist_IBF->Wandstaerke_Null); 
C   859:                       #endif 
C   860:                        
C   861:                       if(Ist_IBF->Schalter_Kont_DisKo == 0)
C +       // kontinuierlicher Vorschub 
C   862:                       {Soll_IBF->Profilflag = 11; s_ist = 0;
C +       break;} 
C****************************************************************************
   CODE32:001088   D9 EE                    FLDZ                              
   CODE32:00108A   26 D8 59 4F              FCOMP ES:DWORD PTR [ECX+79]
   CODE32:00108E   DF E0                    FNSTSW AX                         
   CODE32:001090   9E                       SAHF                              
   CODE32:001091   75 17                    JNE   NEAR PTR   L37
   CODE32:001093   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:001096   26 C7 01 0B 00           MOV   ES:DWORD PTR [ECX],11
                   00 00                                                      
   CODE32:00109D   B8 00 00 00 00           MOV   EAX,0
   CODE32:0010A2   89 45 C8                 MOV   DWORD PTR [EBP-56],EAX
   CODE32:0010A5   E9 E4 04 00 00           JMP   NEAR PTR   L8
                                  L37:
C****************************************************************************
C   863:                        
C   864:                       if (Ist_IBF->Schalter_Kont_DisKo == 1)
C +       //diskontinuierlicher Vorschub (eps über Weg) 
C   865:                       {Soll_IBF->Profilflag = 12; Soll_IBF->R
C +       S_Pos = Ist_IBF->RS_Pos - 0.5f; break;} 
C****************************************************************************
   CODE32:0010AA   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:0010AD   2E D9 05 00 00           FLD   CS:DWORD PTR L20004
                   00 00R                                                     

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 94

     Interleaved Listing

   CODE32:0010B4   26 D8 59 4F              FCOMP ES:DWORD PTR [ECX+79]
   CODE32:0010B8   DF E0                    FNSTSW AX                         
   CODE32:0010BA   9E                       SAHF                              
   CODE32:0010BB   75 22                    JNE   NEAR PTR   L39
   CODE32:0010BD   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:0010C0   26 C7 01 0C 00           MOV   ES:DWORD PTR [ECX],12
                   00 00                                                      
   CODE32:0010C7   2E D9 05 00 00           FLD   CS:DWORD PTR L20003
                   00 00R                                                     
   CODE32:0010CE   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:0010D2   64 D8 6B 1F              FSUBR FS:DWORD PTR [EBX+31]
   CODE32:0010D6   26 D9 59 12              FSTP  ES:DWORD PTR [ECX+18]
   CODE32:0010DA   E9 AF 04 00 00           JMP   NEAR PTR   L8
                                  L39:
C****************************************************************************
C   866:                        
C   867:                       if (Ist_IBF->Schalter_Kont_DisKo == 2)
C +       //diskontinuierlicher Vorschub (eps über Geschwindigkeit) 
C   868:                       { 
C****************************************************************************
   CODE32:0010DF   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:0010E2   2E D9 05 00 00           FLD   CS:DWORD PTR L20005
                   00 00R                                                     
   CODE32:0010E9   26 D8 59 4F              FCOMP ES:DWORD PTR [ECX+79]
   CODE32:0010ED   DF E0                    FNSTSW AX                         
   CODE32:0010EF   9E                       SAHF                              
   CODE32:0010F0   0F 85 98 04 00           JNE   NEAR PTR   L8
                   00                                                         
C****************************************************************************
C   869:                          Soll_IBF->Profilflag =13;  
C****************************************************************************
   CODE32:0010F6   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:0010F9   26 C7 01 0D 00           MOV   ES:DWORD PTR [ECX],13
                   00 00                                                      
C****************************************************************************
C   870:                          t_dis_h = 10*(Ist_IBF->Vorring.D_Nul
C +       l/(diam_hw*f_H)); //Zeit für x Umdrehungen bei denen der Dor
C +       n in den Ring vorfährt bis Schnabel-Formel greift 
C****************************************************************************
   CODE32:001100   D9 45 EC                 FLD   DWORD PTR [EBP-20]
   CODE32:001103   C4 8D 34 03 00           LES   ECX,PWORD PTR [EBP+820]
                   00                                                         
   CODE32:001109   26 D8 09                 FMUL  ES:DWORD PTR [ECX]
   CODE32:00110C   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:001110   64 D8 BB 8B 00           FDIVR FS:DWORD PTR [EBX+139]
                   00 00                                                      
   CODE32:001117   2E D9 05 00 00           FLD   CS:DWORD PTR L20049
                   00 00R                                                     
   CODE32:00111E   DE C9                    FMUL                              
C****************************************************************************
C   871:                          break; 
C****************************************************************************
   CODE32:001120   D9 5D E8                 FSTP  DWORD PTR [EBP-24]
   CODE32:001123   E9 66 04 00 00           JMP   NEAR PTR   L8
C****************************************************************************

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 95

     Interleaved Listing

C   872:                       } 
C   873:                        
C   874:                       else 
C   875:                       { 
C   876:                          #ifdef MRAW 
C   877:                             _settextposition(10,15); 
C   878:                             printf("Fehler in Schalterstellun
C +       g"); 
C   879:                          #endif 
C   880:                       } 
C   881:                       break; 
C   882:                       
C   883:          
C   884:         case 11:      //Kontinuierlcher Walzungsroutine 
C   885:                       Soll_Inter->kwo_n = kw_ia/hw_ir * (diam
C +       _hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AGR + Ist_IBF->
C +       Pos_auf_Mantel)*sin_kw_winkel_halbe); 
C****************************************************************************
                                  L42:
   CODE32:001128   D9 85 8C 00 00           FLD   DWORD PTR [EBP+140]
                   00                                                         
   CODE32:00112E   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:001135   64 D8 0B                 FMUL  FS:DWORD PTR [EBX]
   CODE32:001138   2E D9 05 00 00           FLD   CS:DWORD PTR L20005
                   00 00R                                                     
   CODE32:00113F   DE F9                    FDIVR                             
   CODE32:001141   64 D9 43 08              FLD   FS:DWORD PTR [EBX+8]
   CODE32:001145   0F B5 95 34 03           LGS   EDX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:00114C   65 D8 7A 0C              FDIVR GS:DWORD PTR [EDX+12]
   CODE32:001150   DE C9                    FMUL                              
   CODE32:001152   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:001156   64 D9 83 AB 00           FLD   FS:DWORD PTR [EBX+171]
                   00 00                                                      
   CODE32:00115D   0F B5 55 18              LGS   EDX,PWORD PTR [EBP+24]
   CODE32:001161   65 D8 82 A7 00           FADD  GS:DWORD PTR [EDX+167]
                   00 00                                                      
   CODE32:001168   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:00116F   64 D9 43 10              FLD   FS:DWORD PTR [EBX+16]
   CODE32:001173   DE C9                    FMUL                              
   CODE32:001175   DE F9                    FDIVR                             
   CODE32:001177   C4 4D 10                 LES   ECX,PWORD PTR [EBP+16]
   CODE32:00117A   26 D9 59 34              FSTP  ES:DWORD PTR [ECX+52]
C****************************************************************************
C   886:                       Soll_Inter->kwu_n = kw_ia/hw_ir * (diam
C +       _hw * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AGR + Ist_IBF->
C +       Pos_auf_Mantel)*sin_kw_winkel_halbe);
C +       	 
C****************************************************************************
   CODE32:00117E   D9 85 8C 00 00           FLD   DWORD PTR [EBP+140]
                   00                                                         
   CODE32:001184   64 D8 0B                 FMUL  FS:DWORD PTR [EBX]
   CODE32:001187   2E D9 05 00 00           FLD   CS:DWORD PTR L20005

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 96

     Interleaved Listing

                   00 00R                                                     
   CODE32:00118E   DE F9                    FDIVR                             
   CODE32:001190   64 D9 43 08              FLD   FS:DWORD PTR [EBX+8]
   CODE32:001194   0F B5 95 34 03           LGS   EDX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:00119B   65 D8 7A 0C              FDIVR GS:DWORD PTR [EDX+12]
   CODE32:00119F   DE C9                    FMUL                              
   CODE32:0011A1   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:0011A5   64 D9 83 AB 00           FLD   FS:DWORD PTR [EBX+171]
                   00 00                                                      
   CODE32:0011AC   0F B5 55 18              LGS   EDX,PWORD PTR [EBP+24]
   CODE32:0011B0   65 D8 82 A7 00           FADD  GS:DWORD PTR [EDX+167]
                   00 00                                                      
   CODE32:0011B7   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:0011BE   64 D9 43 10              FLD   FS:DWORD PTR [EBX+16]
   CODE32:0011C2   DE C9                    FMUL                              
   CODE32:0011C4   DE F9                    FDIVR                             
   CODE32:0011C6   26 D9 59 38              FSTP  ES:DWORD PTR [ECX+56]
C****************************************************************************
C   887:                        
C   888:                       Soll_IBF->RS_V  = Soll_IBF->Vorschubges
C +       chw_Dw;    // Dorn, Radialschlitten    
C****************************************************************************
   CODE32:0011CA   0F B4 5D 08              LFS   EBX,PWORD PTR [EBP+8]
   CODE32:0011CE   64 D9 43 72              FLD   FS:DWORD PTR [EBX+114]
   CODE32:0011D2   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:0011D5   26 D9 59 22              FSTP  ES:DWORD PTR [ECX+34]
C****************************************************************************
C   889:                       Soll_IBF->ASO_V = 100.0F; 
C****************************************************************************
   CODE32:0011D9   B8 00 00 C8 42           MOV   EAX,1120403456
   CODE32:0011DE   26 89 41 26              MOV   ES:DWORD PTR [ECX+38],EAX
C****************************************************************************
C   890:                       
C   891:                       Soll_IBF->ASO_Pos = 143.0F; 
C****************************************************************************
   CODE32:0011E2   B8 00 00 0F 43           MOV   EAX,1125056512
   CODE32:0011E7   26 89 41 16              MOV   ES:DWORD PTR [ECX+22],EAX
C****************************************************************************
C   892:   
C   893:                       if(Soll_IBF->Steg != 0)   // Abfrage ob
C +        Stegstärke angegeben 
C   894:                       { 
C****************************************************************************
   CODE32:0011EB   D9 EE                    FLDZ                              
   CODE32:0011ED   26 D8 59 7A              FCOMP ES:DWORD PTR [ECX+122]
   CODE32:0011F1   DF E0                    FNSTSW AX                         
   CODE32:0011F3   9E                       SAHF                              
   CODE32:0011F4   74 2E                    JE    NEAR PTR   L43
C****************************************************************************
C   895:                       Soll_IBF->RS_Pos = (diam_hw + Ist_IBF->
C +       Werkzeugdurchmesser)/2 + Soll_IBF->Steg; 
C****************************************************************************
   CODE32:0011F6   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 97

     Interleaved Listing

   CODE32:0011FA   64 D9 83 AF 00           FLD   FS:DWORD PTR [EBX+175]
                   00 00                                                      
   CODE32:001201   0F B5 95 34 03           LGS   EDX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:001208   65 D8 02                 FADD  GS:DWORD PTR [EDX]
   CODE32:00120B   2E D9 05 00 00           FLD   CS:DWORD PTR L20005
                   00 00R                                                     
   CODE32:001212   DE F9                    FDIVR                             
   CODE32:001214   0F B5 55 08              LGS   EDX,PWORD PTR [EBP+8]
   CODE32:001218   65 D9 42 7A              FLD   GS:DWORD PTR [EDX+122]
   CODE32:00121C   DE C1                    FADD                              
C****************************************************************************
C   896:                       
C   897:                       } 
C   898:                       else Soll_IBF->RS_Pos = Ist_IBF->Afpos_
C +       dw - Soll_IBF->delta_s;  //Afpos_dw wird in case 0 -> case '
C +       a' gesetzt..... 
C****************************************************************************
   CODE32:00121E   26 D9 59 12              FSTP  ES:DWORD PTR [ECX+18]
   CODE32:001222   EB 17                    JMP   NEAR PTR   L44
                                  L43:
   CODE32:001224   0F B4 5D 08              LFS   EBX,PWORD PTR [EBP+8]
   CODE32:001228   64 D9 43 7E              FLD   FS:DWORD PTR [EBX+126]
   CODE32:00122C   0F B5 55 18              LGS   EDX,PWORD PTR [EBP+24]
   CODE32:001230   65 D8 6A 47              FSUBR GS:DWORD PTR [EDX+71]
   CODE32:001234   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:001237   26 D9 59 12              FSTP  ES:DWORD PTR [ECX+18]
                                  L44:
C****************************************************************************
C   899:                        
C   900:                       Soll_IBF->RS_Pos = Ist_IBF->RS_Pos; 
C****************************************************************************
   CODE32:00123B   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:00123F   64 D9 43 1F              FLD   FS:DWORD PTR [EBX+31]
   CODE32:001243   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:001246   26 D9 59 12              FSTP  ES:DWORD PTR [ECX+18]
C****************************************************************************
C   901:                       
C   902:                       if(Ist_IBF->RS_Pos <= Soll_IBF->RS_Pos
C +       || Ist_IBF->RS_Pos <= (Soll_IBF->RS_Pos + eps) || Ist_IBF->R
C +       S_Pos <= (Soll_IBF->RS_Pos - eps)) 
C   903:                       {	 
C****************************************************************************
   CODE32:00124A   26 D9 41 12              FLD   ES:DWORD PTR [ECX+18]
   CODE32:00124E   64 D8 5B 1F              FCOMP FS:DWORD PTR [EBX+31]
   CODE32:001252   DF E0                    FNSTSW AX                         
   CODE32:001254   9E                       SAHF                              
   CODE32:001255   73 20                    JAE   NEAR PTR   L20050
   CODE32:001257   D9 45 E0                 FLD   DWORD PTR [EBP-32]
   CODE32:00125A   26 D8 41 12              FADD  ES:DWORD PTR [ECX+18]
   CODE32:00125E   64 D8 5B 1F              FCOMP FS:DWORD PTR [EBX+31]
   CODE32:001262   DF E0                    FNSTSW AX                         
   CODE32:001264   9E                       SAHF                              
   CODE32:001265   73 10                    JAE   NEAR PTR   L20050
   CODE32:001267   D9 45 E0                 FLD   DWORD PTR [EBP-32]

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 98

     Interleaved Listing

   CODE32:00126A   26 D8 69 12              FSUBR ES:DWORD PTR [ECX+18]
   CODE32:00126E   64 D8 5B 1F              FCOMP FS:DWORD PTR [EBX+31]
   CODE32:001272   DF E0                    FNSTSW AX                         
   CODE32:001274   9E                       SAHF                              
   CODE32:001275   72 3E                    JB    NEAR PTR   L45
                                  L20050:
C****************************************************************************
C   904:                          t_Halte= Soll_IBF->Umdrehungen*10*(I
C +       st_IBF->Vorring.D_Null/(diam_hw*f_H)); 
C****************************************************************************
   CODE32:001277   D9 45 EC                 FLD   DWORD PTR [EBP-20]
   CODE32:00127A   C4 8D 34 03 00           LES   ECX,PWORD PTR [EBP+820]
                   00                                                         
   CODE32:001280   26 D8 09                 FMUL  ES:DWORD PTR [ECX]
   CODE32:001283   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:001287   64 D8 BB 8B 00           FDIVR FS:DWORD PTR [EBX+139]
                   00 00                                                      
   CODE32:00128E   2E D9 05 00 00           FLD   CS:DWORD PTR L20049
                   00 00R                                                     
   CODE32:001295   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:001298   26 D8 49 76              FMUL  ES:DWORD PTR [ECX+118]
   CODE32:00129C   DE C9                    FMUL                              
   CODE32:00129E   D9 5D FC                 FSTP  DWORD PTR [EBP-4]
C****************************************************************************
C   905:                          //t_Halte=Umdrehungen*10*diam_f/(dia
C +       m_hw*f_H); // n Umdrehungen, 10 * "100" ms Aufrufzyklus = 10
C +       00 ms = 1s;   
C   906:                           
C   907:                          Soll_IBF->Profilflag = 2;  
C****************************************************************************
   CODE32:0012A1   26 C7 01 02 00           MOV   ES:DWORD PTR [ECX],2
                   00 00                                                      
C****************************************************************************
C   908:                          Soll_IBF->ASO_Pos = Ist_IBF->ASO_Pos
C +       ; // damit kein Durck ausgeübt wird wenn Walzprozeß beendet
C +       ist muss hier noch eine Konstante eingefügt werden (z.B. 5) 
C****************************************************************************
   CODE32:0012A8   64 D9 43 27              FLD   FS:DWORD PTR [EBX+39]
C****************************************************************************
C   909:                          break; 
C****************************************************************************
   CODE32:0012AC   26 D9 59 16              FSTP  ES:DWORD PTR [ECX+22]
   CODE32:0012B0   E9 D9 02 00 00           JMP   NEAR PTR   L8
                                  L45:
C****************************************************************************
C   910:                          }                   
C   911:                        
C   912:                       //-------------------------------------
C +       ------------------------------------------------------------
C +       ----- 
C   913:                      //--------------------------Kraftsteueru
C +       ng des oberen Axialschlittens ------------------------------
C +       ---- 
C   914:                      //--------------------------------------
C +       ------------------------------------------------------------

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 99

     Interleaved Listing

C +       ---- 
C   915:                          
C   916:                      if(Axialkraft != NULL) 
C   917:                      { 
C****************************************************************************
   CODE32:0012B5   D9 EE                    FLDZ                              
   CODE32:0012B7   D8 5D C4                 FCOMP DWORD PTR [EBP-60]
   CODE32:0012BA   DF E0                    FNSTSW AX                         
   CODE32:0012BC   9E                       SAHF                              
   CODE32:0012BD   74 3A                    JE    NEAR PTR   L46
C****************************************************************************
C   918:                                            
C   919:                        uk1_ASO = uk_ASO; 
C****************************************************************************
   CODE32:0012BF   D9 45 F0                 FLD   DWORD PTR [EBP-16]
   CODE32:0012C2   D9 5D D8                 FSTP  DWORD PTR [EBP-40]
C****************************************************************************
C   920:                        uk_ASO = (Ist_IBF->FA_f - Axialkraft);
C +                        // gemittelte Axialkraft aus Interfac. 
C****************************************************************************
   CODE32:0012C5   D9 45 C4                 FLD   DWORD PTR [EBP-60]
   CODE32:0012C8   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:0012CB   26 D8 69 1B              FSUBR ES:DWORD PTR [ECX+27]
   CODE32:0012CF   D9 5D F0                 FSTP  DWORD PTR [EBP-16]
C****************************************************************************
C   921:                         
C   922:                        Del_ASO_Pos = KP*(uk_ASO - uk1_ASO) +
C +       1.0F*uk_ASO;    // PI-Regler nach Böhmer, jedoch mit KP=Böhm
C +       er;KI=1.0F hier noch Einstellen!!!! 
C****************************************************************************
   CODE32:0012D2   D9 45 D8                 FLD   DWORD PTR [EBP-40]
   CODE32:0012D5   D8 6D F0                 FSUBR DWORD PTR [EBP-16]
   CODE32:0012D8   D8 4D AC                 FMUL  DWORD PTR [EBP-84]
   CODE32:0012DB   2E D9 05 00 00           FLD   CS:DWORD PTR L20004
                   00 00R                                                     
   CODE32:0012E2   D8 4D F0                 FMUL  DWORD PTR [EBP-16]
   CODE32:0012E5   DE C1                    FADD                              
   CODE32:0012E7   D9 5D 90                 FSTP  DWORD PTR [EBP-112]
C****************************************************************************
C   923:                                               
C   924:                        Soll_IBF->ASO_Pos = Ist_IBF->ASO_Pos; 
C****************************************************************************
   CODE32:0012EA   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:0012EE   64 D9 43 27              FLD   FS:DWORD PTR [EBX+39]
   CODE32:0012F2   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:0012F5   26 D9 59 16              FSTP  ES:DWORD PTR [ECX+22]
                                  L46:
C****************************************************************************
C   925:                          
C   926:                      } 
C   927:                       
C   928:                          
C   929:                          //----------------------------------
C +       ------------------------------------------------------------
C +       -------- 

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 100

     Interleaved Listing

C   930:                          //----------------------- Positionss
C +       teuerung des oberen Axialschlittens ------------------------
C +       -------- 
C   931:                          //----------------------------------
C +       ------------------------------------------------------------
C +       -------- 
C   932:                           
C   933:                          if(t_dis_h <=0) 
C   934:                          { 
C****************************************************************************
   CODE32:0012F9   D9 EE                    FLDZ                              
   CODE32:0012FB   D8 5D E8                 FCOMP DWORD PTR [EBP-24]
   CODE32:0012FE   DF E0                    FNSTSW AX                         
   CODE32:001300   9E                       SAHF                              
   CODE32:001301   0F 82 86 00 00           JB    NEAR PTR   L47
                   00                                                         
C****************************************************************************
C   935:                              
C   936:                             delta_h = 10*(diam_f*(s_f_alt - I
C +       st_IBF->s_f)-(s_f_alt*s_f_alt) + (Ist_IBF->s_f*Ist_IBF->s_f)
C +       )/(diam_f * s_f_alt - (s_f_alt*s_f_alt));  
C****************************************************************************
   CODE32:001307   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:00130A   26 D9 41 4B              FLD   ES:DWORD PTR [ECX+75]
   CODE32:00130E   D8 6D F8                 FSUBR DWORD PTR [EBP-8]
   CODE32:001311   D8 4D F4                 FMUL  DWORD PTR [EBP-12]
   CODE32:001314   D9 45 F8                 FLD   DWORD PTR [EBP-8]
   CODE32:001317   D8 4D F8                 FMUL  DWORD PTR [EBP-8]
   CODE32:00131A   DE E9                    FSUBR                             
   CODE32:00131C   26 D9 41 4B              FLD   ES:DWORD PTR [ECX+75]
   CODE32:001320   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:001324   64 D8 4B 4B              FMUL  FS:DWORD PTR [EBX+75]
   CODE32:001328   DE C1                    FADD                              
   CODE32:00132A   2E D9 05 00 00           FLD   CS:DWORD PTR L20049
                   00 00R                                                     
   CODE32:001331   DE C9                    FMUL                              
   CODE32:001333   D9 45 F8                 FLD   DWORD PTR [EBP-8]
   CODE32:001336   D8 4D F4                 FMUL  DWORD PTR [EBP-12]
   CODE32:001339   D9 45 F8                 FLD   DWORD PTR [EBP-8]
   CODE32:00133C   D8 4D F8                 FMUL  DWORD PTR [EBP-8]
   CODE32:00133F   DE E9                    FSUBR                             
   CODE32:001341   DE F9                    FDIVR                             
   CODE32:001343   D9 5D CC                 FSTP  DWORD PTR [EBP-52]
C****************************************************************************
C   937:                             // Delta_h = 10 mm Werkzeugbreite
C +        *gef.Wanddicke (diam_f)*(Wanddicke[n]^2-Wanddicke[n-1]^2)+W
C +       anddicke[n-1]^2-Wanddike[n]^2/(Klammerausdruck) 
C   938:                              
C   939:                             Soll_IBF->ASO_Pos = Soll_IBF->Sol
C +       l_ASO_Pos_alt + delta_h; 
C****************************************************************************
   CODE32:001346   D9 45 CC                 FLD   DWORD PTR [EBP-52]
   CODE32:001349   0F B4 5D 08              LFS   EBX,PWORD PTR [EBP+8]
   CODE32:00134D   64 D8 43 42              FADD  FS:DWORD PTR [EBX+66]
   CODE32:001351   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 101

     Interleaved Listing

   CODE32:001354   26 D9 59 16              FSTP  ES:DWORD PTR [ECX+22]
C****************************************************************************
C   940:                              
C   941:                             Soll_IBF->Soll_ASO_Pos_alt = Soll
C +       _IBF->ASO_Pos;   
C****************************************************************************
   CODE32:001358   64 D9 43 16              FLD   FS:DWORD PTR [EBX+22]
   CODE32:00135C   26 D9 59 42              FSTP  ES:DWORD PTR [ECX+66]
C****************************************************************************
C   942:                             s_f_alt = Ist_IBF->s_f;    
C****************************************************************************
   CODE32:001360   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:001363   26 D9 41 4B              FLD   ES:DWORD PTR [ECX+75]
   CODE32:001367   D9 5D F8                 FSTP  DWORD PTR [EBP-8]
C****************************************************************************
C   943:                             t_dis_h = 10*(Ist_IBF->Vorring.D_
C +       Null/(diam_hw*f_H)); // 1 Umdrehungen (kein Wert vor der 10)
C +       , 10*100 ms = 1000 ms = 1s 
C****************************************************************************
   CODE32:00136A   D9 45 EC                 FLD   DWORD PTR [EBP-20]
   CODE32:00136D   C4 8D 34 03 00           LES   ECX,PWORD PTR [EBP+820]
                   00                                                         
   CODE32:001373   26 D8 09                 FMUL  ES:DWORD PTR [ECX]
   CODE32:001376   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:00137A   64 D8 BB 8B 00           FDIVR FS:DWORD PTR [EBX+139]
                   00 00                                                      
   CODE32:001381   2E D9 05 00 00           FLD   CS:DWORD PTR L20049
                   00 00R                                                     
   CODE32:001388   DE C9                    FMUL                              
   CODE32:00138A   D9 5D E8                 FSTP  DWORD PTR [EBP-24]
                                  L47:
C****************************************************************************
C   944:                          }         
C   945:                           
C   946:                          t_dis_h--; 
C****************************************************************************
   CODE32:00138D   2E D9 05 00 00           FLD   CS:DWORD PTR L20004
                   00 00R                                                     
   CODE32:001394   D8 6D E8                 FSUBR DWORD PTR [EBP-24]
C****************************************************************************
C   947:                           
C   948:                          break; 
C****************************************************************************
   CODE32:001397   D9 5D E8                 FSTP  DWORD PTR [EBP-24]
   CODE32:00139A   E9 EF 01 00 00           JMP   NEAR PTR   L8
C****************************************************************************
C   949:                        
C   950:                        
C   951:          case 2:   //----------------------------------------
C +       ----------------------------------------- 
C   952:                    //------- 2 Umdrehungen abwarten für gleic
C +       hmäßiges Profil über Umfang ------------- 
C   953:                    //----------------------------------------
C +       ----------------------------------------- 
C   954:                     

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 102

     Interleaved Listing

C   955:                    Soll_Inter->kwo_n = kw_ia/hw_ir * (diam_hw
C +        * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AGR + Ist_IBF->Pos
C +       _auf_Mantel)*sin_kw_winkel_halbe); 
C****************************************************************************
                                  L48:
   CODE32:00139F   D9 85 8C 00 00           FLD   DWORD PTR [EBP+140]
                   00                                                         
   CODE32:0013A5   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:0013AC   64 D8 0B                 FMUL  FS:DWORD PTR [EBX]
   CODE32:0013AF   2E D9 05 00 00           FLD   CS:DWORD PTR L20005
                   00 00R                                                     
   CODE32:0013B6   DE F9                    FDIVR                             
   CODE32:0013B8   64 D9 43 08              FLD   FS:DWORD PTR [EBX+8]
   CODE32:0013BC   0F B5 95 34 03           LGS   EDX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:0013C3   65 D8 7A 0C              FDIVR GS:DWORD PTR [EDX+12]
   CODE32:0013C7   DE C9                    FMUL                              
   CODE32:0013C9   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:0013CD   64 D9 83 AB 00           FLD   FS:DWORD PTR [EBX+171]
                   00 00                                                      
   CODE32:0013D4   0F B5 55 18              LGS   EDX,PWORD PTR [EBP+24]
   CODE32:0013D8   65 D8 82 A7 00           FADD  GS:DWORD PTR [EDX+167]
                   00 00                                                      
   CODE32:0013DF   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:0013E6   64 D9 43 10              FLD   FS:DWORD PTR [EBX+16]
   CODE32:0013EA   DE C9                    FMUL                              
   CODE32:0013EC   DE F9                    FDIVR                             
   CODE32:0013EE   C4 4D 10                 LES   ECX,PWORD PTR [EBP+16]
   CODE32:0013F1   26 D9 59 34              FSTP  ES:DWORD PTR [ECX+52]
C****************************************************************************
C   956:                    Soll_Inter->kwu_n = kw_ia/hw_ir * (diam_hw
C +        * Ist_Inter.hw_n/2.0F)/((Ist_IBF->Del_Kr_AGR + Ist_IBF->Pos
C +       _auf_Mantel)*sin_kw_winkel_halbe);
C +       	 
C****************************************************************************
   CODE32:0013F5   D9 85 8C 00 00           FLD   DWORD PTR [EBP+140]
                   00                                                         
   CODE32:0013FB   64 D8 0B                 FMUL  FS:DWORD PTR [EBX]
   CODE32:0013FE   2E D9 05 00 00           FLD   CS:DWORD PTR L20005
                   00 00R                                                     
   CODE32:001405   DE F9                    FDIVR                             
   CODE32:001407   64 D9 43 08              FLD   FS:DWORD PTR [EBX+8]
   CODE32:00140B   0F B5 95 34 03           LGS   EDX,PWORD PTR [EBP+820]
                   00 00                                                      
   CODE32:001412   65 D8 7A 0C              FDIVR GS:DWORD PTR [EDX+12]
   CODE32:001416   DE C9                    FMUL                              
   CODE32:001418   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:00141C   64 D9 83 AB 00           FLD   FS:DWORD PTR [EBX+171]
                   00 00                                                      
   CODE32:001423   0F B5 55 18              LGS   EDX,PWORD PTR [EBP+24]
   CODE32:001427   65 D8 82 A7 00           FADD  GS:DWORD PTR [EDX+167]
                   00 00                                                      
   CODE32:00142E   0F B4 9D 34 03           LFS   EBX,PWORD PTR [EBP+820]

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 103

     Interleaved Listing

                   00 00                                                      
   CODE32:001435   64 D9 43 10              FLD   FS:DWORD PTR [EBX+16]
   CODE32:001439   DE C9                    FMUL                              
   CODE32:00143B   DE F9                    FDIVR                             
   CODE32:00143D   26 D9 59 38              FSTP  ES:DWORD PTR [ECX+56]
C****************************************************************************
C   957:                     
C   958:                    Soll_IBF->ASO_V = 5.0F; 
C****************************************************************************
   CODE32:001441   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:001444   B8 00 00 A0 40           MOV   EAX,1084227584
   CODE32:001449   26 89 41 26              MOV   ES:DWORD PTR [ECX+38],EAX
C****************************************************************************
C   959:                                    
C   960:                       
C   961:                    t_Halte--; 
C****************************************************************************
   CODE32:00144D   2E D9 05 00 00           FLD   CS:DWORD PTR L20004
                   00 00R                                                     
   CODE32:001454   D8 6D FC                 FSUBR DWORD PTR [EBP-4]
   CODE32:001457   D9 5D FC                 FSTP  DWORD PTR [EBP-4]
C****************************************************************************
C   962:                    t_warte_flag=0; //zurücksetzen der Bedingu
C +       ng (Diskonti...) 
C****************************************************************************
   CODE32:00145A   B8 00 00 00 00           MOV   EAX,0
   CODE32:00145F   89 45 B4                 MOV   DWORD PTR [EBP-76],EAX
C****************************************************************************
C   963:                     
C   964:                                       
C   965:                    if (t_Halte <= 0)  
C   966:                    {   
C****************************************************************************
   CODE32:001462   D9 EE                    FLDZ                              
   CODE32:001464   D8 5D FC                 FCOMP DWORD PTR [EBP-4]
   CODE32:001467   DF E0                    FNSTSW AX                         
   CODE32:001469   9E                       SAHF                              
   CODE32:00146A   0F 82 1E 01 00           JB    NEAR PTR   L8
                   00                                                         
C****************************************************************************
C   967:                        Soll_IBF->ExitAchse ='a';Soll_IBF->Pro
C +       filflag = 3; break;   //hier befehle reinschreiben, wenn ein
C +        weiterer Schritt abgearbeitet werden soll..... 
C****************************************************************************
   CODE32:001470   26 C6 41 05 61           MOV   ES:BYTE PTR [ECX+5],97
   CODE32:001475   26 C7 01 03 00           MOV   ES:DWORD PTR [ECX],3
                   00 00                                                      
   CODE32:00147C   E9 0D 01 00 00           JMP   NEAR PTR   L8
C****************************************************************************
C   968:                    } 
C   969:                    break;              
C   970:                     
C   971:         
C   972:         case 3:    //Memoryflag= Ist_IBF->Profilflag; 
C   973:                    // RS und AS auffahren; danach manuell Ent

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 104

     Interleaved Listing

C +       ladeposition anfahren (Koppers 'e')      
C   974:                    switch (Ist_IBF->ExitAchse)  
C****************************************************************************
                                  L50:
   CODE32:001481   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:001484   26 0F BE 41 0E           MOVSX EAX,ES:BYTE PTR [ECX+14]
   CODE32:001489   3D 61 00 00 00           CMP   EAX,97
   CODE32:00148E   74 0C                    JE    NEAR PTR   L52
   CODE32:001490   3D 62 00 00 00           CMP   EAX,98
   CODE32:001495   74 3F                    JE    NEAR PTR   L54
   CODE32:001497   E9 F2 00 00 00           JMP   NEAR PTR   L8
C****************************************************************************
C   975:                    {                          
C   976:                     
C   977:                       Steuerbyte_Lese.freigabe = 191;	// wa
C +       r 95 
C   978:                       //Freigabe_MRAW_Senden(); 
C   979:                                    
C   980:                          case 'a': 	 
C   981:                                Soll_IBF->RS_Pos=Ist_IBF->RS_P
C +       os_Start+10.0F; //michl 
C****************************************************************************
                                  L52:
   CODE32:00149C   2E D9 05 00 00           FLD   CS:DWORD PTR L20049
                   00 00R                                                     
   CODE32:0014A3   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:0014A7   64 D8 43 3B              FADD  FS:DWORD PTR [EBX+59]
   CODE32:0014AB   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:0014AE   26 D9 59 12              FSTP  ES:DWORD PTR [ECX+18]
C****************************************************************************
C   982:                                Soll_IBF->RS_V = 5.0F; 
C****************************************************************************
   CODE32:0014B2   B8 00 00 A0 40           MOV   EAX,1084227584
   CODE32:0014B7   26 89 41 22              MOV   ES:DWORD PTR [ECX+34],EAX
C****************************************************************************
C   983:                      
C   984:                                if (Ist_IBF->RS_Pos >= Soll_IB
C +       F->RS_Pos) Soll_IBF->ExitAchse = 'b'; 
C****************************************************************************
   CODE32:0014BB   26 D9 41 12              FLD   ES:DWORD PTR [ECX+18]
   CODE32:0014BF   64 D8 5B 1F              FCOMP FS:DWORD PTR [EBX+31]
   CODE32:0014C3   DF E0                    FNSTSW AX                         
   CODE32:0014C5   9E                       SAHF                              
   CODE32:0014C6   0F 87 C2 00 00           JA    NEAR PTR   L8
                   00                                                         
   CODE32:0014CC   26 C6 41 05 62           MOV   ES:BYTE PTR [ECX+5],98
C****************************************************************************
C   985:                                break; 
C****************************************************************************
   CODE32:0014D1   E9 B8 00 00 00           JMP   NEAR PTR   L8
C****************************************************************************
C   986:    
C   987:                          case 'b': 
C   988:                      
C   989:                                Soll_IBF->AG_Pos = Ist_IBF->AG

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 105

     Interleaved Listing

C +       _Pos_Null  + 50;  
C****************************************************************************
                                  L54:
   CODE32:0014D6   2E D9 05 00 00           FLD   CS:DWORD PTR L20052
                   00 00R                                                     
   CODE32:0014DD   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:0014E1   64 D8 43 37              FADD  FS:DWORD PTR [EBX+55]
   CODE32:0014E5   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:0014E8   26 D9 59 1A              FSTP  ES:DWORD PTR [ECX+26]
C****************************************************************************
C   990:                                Soll_IBF->ASO_Pos= Ist_IBF->AS
C +       O_Pos_Null + 15; //michl 
C****************************************************************************
   CODE32:0014EC   2E D9 05 00 00           FLD   CS:DWORD PTR L20017
                   00 00R                                                     
   CODE32:0014F3   64 D8 43 33              FADD  FS:DWORD PTR [EBX+51]
   CODE32:0014F7   26 D9 59 16              FSTP  ES:DWORD PTR [ECX+22]
C****************************************************************************
C   991:                                 
C   992:                                Soll_IBF->ASO_V = 15.0F;  
C****************************************************************************
   CODE32:0014FB   B8 00 00 70 41           MOV   EAX,1097859072
   CODE32:001500   26 89 41 26              MOV   ES:DWORD PTR [ECX+38],EAX
C****************************************************************************
C   993:                          
C   994:                                 
C   995:                                Soll_IBF->AG_V = 8.0F; 
C****************************************************************************
   CODE32:001504   B8 00 00 00 41           MOV   EAX,1090519040
   CODE32:001509   26 89 41 2A              MOV   ES:DWORD PTR [ECX+42],EAX
C****************************************************************************
C   996:                                Soll_IBF->Soll_ZAR_V = 0.0F;
C +                        	 
C****************************************************************************
   CODE32:00150D   B8 00 00 00 00           MOV   EAX,0
   CODE32:001512   26 89 41 2E              MOV   ES:DWORD PTR [ECX+46],EAX
C****************************************************************************
C   997:                                Soll_IBF->Soll_ZAL_V = 0.0F;
C +                        	 
C****************************************************************************
   CODE32:001516   B8 00 00 00 00           MOV   EAX,0
   CODE32:00151B   26 89 41 32              MOV   ES:DWORD PTR [ECX+50],EAX
C****************************************************************************
C   998:   
C   999:                                if (Ist_IBF->AG_Pos >= Soll_IB
C +       F->AG_Pos)  
C  1000:                                { 
C****************************************************************************
   CODE32:00151F   26 D9 41 1A              FLD   ES:DWORD PTR [ECX+26]
   CODE32:001523   64 D8 5B 23              FCOMP FS:DWORD PTR [EBX+35]
   CODE32:001527   DF E0                    FNSTSW AX                         
   CODE32:001529   9E                       SAHF                              
   CODE32:00152A   77 08                    JA    NEAR PTR   L55
C****************************************************************************
C  1001:                                   Soll_IBF->ExitAchse = ' ';

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 106

     Interleaved Listing

C +        
C****************************************************************************
   CODE32:00152C   26 C6 41 05 20           MOV   ES:BYTE PTR [ECX+5],32
C****************************************************************************
C  1002:                                   Soll_IBF->Profilflag++; 
C****************************************************************************
   CODE32:001531   26 FF 01                 INC   ES:DWORD PTR [ECX]
                                  L55:
C****************************************************************************
C  1003:                                } 
C  1004:                                 
C  1005:                                if (     (Ist_IBF->RS_Pos  >=
C +       Soll_IBF->RS_Pos) 
C  1006:                                      && (Ist_IBF->ASO_Pos >=
C +       Soll_IBF->ASO_Pos) 
C  1007:                                      #ifdef MRAW 
C  1008:                                         && (Ist_IBF->ASU_Pos
C +       >= Soll_IBF->Soll_ASU_Pos) 
C  1009:                                      #endif 
C  1010:                                   ) 
C  1011:                                { 
C****************************************************************************
   CODE32:001534   0F B4 5D 18              LFS   EBX,PWORD PTR [EBP+24]
   CODE32:001538   C4 4D 08                 LES   ECX,PWORD PTR [EBP+8]
   CODE32:00153B   26 D9 41 12              FLD   ES:DWORD PTR [ECX+18]
   CODE32:00153F   64 D8 5B 1F              FCOMP FS:DWORD PTR [EBX+31]
   CODE32:001543   DF E0                    FNSTSW AX                         
   CODE32:001545   9E                       SAHF                              
   CODE32:001546   77 17                    JA    NEAR PTR   L56
   CODE32:001548   26 D9 41 16              FLD   ES:DWORD PTR [ECX+22]
   CODE32:00154C   64 D8 5B 27              FCOMP FS:DWORD PTR [EBX+39]
   CODE32:001550   DF E0                    FNSTSW AX                         
   CODE32:001552   9E                       SAHF                              
   CODE32:001553   77 0A                    JA    NEAR PTR   L56
C****************************************************************************
C  1012:                                   Soll_IBF->ExitAchse = ' ';
C +        
C****************************************************************************
   CODE32:001555   26 C6 41 05 20           MOV   ES:BYTE PTR [ECX+5],32
C****************************************************************************
C  1013:                                   Soll_IBF->Profilflag++; 
C  1014:                                   break; 
C****************************************************************************
   CODE32:00155A   26 FF 01                 INC   ES:DWORD PTR [ECX]
   CODE32:00155D   EB 2F                    JMP   NEAR PTR   L8
                                  L56:
C****************************************************************************
C  1015:                                } 
C  1016:                                //----------------------------
C +       ------------------------------------------------------------
C +       ------------ 
C  1017:                                //------------------- Damit di
C +       e Variabelwerte, die während einer vorgehenden Walzung------
C +       ------------ 
C  1018:                                //--------------------nicht im

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 107

     Interleaved Listing

C +        Speicher verbleiben, müssen diese zurückgesetzt werden-----
C +       ------------ 
C  1019:                                //----------------------------
C +       ------------------------------------------------------------
C +       ------------ 
C  1020:                                    
C  1021:                                   Ist_IBF->FR_f = 0; Ist_IBF-
C +       >FA_f = 0; 
C****************************************************************************
   CODE32:00155F   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:001562   B8 00 00 00 00           MOV   EAX,0
   CODE32:001567   26 89 41 17              MOV   ES:DWORD PTR [ECX+23],EAX
   CODE32:00156B   B8 00 00 00 00           MOV   EAX,0
   CODE32:001570   26 89 41 1B              MOV   ES:DWORD PTR [ECX+27],EAX
C****************************************************************************
C  1022:                                  	zaehler=0;  uk_ASO=0;
C +        
C****************************************************************************
   CODE32:001574   B8 00 00 00 00           MOV   EAX,0
   CODE32:001579   89 45 E4                 MOV   DWORD PTR [EBP-28],EAX
   CODE32:00157C   89 45 F0                 MOV   DWORD PTR [EBP-16],EAX
C****************************************************************************
C  1023:                                   uk1_ASO=0;	diam_f=0;   d
C +       iam_f_alt=0;     t_Halte = 0;   t_warte = 0;	 
C****************************************************************************
   CODE32:00157F   89 45 D8                 MOV   DWORD PTR [EBP-40],EAX
   CODE32:001582   89 45 F4                 MOV   DWORD PTR [EBP-12],EAX
   CODE32:001585   89 45 DC                 MOV   DWORD PTR [EBP-36],EAX
   CODE32:001588   89 45 FC                 MOV   DWORD PTR [EBP-4],EAX
C****************************************************************************
C  1024:                                    
C  1025:                                break;
C +        
C****************************************************************************
   CODE32:00158B   89 45 B0                 MOV   DWORD PTR [EBP-80],EAX
C****************************************************************************
C  1026:                                 
C  1027:                    default: 	break; 
C  1028:                    } // Klammer zu: switch(ExitAchse)
C +                  
C  1029:                    break;	 
C  1030:                    
C  1031:      case 40:      //Routine die zur Pause gehört 
C  1032:                    break; 
C  1033:   
C  1034:  /*----------------------------------------------------------
C +       -----------------------*/	 
C  1035:  /*--------------------------------------ENDE ENDE ENDE -----
C +       -----------------------*/		       
C  1036:  /*----------------------------------------------------------
C +       -----------------------*/ 
C  1037:      
C  1038:  }; // Klammer zu: switch (IBF_Allgemein.IBF_Allgemein.Profil
C +       flag)  
C****************************************************************************

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 108

     Interleaved Listing

                                  L8:
C****************************************************************************
C  1039:          
C  1040:  }; // Klammer zu: Ende von if !Auto else  
C  1041:    
C  1042:  //########## Ende Hand- bzw. Automatiksteuerung ########## 
C  1043:   
C  1044:   
C  1045:      /* -----------------------------------------------------
C +       ------------------- */ 
C  1046:      /*
C +                           */ 
C  1047:      /*  Übergabe der Sollwerte aus der IBF-Struktur an die '
C +       Ist_Inter' Struktur */ 
C  1048:      /*
C +                           */ 
C  1049:      /* -----------------------------------------------------
C +       ------------------- */ 
C  1050:       
C  1051:                 /* Kraft [N]*/ 
C  1052:                    Soll_Inter->rs_kraft  = Soll_IBF->RS_Kraft
C +       ; 
C****************************************************************************
   CODE32:00158E   0F B4 5D 08              LFS   EBX,PWORD PTR [EBP+8]
   CODE32:001592   64 D9 43 06              FLD   FS:DWORD PTR [EBX+6]
   CODE32:001596   C4 4D 10                 LES   ECX,PWORD PTR [EBP+16]
   CODE32:001599   26 D9 59 5A              FSTP  ES:DWORD PTR [ECX+90]
C****************************************************************************
C  1053:                    Soll_Inter->aso_kraft = Soll_IBF->AS_Kraft
C +       ; 
C****************************************************************************
   CODE32:00159D   64 D9 43 0A              FLD   FS:DWORD PTR [EBX+10]
   CODE32:0015A1   26 D9 59 5E              FSTP  ES:DWORD PTR [ECX+94]
C****************************************************************************
C  1054:                    Soll_Inter->ag_kraft  = Soll_IBF->AG_Kraft
C +       ; 
C****************************************************************************
   CODE32:0015A5   64 D9 43 0E              FLD   FS:DWORD PTR [EBX+14]
   CODE32:0015A9   26 D9 59 66              FSTP  ES:DWORD PTR [ECX+102]
C****************************************************************************
C  1055:                   //Soll_Inter->asu_kraft; 
C  1056:                   //Soll_Inter->ag_kraft; 
C  1057:                   //Soll_Inter->zal_kraft; 
C  1058:                   //Soll_Inter->zar_kraft; 
C  1059:   
C  1060:                 /* Flags für Kraftsteuerung */ 
C  1061:                    Soll_Inter->rs_kraftregler_aktiv  =  Ist_I
C +       BF->Flag.rs_kraftregler_aktiv;   /* [0-1] */ 
C****************************************************************************
   CODE32:0015AD   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:0015B0   26 8B 41 53              MOV   EAX,ES:DWORD PTR [ECX+83]
   CODE32:0015B4   C4 4D 10                 LES   ECX,PWORD PTR [EBP+16]
   CODE32:0015B7   26 89 41 42              MOV   ES:DWORD PTR [ECX+66],EAX
C****************************************************************************
C  1062:                    Soll_Inter->aso_kraftregler_aktiv =  Ist_I

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 109

     Interleaved Listing

C +       BF->Flag.as_kraftregler_aktiv; 
C****************************************************************************
   CODE32:0015BB   C4 4D 18                 LES   ECX,PWORD PTR [EBP+24]
   CODE32:0015BE   26 8B 41 57              MOV   EAX,ES:DWORD PTR [ECX+87]
   CODE32:0015C2   C4 4D 10                 LES   ECX,PWORD PTR [EBP+16]
   CODE32:0015C5   26 89 41 46              MOV   ES:DWORD PTR [ECX+70],EAX
C****************************************************************************
C  1063:                     //Soll_Inter->asu_kraftregler_aktiv;   /*
C +        keine Kraftmessung des unter Axialschlittens an Banning*/ 
C  1064:                     //Soll_Inter->ag_kraftregler_aktiv; 
C  1065:                     //Soll_Inter->zal_kraftregler_aktiv; 
C  1066:                     //Soll_Inter->ar_kraftregler_aktiv; 
C  1067:   
C  1068:                 /* Geschwindigkeit [mm/s] */ 
C  1069:                    Soll_Inter->rs_v     = Soll_IBF->RS_V;
C +            /* Übergebe Gechwindigkeit an Tabelle */ 
C****************************************************************************
   CODE32:0015C9   64 D9 43 22              FLD   FS:DWORD PTR [EBX+34]
   CODE32:0015CD   26 D9 19                 FSTP  ES:DWORD PTR [ECX]
C****************************************************************************
C  1070:                    Soll_Inter->aso_v    = Soll_IBF->ASO_V; 
C****************************************************************************
   CODE32:0015D0   64 D9 43 26              FLD   FS:DWORD PTR [EBX+38]
   CODE32:0015D4   26 D9 59 04              FSTP  ES:DWORD PTR [ECX+4]
C****************************************************************************
C  1071:                    Soll_Inter->asu_v    = Soll_IBF->Soll_ASU_
C +       V; 
C****************************************************************************
   CODE32:0015D8   64 D9 83 86 00           FLD   FS:DWORD PTR [EBX+134]
                   00 00                                                      
   CODE32:0015DF   26 D9 59 08              FSTP  ES:DWORD PTR [ECX+8]
C****************************************************************************
C  1072:                    Soll_Inter->ag_v     = Soll_IBF->AG_V;
C +           
C****************************************************************************
   CODE32:0015E3   64 D9 43 2A              FLD   FS:DWORD PTR [EBX+42]
   CODE32:0015E7   26 D9 59 0C              FSTP  ES:DWORD PTR [ECX+12]
C****************************************************************************
C  1073:                    Soll_Inter->zal_v    = Soll_IBF->Soll_ZAL_
C +       V;        
C****************************************************************************
   CODE32:0015EB   64 D9 43 32              FLD   FS:DWORD PTR [EBX+50]
   CODE32:0015EF   26 D9 59 10              FSTP  ES:DWORD PTR [ECX+16]
C****************************************************************************
C  1074:                    Soll_Inter->zar_v    = Soll_IBF->Soll_ZAR_
C +       V; 
C****************************************************************************
   CODE32:0015F3   64 D9 43 2E              FLD   FS:DWORD PTR [EBX+46]
   CODE32:0015F7   26 D9 59 14              FSTP  ES:DWORD PTR [ECX+20]
C****************************************************************************
C  1075:   
C  1076:                /* Positionen [mm]*/ 
C  1077:                    Soll_Inter->rs_pos = Soll_IBF->RS_Pos; 
C****************************************************************************
   CODE32:0015FB   64 D9 43 12              FLD   FS:DWORD PTR [EBX+18]

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 110

     Interleaved Listing

   CODE32:0015FF   26 D9 59 18              FSTP  ES:DWORD PTR [ECX+24]
C****************************************************************************
C  1078:                    Soll_Inter->aso_pos = Soll_IBF->ASO_Pos; 
C****************************************************************************
   CODE32:001603   64 D9 43 16              FLD   FS:DWORD PTR [EBX+22]
   CODE32:001607   26 D9 59 1C              FSTP  ES:DWORD PTR [ECX+28]
C****************************************************************************
C  1079:                    //Soll_Inter->ag_pos = Soll_IBF->AG_Pos; 
C  1080:                    //Soll_Inter->zal_pos = Soll_IBF->ZAL_Pos;
C +        
C  1081:                    //Soll_Inter->zar_pos = Soll_IBF->ZAR_Pos;
C +        
C  1082:   
C  1083:            
C  1084:           
C  1085:  /*----------------------------------------------------------
C +       --------------------------*/ 
C  1086:  /*------------- Anfang Kollisionscheck Modellringwalzwerk --
C +       --------------------------*/ 
C  1087:  /*----------------------------------------------------------
C +       --------------------------*/ 
C  1088:   
C  1089:  #ifdef MRAW 
C  1090:        RS_HW = 1; 
C  1091:        RS_AG = 1; 
C  1092:        AG_RS = 1; 
C  1093:        AS_AS = 1; 
C  1094:         
C  1095:        if ((RS_HW != 0) && (RS_AG != 0)) 
C  1096:        {   
C  1097:          /* Soll_Inter->rs_pos = Soll_IBF->Soll_RS_Pos + offs
C +       et_rs;*/ 
C  1098:           #ifdef MRAW 
C  1099:              _settextposition(7,1); 
C  1100:              printf("                                     ");
C +        
C  1101:           #endif 
C  1102:        } 
C  1103:        else 
C  1104:        {  if (RS_HW == 0) 
C  1105:           { 
C  1106:              #ifdef MRAW 
C  1107:                 _settextposition(7,1); 
C  1108:                 printf("    KOLLISIONSGEFAHR RS - HW   %i
C +         ", RS_HW); 
C  1109:              #endif 
C  1110:           } 
C  1111:           else 
C  1112:           { 
C  1113:              #ifdef MRAW 
C  1114:                 _settextposition(7,1); 
C  1115:                 printf("    KOLLISIONSGEFAHR RS - AG   %i
C +         ", RS_AG); 
C  1116:              #endif 
C  1117:           } 

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 111

     Interleaved Listing

C  1118:        } 
C  1119:         
C  1120:        if (AG_RS != 0) 
C  1121:        {   
C  1122:           Soll_Inter->ag_pos = Soll_IBF->AG_Pos + offset_agr;
C +        
C  1123:           #ifdef MRAW 
C  1124:              _settextposition(7,1); 
C  1125:              printf("                                     ");
C +        
C  1126:           #endif 
C  1127:        } 
C  1128:        else 
C  1129:        { 
C  1130:           #ifdef MRAW 
C  1131:              _settextposition(7,1); 
C  1132:              printf("    KOLLISIONSGEFAHR AG - RS   %i      "
C +       , AG_RS); 
C  1133:           #endif 
C  1134:        } 
C  1135:         
C  1136:        if (AS_AS != 0) 
C  1137:        {   
C  1138:           Soll_Inter->aso_pos = Soll_IBF->ASO_Pos + offset_as
C +       o; 
C  1139:           #ifdef MRAW 
C  1140:              Soll_Inter->asu_pos = Soll_IBF->Soll_ASU_Pos + o
C +       ffset_asu;  //michl rausgenommen 
C  1141:              _settextposition(7,1); 
C  1142:              printf("                                     ");
C +        
C  1143:           #endif 
C  1144:        } 
C  1145:        else 
C  1146:        {   
C  1147:           #ifdef MRAW 
C  1148:              _settextposition(7,1); 
C  1149:              printf("    KOLLISIONSGEFAHR oberer AS - AS   %i
C +             ", AS_AS); 
C  1150:           #endif 
C  1151:        } 
C  1152:  #endif 
C  1153:         
C  1154:  // ------------ Ende Kollisionscheck ----------- 
C  1155:   
C  1156:      return TRUE; 
C****************************************************************************
   CODE32:00160B   B8 FF FF FF FF           MOV   EAX,-1
   CODE32:001610   C9                       LEAVE   
   CODE32:001611   C2 34 03                 RET   820
                                  Main__3RPWF13Def_Ist_InterPfP21Def_IBF_Allgemein_ISTP14Def_Soll_InterP22Def_IBF_Allgemein_SOLL  ENDP

                                            EXTRN  __dl__FPv:BYTE
                                            EXTRN  __cxxtls:BYTE
                                            EXTRN  __nw__FUi:BYTE



CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 112

     Interleaved Listing

                                            END

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 113

     Offsets of Pseudo Segments

     Name                Offset              Size
     CONST                        0        0H          0        0H 
     STRINGS                      0        0H          0        0H 
     LINK                         0        0H         60       3CH 
     CODE32                      60       3CH       5652     1614H 
     CODE32                    5712     1650H        346      15AH 
     CODE32                    6060     17ACH          0        0H 
     DATA                         0        0H         24       18H 
     FAR_DATA                    24       18H          0        0H 
     DATA                        24       18H          0        0H 
     BSS                         24       18H          0        0H 

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 114

     Segment Sizes


     Code Size: 		000017acH  6060 (decimal) 
     Data Size: 		00000018H  24 (decimal) 
     Const Size:		00000000H  0 (decimal) 

CAD-UL CXX386 Version: V401Z 07/31/2006 15:20:04 Page 115

     Symbols

Function Name
               Start Address    End   Address    Start Line       End Line
Main_RAW__3RPWFi12Def_Ein_Puff14Def_Lokal_Puff12Def_Aus_Puff12Def_Ein_Onli12Def_Aus_OnliPfP13Def_Ist_InterP14Def_Soll_InterP22Def_IBF_Allgemein_SOLLP21Def_IBF_Allgemein_IST
                      00003C           0000E8            24             76
Istwerte_RAW__3RPWF12Def_Ein_Puff14Def_Lokal_Puff12Def_Aus_PuffP13Def_Ist_Inter
                      000127           0003C5            82            146
Main__3RPWF13Def_Ist_InterPfP21Def_IBF_Allgemein_ISTP14Def_Soll_InterP22Def_IBF_Allgemein_SOLL
                      000404           001611           153           1156
__ct__3RPWFv
                      001650           000157             7             19
